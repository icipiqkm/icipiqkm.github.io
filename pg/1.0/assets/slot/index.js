System.register("chunks:///slot.js",["./SlotContainer-1a8d96d5.js","./BaseModule-8a96da91.js","cc","./Linkage-3b787fc6.js","./NodeHelper-50e02d60.js","./VueProxy-cfe14689.js","./AudioManager-da424cd3.js","./http_config-34069bdb.js"],(function(){var t,e,n,i,o,r,a,s,l,u,c,_,p,h,b,d,f,m,y,g,w,v,k,C,S,E,O,M,L,P,B,T,F,x,N,I,R,z,A,D,j,H,W,U,V,G,q,Q,K,Z,Y,$;return{setters:[function(o){t=o.b,e=o.c,n=o.S,i=o.g},function(t){o=t.m,r=t.F,a=t._,s=t.a,l=t.d,u=t.e,c=t.L,_=t.l,p=t.M,h=t.C,b=t.q,d=t.p,f=t.H,m=t.b,y=t.c,g=t.T,w=t.N},function(t){v=t.cclegacy,k=t._decorator,C=t.instantiate,S=t.Prefab,E=t.UITransform,O=t.tween,M=t.UIRenderer,L=t.v3,P=t.Tween,B=t.Color,T=t.Button,F=t.Sprite,x=t.Node,N=t.input,I=t.Input,R=t.KeyCode,z=t.macro,A=t.Animation,D=t.Component},function(t){j=t.B,H=t.U,W=t.a,U=t.S,V=t.L,G=t.b},function(t){q=t.d,Q=t.T,K=t.c,Z=t.a},function(t){Y=t.V},function(t){$=t.A},null],execute:function(){var J,X,tt,et,nt;v._RF.push({},"de150qk2O5GvauLpXy5NTdH","slot",void 0);var it,ot,rt,at,st,lt,ut,ct,_t,pt,ht,bt=k.ccclass,dt=(k.property,J=bt("slot"),X=o.Global(r.Event.ReadyModule),tt=o.Global(r.Event.EnterModule),J((a((nt=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))||this).gamePrefab=null,e}s(e,t);var n=e.prototype;return n.onCreated=function(){var t=l(u().mark((function t(){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),n.onReadyModule=function(){var t=l(u().mark((function t(){var e,n,i;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("开始加载slot模块"),e=h.instance.data.custom.game,t.next=4,p.instance.startup(e,this);case 4:if(this.game=p.instance.get(e),n=this.game.config){t.next=8;break}throw Error("slot config is not found");case 8:return t.next=10,this.game.onReadyStart();case 10:return i="layout/prefabs/"+n.GamePrefab,t.next=13,this.game.bundle.load(i,S);case 13:if(this.gamePrefab=t.sent,this.gamePrefab){t.next=16;break}throw Error("load prefab failed");case 16:C(this.gamePrefab).parent=c.instance.getLayer(_.Medium);case 18:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),n.onEnterModule=function(){var t=l(u().mark((function t(){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.game.onStart();case 2:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),e}(j)).prototype,"onReadyModule",[X],Object.getOwnPropertyDescriptor(nt.prototype,"onReadyModule"),nt.prototype),a(nt.prototype,"onEnterModule",[tt],Object.getOwnPropertyDescriptor(nt.prototype,"onEnterModule"),nt.prototype),et=nt))||et);v._RF.pop(),v._RF.push({},"ce4079pa4BA07Be/eEkbgB0","slot_carousel",void 0);var ft,mt,yt,gt,wt,vt,kt,Ct,St,Et,Ot,Mt,Lt,Pt,Bt,Tt,Ft,xt,Nt,It,Rt,zt,At,Dt=k.ccclass,jt=k.property;it=Dt("slot_carousel"),ot=f(dt),rt=jt({displayName:"手动控制播放"}),at=b.UITransform,st=b.UITransform,lt=o.Module(t.Event.Carousel),it(ut=ot((_t=a((ct=function(t){function n(){for(var e,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i))||this,m(e,"manual",_t,y(e)),m(e,"_base",pt,y(e)),m(e,"_free",ht,y(e)),e._index=0,e._target=null,e._tween=null,e}s(n,t);var i=n.prototype;return i.onLoad=function(){this._base.node.active=!1,this._free.node.active=!1},i.initTarget=function(t){this.stopAction(),this._base.node.active=t==e.Base,this._free.node.active=t==e.Free,this._target=this._base.node.active?this._base:this._free},i.__gameType=function(t){if(this.manual)return this.module.logger.log("当前轮播模式为手动模式，不自动播放");this.initTarget(t),this._index=0,this.playCarousel()},i.onCarousel=function(t,n){if(!this.manual)return this.module.logger.log("当前轮播模式为自动模式，不接受外部控制");this.initTarget("base"==t?e.Base:e.Free),"auto"==n?(this._index=0,this.playCarousel()):this.playFixedCarousel(n)},i.playFixedCarousel=function(t){var e=this;this._target.node.children.forEach((function(t){return t.active=!1}));var n=this._target.node.children[t];this.carouselHandler(n,(function(){e.playFixedCarousel(t)}))},i.playCarousel=function(){this._target.node.children.forEach((function(t){return t.active=!1})),this._index>this._target.node.children.length-1&&(this._index=0),this.stopAction();var t=this._target.node.children[this._index++];this.carouselHandler(t,this.playCarousel)},i.carouselHandler=function(t,e){var n=this;if(t){var i,o,r;if(t.active=!0,t.getComponent(E).width>this._target.width){var a=H.getParentInsideLeft(t);t.setPosition(a),o=3,r=5,i=H.getParentOutsideLeft(t)}else o=3,r=0,i=t.getPosition();this._tween=O(t).delay(o).to(r,{position:i}).call((function(){e.call(n)})).start()}},i.stopAction=function(){this._tween&&(this._tween.stop(),this._tween=null)},n}(W)).prototype,"manual",[rt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),pt=a(ct.prototype,"_base",[at],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ht=a(ct.prototype,"_free",[st],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),a(ct.prototype,"__gameType",[d],Object.getOwnPropertyDescriptor(ct.prototype,"__gameType"),ct.prototype),a(ct.prototype,"onCarousel",[lt],Object.getOwnPropertyDescriptor(ct.prototype,"onCarousel"),ct.prototype),ut=ct))||ut);v._RF.pop(),v._RF.push({},"1ff37RDDjxLt7sFeimrbx4H","slot_financial_status",void 0);var Ht,Wt,Ut,Vt,Gt,qt,Qt,Kt,Zt,Yt,$t,Jt,Xt,te,ee,ne,ie,oe,re,ae,se,le,ue,ce,_e,pe,he,be,de,fe,me,ye,ge,we,ve,ke,Ce,Se,Ee,Oe,Me,Le=k.ccclass,Pe=k.property;ft=Le("slot_financial_status"),mt=f(dt),yt=Pe({displayName:"文本待机颜色"}),gt=Pe({displayName:"文本锁定颜色"}),wt=Pe({displayName:"是否可点击"}),vt=b.Type(U,!0,"_labels/_wallet_label"),kt=b.Label("_labels/_bet_label"),Ct=b.Type(U,!0,"_labels/_win_label"),St=b.Type(q,!0,"_sprites/_wallet"),Et=b.Type(q,!0,"_sprites/_bet"),Ot=b.Type(q,!0,"_sprites/_history"),Mt=o.Module(t.Event.UpdateStageWin),ft(Lt=mt((Bt=a((Pt=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i))||this,m(e,"colorIdle",Bt,y(e)),m(e,"colorLock",Tt,y(e)),m(e,"clickable",Ft,y(e)),m(e,"_wallet_label",xt,y(e)),m(e,"_bet_label",Nt,y(e)),m(e,"_win_label",It,y(e)),m(e,"_wallet",Rt,y(e)),m(e,"_bet",zt,y(e)),m(e,"_history",At,y(e)),e}s(e,t);var i=e.prototype;return i.onLoad=function(){var t=this;this.node.getComponentsInChildren(M).forEach((function(e){e.node.name.endsWith("_theme")&&(e.color=t.game.config.Theme)})),this._wallet_label.format((function(e){return g.formatAmount(e,t.viewModel.__entryResult.currency)})).set(0),this._win_label.format((function(t){return g.formatAmount(t)})).set(0),this._bet_label.string="",this.bindButtonProxy(this._wallet.node,"onClickWallet"),this.bindButtonProxy(this._history.node,"onClickHistory"),this.bindButtonProxy(this._bet.node,"onClickBet")},i.onClickWallet=function(){window.__vue_func_test&&window.__vue_func_test((function(){console.log("cocos 收到 回调")})),w.instance.emit(Y.Event.C2V_OpenWallet)},i.onClickBet=function(){w.instance.emit(Y.Event.C2V_OpenBetOption,this.viewModel.__entryResult,this.viewModel.__currentBet)},i.onClickHistory=function(){var t=l(u().mark((function t(){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:w.instance.emit(Y.Event.C2V_OpenHistory,this.game.name);case 1:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),i.__balance=function(t){this._wallet_label.set(t)},i.__currentBet=function(t){if(null!=t){if(""!==this._bet_label.string){var e=L(.5,.5,1),n=L(.7,.7,1),i=L(.6,.6,1);P.stopAllByTarget(this._bet_label.node),O(this._bet_label.node).to(.1,{scale:n},{easing:"smooth"}).to(.1,{scale:e},{easing:"smooth"}).to(.1,{scale:i},{easing:"smooth"}).to(.1,{scale:e},{easing:"smooth"}).start()}this._bet_label.string=g.formatAmount(t.amount,this.viewModel.__entryResult.currency)}else this._bet_label.string=""},i.__gameState=function(t){t==n.Spin&&this._win_label.set(0),t==n.Idle?(this._wallet.button.interactable=this.clickable,this._bet.button.interactable=this.clickable,this._history.button.interactable=this.clickable):(this._wallet.button.interactable=!1,this._bet.button.interactable=!1,this._history.button.interactable=!1),this.updateLabelColor()},i.onUpdateStageWin=function(t,e){this._win_label.counter(e)},i.updateLabelColor=function(){this._win_label.getComponent(M).color=this._history.button.interactable?this.colorIdle:this.colorLock,this._wallet_label.getComponent(M).color=this._wallet.button.interactable?this.colorIdle:this.colorLock,this._bet_label.color=this._bet.button.interactable?this.colorIdle:this.colorLock},e}(W)).prototype,"colorIdle",[yt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new B("#B0DAE0")}}),Tt=a(Pt.prototype,"colorLock",[gt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new B("#FFFFFF")}}),Ft=a(Pt.prototype,"clickable",[wt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),xt=a(Pt.prototype,"_wallet_label",[vt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Nt=a(Pt.prototype,"_bet_label",[kt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),It=a(Pt.prototype,"_win_label",[Ct],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Rt=a(Pt.prototype,"_wallet",[St],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),zt=a(Pt.prototype,"_bet",[Et],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),At=a(Pt.prototype,"_history",[Ot],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),a(Pt.prototype,"__balance",[d],Object.getOwnPropertyDescriptor(Pt.prototype,"__balance"),Pt.prototype),a(Pt.prototype,"__currentBet",[d],Object.getOwnPropertyDescriptor(Pt.prototype,"__currentBet"),Pt.prototype),a(Pt.prototype,"__gameState",[d],Object.getOwnPropertyDescriptor(Pt.prototype,"__gameState"),Pt.prototype),a(Pt.prototype,"onUpdateStageWin",[Mt],Object.getOwnPropertyDescriptor(Pt.prototype,"onUpdateStageWin"),Pt.prototype),Lt=Pt))||Lt);v._RF.pop(),v._RF.push({},"a446f+7hqZHjJoroH9YbjRD","slot_menu_action",void 0);var Be,Te,Fe,xe,Ne,Ie=k.ccclass,Re=k.property;Ht=Ie("slot_menu_action"),Wt=f(dt),Ut=Re({type:V,displayName:"菜单1显示时"}),Vt=Re({type:V,displayName:"菜单2显示时"}),Gt=Re({type:V,displayName:"极速开启时"}),qt=Re({type:V,displayName:"极速关闭时"}),Qt=b.Type(Q,!0,"_menu_1"),Kt=b.Type(Q,!0,"_menu_2"),Zt=b.Node("_menu_1/_turbo_btn"),Yt=b.Node("_menu_1/_decrement_btn"),$t=b.Node("_menu_1/_increment_btn"),Jt=b.Node("_menu_1/_auto_btn"),Xt=b.Node("_menu_1/_switch_btn"),te=b.Node("_menu_1/_switch_btn/_icon_silent"),ee=b.Node("_menu_2/_quit_btn"),ne=b.Node("_menu_2/_sound_btn"),ie=b.Node("_menu_2/_paytable_btn"),oe=b.Node("_menu_2/_rules_btn"),re=b.Node("_menu_2/_history_btn"),ae=b.Node("_menu_2/_switch_btn"),se=o.Global(r.Event.OnMusicSwitched),Ht(le=Wt((ce=a((ue=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i))||this,m(e,"menu1ShowLinkage",ce,y(e)),m(e,"menu2ShowLinkage",_e,y(e)),m(e,"turboOnLinkage",pe,y(e)),m(e,"turboOffLinkage",he,y(e)),m(e,"_menu_1",be,y(e)),m(e,"_menu_2",de,y(e)),m(e,"_turbo_btn",fe,y(e)),m(e,"_decrement_btn",me,y(e)),m(e,"_increment_btn",ye,y(e)),m(e,"_auto_btn",ge,y(e)),m(e,"_switch_btn1",we,y(e)),m(e,"_icon_silent",ve,y(e)),m(e,"_quit_btn",ke,y(e)),m(e,"_sound_btn",Ce,y(e)),m(e,"_paytable_btn",Se,y(e)),m(e,"_rules_btn",Ee,y(e)),m(e,"_history_btn",Oe,y(e)),m(e,"_switch_btn2",Me,y(e)),e._isFirst=!0,e}s(e,t);var i=e.prototype;return i.onLoad=function(){var t=this;this.node.getComponentsInChildren(M).forEach((function(e){e.node.name.endsWith("_theme")&&(e.color=t.game.config.Theme)})),this.initButtonEventScale(this.bindButtonProxy(this._turbo_btn,"onClickTurbo")),this.initButtonEventScale(this.bindButtonProxy(this._auto_btn,"onClickAuto")),this.initButtonEventColor(this.bindButtonProxy(this._switch_btn1,"onClickSwitch1")),this.initButtonEventColor(this.bindButtonProxy(this._decrement_btn,"onClickDecrement")),this.initButtonEventColor(this.bindButtonProxy(this._increment_btn,"onClickIncrement")),this.initButtonEventColor(this.bindButtonProxy(this._quit_btn,"onClickQuit")),this.initButtonEventColor(this.bindButtonProxy(this._sound_btn,"onClickSound")),this.initButtonEventColor(this.bindButtonProxy(this._paytable_btn,"onClickPaytable")),this.initButtonEventColor(this.bindButtonProxy(this._rules_btn,"onClickRules")),this.initButtonEventColor(this.bindButtonProxy(this._history_btn,"onClickHistory")),this.initButtonEventColor(this.bindButtonProxy(this._switch_btn2,"onClickSwitch2")),this._menu_1.node.active=!0,this._menu_2.node.active=!1,this.menu1ShowLinkage.init(),this.menu2ShowLinkage.init(),this.menu1ShowLinkage.execute(),this.menu2ShowLinkage.reset(),this.turboOnLinkage.init(),this.turboOffLinkage.init(),this.onMusicSwitched($.instance.musicEnabled)},i.initButtonEventScale=function(t){t.button.transition=T.Transition.SCALE,t.button.zoomScale=.9,t.button.duration=.05},i.initButtonEventColor=function(t){var e=t.button.target.getComponent(M).color;t.button.transition=T.Transition.COLOR,t.button.normalColor=e,t.button.hoverColor=e,t.button.pressedColor=new B(e.r,e.g,e.b,128),t.button.disabledColor=new B(e.r,e.g,e.b,76)},i.onClickTurbo=function(){this.viewModel.switchTurbo()},i.onClickIncrement=function(){this.viewModel.increment()},i.onClickDecrement=function(){this.viewModel.decrement()},i.onClickAuto=function(){w.instance.emit(Y.Event.C2V_OpenAutoBet)},i.onClickQuit=function(){},i.onClickSound=function(){$.instance.switchEnable()},i.onClickPaytable=function(){w.instance.emit(Y.Event.C2V_OpenPayTable,this.game.name)},i.onClickRules=function(){w.instance.emit(Y.Event.C2V_OpenGameRule,this.game.name)},i.onClickHistory=function(){w.instance.emit(Y.Event.C2V_OpenHistory,this.game.name)},i.__gameState=function(t){this.switchButtonEnable()},i.onMusicSwitched=function(t){if(this._sound_btn){var e=this.getOffOn(this._sound_btn),n=e.off,i=e.on;n&&(n.node.active=!t),i&&(i.node.active=t),this._icon_silent&&(this._icon_silent.active=!t),n.node.active?this._sound_btn.getComponent(T).target=n.node:this._sound_btn.getComponent(T).target=i.node}},i.__isTurbo=function(t){if(this._turbo_btn){var e=this.getOffOn(this._turbo_btn),n=e.off,i=e.on;if(this._isFirst)return i.node.active=!0,n.node.active=!1,void(this._isFirst=!1);n&&(n.node.active=!t),i&&(i.node.active=t),t?this.turboOnLinkage.execute():this.turboOffLinkage.execute()}},i.__currentBetOptions=function(t){if(t){var e=this.viewModel.__betSettingTable.amountList.findIndex((function(e){return e==t.amount}));K.setAlpha(e<=0?.3:1,this._decrement_btn.getComponentInChildren(F).node),K.setAlpha(e>=this.viewModel.__betSettingTable.amountList.length-1?.3:1,this._increment_btn.getComponentInChildren(F).node)}},i.onClickSwitch1=function(){var t=.2;this._menu_1.clear(),this._menu_1.position.from(H.getParentInsideTop(this._menu_1.node)).to(t,H.getParentOutsideBottom(this._menu_1.node),Z.easeQuadraticActionOut()).start(),this._menu_1.opacity.from(255).out(t).start(),this._menu_2.clear(),this._menu_2.position.from(H.getParentOutsideBottom(this._menu_2.node)).to(t,H.getParentInsideTop(this._menu_2.node),Z.easeQuadraticActionOut()).start(),this._menu_2.opacity.from(0).in(t,Z.easeQuadraticActionOut()).start(),this.menu2ShowLinkage.execute(),this.menu1ShowLinkage.reset()},i.onClickSwitch2=function(){var t=.2;this._menu_2.clear(),this._menu_2.position.from(H.getParentInsideTop(this._menu_2.node)).to(t,H.getParentOutsideBottom(this._menu_2.node),Z.easeQuadraticActionOut()).start(),this._menu_2.opacity.from(255).out(t).start(),this._menu_1.clear(),this._menu_1.position.from(H.getParentOutsideBottom(this._menu_1.node)).to(t,H.getParentInsideTop(this._menu_1.node),Z.easeQuadraticActionOut()).start(),this._menu_1.opacity.from(0).in(t,Z.easeQuadraticActionOut()).start(),this.menu1ShowLinkage.execute(),this.menu2ShowLinkage.reset()},i.getOffOn=function(t){var e,n;return t.getComponentsInChildren(F).forEach((function(t){t.node.name.startsWith("_on")?n=t:t.node.name.startsWith("_off")&&(e=t)})),{off:e,on:n}},i.switchButtonEnable=function(){var t=this.viewModel.__gameState,e=this._auto_btn.getComponent(T),i=this._auto_btn.getComponentsInChildren(M);t==n.Idle?(this._decrement_btn.getComponent(T).interactable=!0,this._increment_btn.getComponent(T).interactable=!0,e.interactable=!0,i.forEach((function(t){t.color=new B(t.color.r,t.color.g,t.color.b,255)})),this._switch_btn1.getComponent(T).interactable=!0):(this._decrement_btn.getComponent(T).interactable=!1,this._increment_btn.getComponent(T).interactable=!1,this._switch_btn1.getComponent(T).interactable=!1,e.interactable=!1,i.forEach((function(t){t.color=new B(t.color.r,t.color.g,t.color.b,76)})))},e}(W)).prototype,"menu1ShowLinkage",[Ut],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new V}}),_e=a(ue.prototype,"menu2ShowLinkage",[Vt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new V}}),pe=a(ue.prototype,"turboOnLinkage",[Gt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new V}}),he=a(ue.prototype,"turboOffLinkage",[qt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new V}}),be=a(ue.prototype,"_menu_1",[Qt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),de=a(ue.prototype,"_menu_2",[Kt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),fe=a(ue.prototype,"_turbo_btn",[Zt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),me=a(ue.prototype,"_decrement_btn",[Yt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ye=a(ue.prototype,"_increment_btn",[$t],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ge=a(ue.prototype,"_auto_btn",[Jt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),we=a(ue.prototype,"_switch_btn1",[Xt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ve=a(ue.prototype,"_icon_silent",[te],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ke=a(ue.prototype,"_quit_btn",[ee],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ce=a(ue.prototype,"_sound_btn",[ne],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Se=a(ue.prototype,"_paytable_btn",[ie],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ee=a(ue.prototype,"_rules_btn",[oe],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Oe=a(ue.prototype,"_history_btn",[re],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Me=a(ue.prototype,"_switch_btn2",[ae],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),a(ue.prototype,"__gameState",[d],Object.getOwnPropertyDescriptor(ue.prototype,"__gameState"),ue.prototype),a(ue.prototype,"onMusicSwitched",[se],Object.getOwnPropertyDescriptor(ue.prototype,"onMusicSwitched"),ue.prototype),a(ue.prototype,"__isTurbo",[d],Object.getOwnPropertyDescriptor(ue.prototype,"__isTurbo"),ue.prototype),a(ue.prototype,"__currentBetOptions",[d],Object.getOwnPropertyDescriptor(ue.prototype,"__currentBetOptions"),ue.prototype),le=ue))||le);v._RF.pop(),v._RF.push({},"b6065HWOe1D7aLShkcOAgpj","slot_odds",void 0);var ze,Ae,De,je,He,We,Ue,Ve,Ge,qe,Qe,Ke,Ze,Ye,$e,Je,Xe,tn,en,nn,on=k.ccclass;k.property,Be=on("slot_odds"),Te=f(dt),Fe=o.Module(t.Event.Odds),Be(xe=Te((a((Ne=function(e){function i(){for(var t,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(t=e.call.apply(e,[this].concat(i))||this)._current=null,t}s(i,e);var o=i.prototype;return o.__gameState=function(t){t==n.Spin&&this.hide()},o.onOdds=function(e,i,o,r){var a;if(this.viewModel.__gameState==n.Idle){null==(a=this._current)||a.destroy();var s=e.getWorldPosition(),l=C(i),u=l.getChildByName("button");this.bindButtonProxy(u,"hide","none"),this._current=l,l.parent=this.node,l.active=!0,l.setWorldPosition(s);var c=r?-1:1;l.setScale(c,1,1),l.children.forEach((function(t){t.name.endsWith("_scale")&&t.setScale(t.scale.x*c,t.scale.y,1)})),o(l),this.game.notify.emit(t.Event.OnOddsShow)}},o.hide=function(){var e;null==(e=this._current)||e.destroy(),this._current=null,this.game.notify.emit(t.Event.OnOddsHide)},i}(W)).prototype,"__gameState",[d],Object.getOwnPropertyDescriptor(Ne.prototype,"__gameState"),Ne.prototype),a(Ne.prototype,"onOdds",[Fe],Object.getOwnPropertyDescriptor(Ne.prototype,"onOdds"),Ne.prototype),xe=Ne))||xe);v._RF.pop(),v._RF.push({},"fc4d9NGsTBM7at4Y/sdMlBw","slot_spin_action",void 0);var rn,an,sn,ln,un,cn=k.ccclass,_n=k.property;ze=cn("slot_spin_action"),Ae=f(dt),De=_n({type:V,displayName:"Spin按钮点击联动"}),je=_n({type:V,displayName:"Spin鼠标移入时联动"}),He=_n({type:V,displayName:"Auto鼠标移入联动"}),We=_n({type:V,displayName:"当启动旋转时"}),Ue=b.Button({$_autoCreate:!0,$_clickEvents:"onClickSpin"}),Ve=b.Type(Q,!0),Ge=b.Button({$_autoCreate:!0,$_clickEvents:"onClickAuto"}),qe=b.Type(G),ze(Qe=Ae((Ze=a((Ke=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i))||this,m(e,"spinClickLinkage",Ze,y(e)),m(e,"spinMouseEnterLinkage",Ye,y(e)),m(e,"autoMouseEnterLinkage",$e,y(e)),m(e,"spinStartLinkage",Je,y(e)),m(e,"_spin_main",Xe,y(e)),m(e,"_spinning",tn,y(e)),m(e,"_auto_main",en,y(e)),m(e,"_auto_times_roller",nn,y(e)),e}s(e,t);var i=e.prototype;return i.onLoad=function(){var t=this;this.spinClickLinkage.init(),this.spinClickLinkage.reset(),this.spinMouseEnterLinkage.init(),this.spinMouseEnterLinkage.reset(),this.autoMouseEnterLinkage.init(),this.autoMouseEnterLinkage.reset(),this.spinStartLinkage.init(),this.spinStartLinkage.reset(),this._spin_main.node.on(x.EventType.MOUSE_ENTER,(function(){t.viewModel.__gameState==n.Idle&&t.spinMouseEnterLinkage.execute()}),this),this._spin_main.node.on(x.EventType.MOUSE_LEAVE,(function(){t.spinMouseEnterLinkage.reset()}),this),this._auto_main.node.on(x.EventType.MOUSE_ENTER,(function(){t.autoMouseEnterLinkage.execute()}),this),this._auto_main.node.on(x.EventType.MOUSE_LEAVE,(function(){t.autoMouseEnterLinkage.reset()}),this),this._auto_times_roller.format((function(t){return t.toString()}))},i.onEnable=function(){N.on(I.EventType.KEY_DOWN,this.onKeyDown,this)},i.onDisable=function(){N.off(I.EventType.KEY_DOWN,this.onKeyDown,this)},i.onKeyDown=function(t){t.keyCode==R.SPACE&&this.onClickSpin()},i.__gameState=function(t){this.interactable(),this.spinning(),this.switchIconState(),t==n.Spin&&this.spinStartLinkage.execute()},i.__isInterrupt=function(t){this.switchIconState()},i.__autoSpinTimes=function(t){this._spin_main.node.active=0==t,this._auto_main.node.active=t>0,t>0&&this._auto_times_roller.set(t)},i.onClickSpin=function(){if(this._spin_main.node.activeInHierarchy){var t=this.viewModel.__gameState;if(t==n.Idle)return this.spinMouseEnterLinkage.reset(),this.spinClickLinkage.execute(),void this.viewModel.spin();t<=n.ProcessingResult&&(this.viewModel.stop(),this._spin_main.interactable=!1)}},i.onClickAuto=function(){this.viewModel.autoSpin(0)},i.interactable=function(){this.viewModel.__gameState==n.Idle&&(this._spin_main.interactable=!0)},i.spinning=function(){switch(this.viewModel.__gameState){case n.Idle:this._spinning.clear().angle.by(4,-360).repeatForever().start();break;case n.Spin:case n.Stop:this._spinning.clear().angle.by(.3,-360).repeatForever().start();break;default:this._spinning.angle.stop()}},i.switchIconState=function(){var t=this._spinning.node,e=t.getChildByName("_icon_idle_normal"),i=t.getChildByName("_icon_spin_normal"),o=t.getChildByName("_icon_idle_gray"),r=t.getChildByName("_icon_spin_gray");switch(this.activeNode(e,!1),this.activeNode(i,!1),this.activeNode(r,!1),this.activeNode(o,!1),this.viewModel.__gameState){case n.Idle:this.activeNode(e,!0);break;case n.Spin:case n.Stop:this.viewModel.isInterrupt||this.viewModel.isTurbo?this.activeNode(r,!0):this.activeNode(i,!0);break;default:this.activeNode(o,!0)}},i.activeNode=function(t,e){t&&(t.active=e)},e}(W)).prototype,"spinClickLinkage",[De],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new V}}),Ye=a(Ke.prototype,"spinMouseEnterLinkage",[je],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new V}}),$e=a(Ke.prototype,"autoMouseEnterLinkage",[He],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new V}}),Je=a(Ke.prototype,"spinStartLinkage",[We],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new V}}),Xe=a(Ke.prototype,"_spin_main",[Ue],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),tn=a(Ke.prototype,"_spinning",[Ve],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),en=a(Ke.prototype,"_auto_main",[Ge],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),nn=a(Ke.prototype,"_auto_times_roller",[qe],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),a(Ke.prototype,"__gameState",[d],Object.getOwnPropertyDescriptor(Ke.prototype,"__gameState"),Ke.prototype),a(Ke.prototype,"__isInterrupt",[d],Object.getOwnPropertyDescriptor(Ke.prototype,"__isInterrupt"),Ke.prototype),a(Ke.prototype,"__autoSpinTimes",[d],Object.getOwnPropertyDescriptor(Ke.prototype,"__autoSpinTimes"),Ke.prototype),Qe=Ke))||Qe);v._RF.pop(),v._RF.push({},"b2635GUCVVGurfmIZlDMi2G","slot_fireworks_comp",void 0);var pn,hn=k.ccclass,bn=k.property;rn=hn("slot_fireworks_comp"),an=bn(x),rn((un=a((ln=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i))||this,m(e,"firework_prefab",un,y(e)),e._fireworkPool=[],e._paramsFunc=null,e}s(e,t);var n=e.prototype;return n.onEnable=function(){this._paramsFunc=null,this.unschedule(this.playFirework)},n.scheduleFireworks=function(t,e){this._paramsFunc=e,this.node.active=!0,this.unschedule(this.playFirework),this.schedule(this.playFirework,t,z.REPEAT_FOREVER,0)},n.getParams=function(){return this._paramsFunc?this._paramsFunc():{x:Math.floor(756*Math.random()-378),y:Math.floor(140+472*Math.random()),c:Math.floor(9+9*Math.random())/10}},n.playFirework=function(){var t=this,e=this.getParams(),n=e.x,i=e.y,o=e.c,r=this.getFireworkItem();r.node.active=!0,r.node.setScale(o,o,1),r.node.setPosition(n,i,0),r.play(),r.on(A.EventType.FINISHED,(function(){r.stop(),r.node.active=!1,t._fireworkPool.push(r),r.targetOff(t)}),this)},n.getFireworkItem=function(){if(0==this._fireworkPool.length){var t=this.firework_prefab,e=C(t);this._fireworkPool.push(e.getComponent(A)),this.node.addChild(e)}return this._fireworkPool.pop()},e}(D)).prototype,"firework_prefab",[an],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),sn=ln));v._RF.pop(),v._RF.push({},"aa0c773Wt5BopbSmfPbsM/T","ShiftSlotHandler",void 0),v._RF.pop(),v._RF.push({},"5624bri6ypGqbnuCZhBtOLE","SlotCreator",void 0);var dn=k.ccclass;k.property,dn("SlotCreator")(pn=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))||this)._containerMap=new Map,e}return s(e,t),e.prototype.addContainer=function(t){if(this._containerMap.has(t))return this._containerMap.get(t);var e=t.getComponent(i)||t.addComponent(i);return this._containerMap.set(t,e),e},e}(D));v._RF.pop(),v._RF.push({},"bcec7tIttRBjpW5mZZD88cW","slot_data",void 0),v._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/slot', 'chunks:///slot.js'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});