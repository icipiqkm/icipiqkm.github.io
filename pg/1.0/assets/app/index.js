System.register("chunks:///app.js",["cc","./BaseModule-8a96da91.js","./AudioManager-da424cd3.js","./VueProxy-cfe14689.js","./http_config-34069bdb.js"],(function(){var t,e,n,r,o,a,i,c,s,u,p,f,l,g,d,v,h,y,_,m,b,w,L,R,k;return{setters:[function(o){t=o.cclegacy,e=o._decorator,n=o.director,r=o.Director},function(t){o=t.m,a=t._,i=t.a,c=t.b,s=t.c,u=t.n,p=t.o,f=t.d,l=t.e,g=t.T,d=t.C,v=t.N,h=t.F,y=t.g,_=t.i,m=t.M},function(t){b=t.B,w=t.a,L=t.A},function(t){R=t.V},function(t){k=t.H}],execute:function(){t._RF.push({},"9c14dEZyEZLQb3pf8ESr1XO","app.config",void 0);var x=function(){};x.Register="app:register",x.Login="app:login";var C=function(){};C.MaxReLoginCount=3;var E,A,F,V,j,G,M=function(){};M.Event=function(){},M.Route=x,M.Config=C,t._RF.pop(),t._RF.push({},"5d151PUlB9ACKsc03v8AysN","app_model",void 0);var O,S=e.ccclass,P=(e.property,E=S("app_model"),A=o.Global(M.Route.Login),E((j=a((V=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return e=t.call.apply(t,[this].concat(r))||this,c(e,"__token",j,s(e)),c(e,"__port",G,s(e)),e}return i(e,t),e.prototype.onLogin=function(t){if(t.ok&&200==t.response.code||0==t.response.err){var e=t.response.data;this.__token=e.token,this.__port=e.port,console.log("保存token",this.__token)}},e}(b)).prototype,"__token",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),G=a(V.prototype,"__port",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),a(V.prototype,"onLogin",[A],Object.getOwnPropertyDescriptor(V.prototype,"onLogin"),V.prototype),F=V))||F);t._RF.pop(),t._RF.push({},"c917884umNCmqK/oRj5X0Zg","app_view_model",void 0);var D,N,H,U,q,B,T=e.ccclass,Z=(e.property,T("app_view_model")(O=p(P)(O=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))||this).currentReLoginCount=0,e}i(e,t);var n=e.prototype;return n.login=function(){var t=f(l().mark((function t(){var e;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("true"!=g.parseUrl().fake){t.next=3;break}return t.abrupt("return",!0);case 3:return t.next=5,this.loginHandler();case 5:if((e=t.sent)&&e.ok&&200==e.response.code){t.next=15;break}if(this.currentReLoginCount++,this.module.logger.warn("登陆失败 重新登陆",this.currentReLoginCount+"/"+M.Config.MaxReLoginCount),!(this.currentReLoginCount>M.Config.MaxReLoginCount)){t.next=14;break}return this.module.logger.error("登陆失败"),t.abrupt("return",!1);case 14:return t.abrupt("return",this.login());case 15:return t.abrupt("return",!0);case 16:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),n.registerHandler=function(){var t=f(l().mark((function t(){var e,n;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=d.instance.data.custom.route.register,(n={})[e.params.account]="test123458",n[e.params.password]="test123459",e.params.nickname&&(n[e.params.nickname]="steve"),t.next=7,v.instance.wait(k.Event.Request,e,n,M.Route.Register);case 7:t.sent;case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),n.loginHandler=function(){var t=f(l().mark((function t(){var e,n,r,o,a,i;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e={},n=g.parseUrl(),r=n.account?n.account:"test123456",o=n.password?n.password:"test123456",a=d.instance.data.custom.route.login,e[a.params.account]=r,e[a.params.password]=o,t.next=9,v.instance.wait(k.Event.Request,a,e,M.Route.Login);case 9:return i=t.sent,t.abrupt("return",i[0]);case 11:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),e}(w))||O)||O);t._RF.pop(),t._RF.push({},"2c265FnF79MVYROsQLdge9l","app",void 0);var z=e.ccclass;e.property,D=z("app"),N=o.Global(R.Event.V2C_Login),H=o.Global(R.Event.V2C_LoadGame),U=o.Global(R.Event.V2C_Start),D((a((B=function(t){function e(){return t.apply(this,arguments)||this}i(e,t);var o=e.prototype;return o.onLoad=function(){n.once(r.EVENT_AFTER_SCENE_LAUNCH,this.onAfterSceneLaunched,this)},o.onAfterSceneLaunched=function(){var t=f(l().mark((function t(){return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.error("########### APP ############"),L.instance.lock(!0),t.next=4,m.instance.startup("http");case 4:if(v.instance.emit(R.Event.C2V_AppReady),!this.isDev){t.next=17;break}return console.log("执行开发者模式"),t.next=9,this.onLogin();case 9:if(t.sent){t.next=13;break}return console.error("登陆失败！！！！"),t.abrupt("return");case 13:return t.next=15,this.onLoadGame();case 15:return t.next=17,this.onStart();case 17:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),o.onLogin=function(){var t=f(l().mark((function t(){var e;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getViewModel(Z).login();case 2:return e=t.sent,v.instance.emit(R.Event.C2V_LoginResult,e),t.abrupt("return",e);case 5:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),o.onLoadGame=function(){var t=f(l().mark((function t(){var e;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=d.instance.data.custom.base,t.next=3,m.instance.startup(e);case 3:return t.next=5,v.instance.wait(h.Event.ReadyModule);case 5:v.instance.emit(R.Event.C2V_GameReady);case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),o.onStart=function(){L.instance.lock(!1),v.instance.emit(h.Event.EnterModule)},y(e,[{key:"isDev",get:function(){return false}}]),e}(_)).prototype,"onLogin",[N],Object.getOwnPropertyDescriptor(B.prototype,"onLogin"),B.prototype),a(B.prototype,"onLoadGame",[H],Object.getOwnPropertyDescriptor(B.prototype,"onLoadGame"),B.prototype),a(B.prototype,"onStart",[U],Object.getOwnPropertyDescriptor(B.prototype,"onStart"),B.prototype),q=B));t._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/app', 'chunks:///app.js'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});