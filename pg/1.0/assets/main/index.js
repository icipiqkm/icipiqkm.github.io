System.register("chunks:///main.js",["./BaseModule-8a96da91.js","cc","./VueProxy-cfe14689.js","./NodeHelper-50e02d60.js","./Linkage-3b787fc6.js","./AudioManager-da424cd3.js","./Pool-b92e663e.js"],(function(){var t,e,i,n,r,a,o,s,l,h,c,u,d,p,_,g,f,v,m,y,x,b,S,A,E,w,M,T,z,L,C,O,H,P,N,I,R,D,F,V,k,G,U;return{setters:[function(d){t=d._,e=d.a,i=d.b,n=d.c,r=d.L,a=d.d,o=d.e,s=d.T,l=d.C,h=d.f,c=d.M,u=d.g,d.h},function(t){d=t.cclegacy,p=t._decorator,_=t.Node,g=t.Color,f=t.Canvas,v=t.UITransform,m=t.instantiate,y=t.Label,x=t.RichText,b=t.Toggle,S=t.Button,A=t.director,E=t.Component,w=t.Size,M=t.screen,T=t.sys,z=t.Widget,L=t.Sprite,C=t.view,O=t.AudioSource,H=t.sp,P=t.Enum,N=t.Vec3,I=t.EventTouch,R=t.macro,D=t.easing,F=t.v3,V=t.SpriteFrame,k=t.EventHandler,G=t.Layout,U=t.Vec2,t.UIOpacity},null,null,null,null,null],execute:function(){var B,W,j,Y,Z,K,X,J,Q;d._RF.push({},"b2bd1+njXxJxaFY3ymm06WU","debug-view-runtime-control",void 0);var q=p.ccclass,$=p.property;B=q("internal.DebugViewRuntimeControl"),W=$(_),j=$(_),Y=$(_),B((X=t((K=function(t){function r(){for(var e,r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a))||this,i(e,"compositeModeToggle",X,n(e)),i(e,"singleModeToggle",J,n(e)),i(e,"EnableAllCompositeModeButton",Q,n(e)),e._single=0,e.strSingle=["No Single Debug","Vertex Color","Vertex Normal","Vertex Tangent","World Position","Vertex Mirror","Face Side","UV0","UV1","UV Lightmap","Project Depth","Linear Depth","Fragment Normal","Fragment Tangent","Fragment Binormal","Base Color","Diffuse Color","Specular Color","Transparency","Metallic","Roughness","Specular Intensity","IOR","Direct Diffuse","Direct Specular","Direct All","Env Diffuse","Env Specular","Env All","Emissive","Light Map","Shadow","AO","Fresnel","Direct Transmit Diffuse","Direct Transmit Specular","Env Transmit Diffuse","Env Transmit Specular","Transmit All","Direct Internal Specular","Env Internal Specular","Internal All","Fog"],e.strComposite=["Direct Diffuse","Direct Specular","Env Diffuse","Env Specular","Emissive","Light Map","Shadow","AO","Normal Map","Fog","Tone Mapping","Gamma Correction","Fresnel","Transmit Diffuse","Transmit Specular","Internal Specular","TT"],e.strMisc=["CSM Layer Coloration","Lighting With Albedo"],e.compositeModeToggleList=[],e.singleModeToggleList=[],e.miscModeToggleList=[],e.textComponentList=[],e.labelComponentList=[],e.textContentList=[],e.hideButtonLabel=void 0,e._currentColorIndex=0,e.strColor=["<color=#ffffff>","<color=#000000>","<color=#ff0000>","<color=#00ff00>","<color=#0000ff>"],e.color=[g.WHITE,g.BLACK,g.RED,g.GREEN,g.BLUE],e}e(r,t);var a=r.prototype;return a.start=function(){if(this.node.parent.getComponent(f)){var t=this.node.parent.getComponent(v),e=.5*t.width,i=.5*t.height,n=.1*e-e,r=i-.1*i,a=this.node.getChildByName("MiscMode"),o=m(a);o.parent=this.node,o.name="Buttons";var s=m(a);s.parent=this.node,s.name="Titles";for(var l=0;l<2;l++){var h=m(this.EnableAllCompositeModeButton.getChildByName("Label"));h.setPosition(n+(l>0?450:150),r,0),h.setScale(.75,.75,.75),h.parent=s;var c=h.getComponent(y);c.string=l?"----------Composite Mode----------":"----------Single Mode----------",c.color=g.WHITE,c.overflow=0,this.labelComponentList[this.labelComponentList.length]=c}r-=20;for(var u=0,d=0;d<this.strSingle.length;d++,u++){d===this.strSingle.length>>1&&(n+=200,u=0);var p=d?m(this.singleModeToggle):this.singleModeToggle;p.setPosition(n,r-20*u,0),p.setScale(.5,.5,.5),p.parent=this.singleModeToggle.parent;var _=p.getComponentInChildren(x);_.string=this.strSingle[d],this.textComponentList[this.textComponentList.length]=_,this.textContentList[this.textContentList.length]=_.string,p.on(b.EventType.TOGGLE,this.toggleSingleMode,this),this.singleModeToggleList[d]=p}n+=200,this.EnableAllCompositeModeButton.setPosition(n+15,r,0),this.EnableAllCompositeModeButton.setScale(.5,.5,.5),this.EnableAllCompositeModeButton.on(S.EventType.CLICK,this.enableAllCompositeMode,this),this.EnableAllCompositeModeButton.parent=o;var A=this.EnableAllCompositeModeButton.getComponentInChildren(y);this.labelComponentList[this.labelComponentList.length]=A;var E=m(this.EnableAllCompositeModeButton);E.setPosition(n+90,r,0),E.setScale(.5,.5,.5),E.on(S.EventType.CLICK,this.changeTextColor,this),E.parent=o,(A=E.getComponentInChildren(y)).string="TextColor",this.labelComponentList[this.labelComponentList.length]=A;var w=m(this.EnableAllCompositeModeButton);w.setPosition(n+200,r,0),w.setScale(.5,.5,.5),w.on(S.EventType.CLICK,this.hideUI,this),w.parent=this.node.parent,(A=w.getComponentInChildren(y)).string="Hide UI",this.labelComponentList[this.labelComponentList.length]=A,this.hideButtonLabel=A,r-=40;for(var M=0;M<this.strMisc.length;M++){var T=m(this.compositeModeToggle);T.setPosition(n,r-20*M,0),T.setScale(.5,.5,.5),T.parent=a;var z=T.getComponentInChildren(x);z.string=this.strMisc[M],this.textComponentList[this.textComponentList.length]=z,this.textContentList[this.textContentList.length]=z.string,T.getComponent(b).isChecked=!!M,T.on(b.EventType.TOGGLE,M?this.toggleLightingWithAlbedo:this.toggleCSMColoration,this),this.miscModeToggleList[M]=T}r-=150;for(var L=0;L<this.strComposite.length;L++){var C=L?m(this.compositeModeToggle):this.compositeModeToggle;C.setPosition(n,r-20*L,0),C.setScale(.5,.5,.5),C.parent=this.compositeModeToggle.parent;var O=C.getComponentInChildren(x);O.string=this.strComposite[L],this.textComponentList[this.textComponentList.length]=O,this.textContentList[this.textContentList.length]=O.string,C.on(b.EventType.TOGGLE,this.toggleCompositeMode,this),this.compositeModeToggleList[L]=C}}else console.error("debug-view-runtime-control should be child of Canvas")},a.isTextMatched=function(t,e){var i=new String(t),n=i.search(">");return-1===n?t===e:(i=(i=i.substr(n+1)).substr(0,i.search("<")))===e},a.toggleSingleMode=function(t){for(var e=A.root.debugView,i=t.getComponentInChildren(x),n=0;n<this.strSingle.length;n++)this.isTextMatched(i.string,this.strSingle[n])&&(e.singleMode=n)},a.toggleCompositeMode=function(t){for(var e=A.root.debugView,i=t.getComponentInChildren(x),n=0;n<this.strComposite.length;n++)this.isTextMatched(i.string,this.strComposite[n])&&e.enableCompositeMode(n,t.isChecked)},a.toggleLightingWithAlbedo=function(t){A.root.debugView.lightingWithAlbedo=t.isChecked},a.toggleCSMColoration=function(t){A.root.debugView.csmLayerColoration=t.isChecked},a.enableAllCompositeMode=function(t){var e=A.root.debugView;e.enableAllCompositeMode(!0);for(var i=0;i<this.compositeModeToggleList.length;i++){this.compositeModeToggleList[i].getComponent(b).isChecked=!0}var n=this.miscModeToggleList[0].getComponent(b);n.isChecked=!1,e.csmLayerColoration=!1,(n=this.miscModeToggleList[1].getComponent(b)).isChecked=!0,e.lightingWithAlbedo=!0},a.hideUI=function(t){var e=this.node.getChildByName("Titles"),i=!e.active;this.singleModeToggleList[0].parent.active=i,this.miscModeToggleList[0].parent.active=i,this.compositeModeToggleList[0].parent.active=i,this.EnableAllCompositeModeButton.parent.active=i,e.active=i,this.hideButtonLabel.string=i?"Hide UI":"Show UI"},a.changeTextColor=function(t){this._currentColorIndex++,this._currentColorIndex>=this.strColor.length&&(this._currentColorIndex=0);for(var e=0;e<this.textComponentList.length;e++)this.textComponentList[e].string=this.strColor[this._currentColorIndex]+this.textContentList[e]+"</color>";for(var i=0;i<this.labelComponentList.length;i++)this.labelComponentList[i].color=this.color[this._currentColorIndex]},a.onLoad=function(){},a.update=function(t){},r}(E)).prototype,"compositeModeToggle",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=t(K.prototype,"singleModeToggle",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=t(K.prototype,"EnableAllCompositeModeButton",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=K));d._RF.pop(),d._RF.push({},"7cffeDBdItNFL+ky7xKxPxY","AppInitializer",void 0);var tt=new w(0,0);window.addEventListener("UPDATE_CANVAS_SIZE",(function(t){var e,i,n;e=t.detail.width,i=t.detail.height,n=M.devicePixelRatio,tt.set(e*n,i*n),M.windowSize=tt})),r.instance.initLayer();var et,it,nt,rt=A.runSceneImmediate;A.runSceneImmediate=a(o().mark((function t(e,i,n){var r;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return cc.debug.setDisplayStats(!1),t.next=4,l.instance.initialized();case 4:return T.isBrowser&&(r=s.parseUrl()).language&&(l.instance.data.localized.language=r.language),h.instance.group_log("Sandbox 数据",l.instance.data),t.next=8,c.instance.startup(l.instance.data.rootModule);case 8:rt.call(A,e,i,n),A.runSceneImmediate=rt;case 10:case"end":return t.stop()}}),t)}))),d._RF.pop(),d._RF.push({},"3ef0bNTigBGg7RGKJJ6NDJf","Interface",void 0),d._RF.pop(),d._RF.push({},"b386bMcswxD/KsXMXgqNQGK","ResponsiveBackground",void 0);var at,ot,st,lt,ht=p.ccclass,ct=p.property,ut=p.menu,dt=p.disallowMultiple,pt=p.requireComponent,_t=new w;ht("ResponsiveBackground")(et=ut("适配/响应式背景")(et=pt([z,L])(et=dt((nt=t((it=function(t){function r(){for(var e,r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a))||this,i(e,"designSize",nt,n(e)),e.widget=null,e}e(r,t);var a=r.prototype;return a.onFocusInEditor=function(){this.init()},a.onLostFocusInEditor=function(){this.init()},a.onLoad=function(){this.init()},a.onEnable=function(){C.on("canvas-resize",this.onResize,this),this.onResize()},a.onDisable=function(){C.off("canvas-resize",this.onResize,this)},a.onResize=function(){var t=C.getVisibleSize(),e=Math.max(t.width/this.designSize.width,t.height/this.designSize.height);_t.set(this.designSize.width*e,this.designSize.height*e);var i=_t.width-t.width,n=_t.height-t.height;this.widget.left=.5*-i,this.widget.right=.5*-i,this.widget.top=.5*-n,this.widget.bottom=.5*-n,0==i&&0==n||this.widget.updateAlignment()},a.init=function(){if(0==this.designSize.width&&0==this.designSize.height){var t,e=null==(t=this.node.getComponent(L).spriteFrame)?void 0:t.originalSize;e&&(this.designSize.width=e.width,this.designSize.height=e.height)}var i=this.node.getComponent(z);i.isAlignRight=i.isAlignLeft=i.isAlignTop=i.isAlignBottom=!0,i.left=i.right=i.top=i.bottom=0,this.widget=i},r}(E)).prototype,"designSize",[ct],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new w(0,0)}}),et=it))||et)||et)||et);d._RF.pop(),d._RF.push({},"caf31l/4AZAj4yKJB8mP16G","ResponsiveContent",void 0);var gt,ft,vt,mt,yt,xt,bt,St,At,Et,wt=p.ccclass,Mt=p.property,Tt=p.requireComponent,zt=p.menu,Lt=p.disallowMultiple;wt("ResponsiveContent")(at=Tt(v)(at=zt("适配/响应式内容")(at=Lt((st=t((ot=function(t){function r(){for(var e,r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a))||this,i(e,"maxWidth",st,n(e)),i(e,"maxHeight",lt,n(e)),e._canvas=null,e._transform=null,e}e(r,t);var a=r.prototype;return a.onLoad=function(){this._transform=this.node.getComponent(v),this._canvas=this.getCanvas(this.node.parent)},a.onFocusInEditor=function(){this._transform||(this._transform=this.node.getComponent(v),this._canvas=this.getCanvas(this.node.parent)),this.onSizeChanged()},a.onEnable=function(){var t;null==(t=this._canvas)||t.node.on(_.EventType.SIZE_CHANGED,this.onSizeChanged,this),this.onSizeChanged()},a.onDisable=function(){var t;null==(t=this._canvas)||t.node.off(_.EventType.SIZE_CHANGED,this.onSizeChanged,this)},a.onSizeChanged=function(){this._canvas&&(this._transform.height=Math.min(this._canvas.height,this.maxHeight),this._transform.width=Math.min(this._canvas.width,this.maxWidth))},a.getCanvas=function(t){if(t){var e=t.getComponent(f);return e?e.getComponent(v):this.getCanvas(t.parent)}},r}(E)).prototype,"maxWidth",[Mt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 756}}),lt=t(ot.prototype,"maxHeight",[Mt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1638}}),at=ot))||at)||at)||at);d._RF.pop(),d._RF.push({},"5415cI8r8BJCYc5pjfcDS5J","LocalizedAudio",void 0);var Ct,Ot,Ht,Pt,Nt,It,Rt,Dt,Ft,Vt,kt,Gt,Ut=p.ccclass,Bt=p.property,Wt=p.menu,jt=p.executeInEditMode;gt=Ut("LocalizedAudio"),ft=Wt("多语言/Audio"),vt=Bt({serializable:!0}),mt=Bt({displayOrder:-1}),yt=Bt({serializable:!0}),xt=Bt({displayOrder:-1}),gt(bt=ft(bt=jt((At=t((St=function(t){function r(){for(var e,r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a))||this,i(e,"_module",At,n(e)),i(e,"_key",Et,n(e)),e}e(r,t);var s=r.prototype;return s.onLoad=function(){var e=a(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.prototype.onLoad.call(this),this.setAudio();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),s.onFocusInEditor=function(){this.initEditor()},s.onLostFocusInEditor=function(){this.initEditor()},s.initEditor=function(){var t=a(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.next=6;break;case 4:this._module=t.sent,this.setAudio();case 6:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),s.setAudio=function(){var t=a(o().mark((function t(){var e;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this._module&&this._key){t.next=3;break}return this.clip=null,t.abrupt("return");case 3:t.next=9;break;case 6:this.clip=t.sent,t.next=12;break;case 9:return t.next=11,null==(e=c.instance.get(this._module))||null==(e=e.i18n)?void 0:e.getAudioClip(this._key);case 11:this.clip=t.sent;case 12:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),s.refreshByEditor=function(){this.setAudio()},u(r,[{key:"module",get:function(){return this._module},set:function(t){this._module!==t&&(this._module=t)}},{key:"key",get:function(){return this._key},set:function(t){this._key!==t&&(this._key=t,this.setAudio())}}]),r}(O)).prototype,"_module",[vt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),t(St.prototype,"module",[mt],Object.getOwnPropertyDescriptor(St.prototype,"module"),St.prototype),Et=t(St.prototype,"_key",[yt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),t(St.prototype,"key",[xt],Object.getOwnPropertyDescriptor(St.prototype,"key"),St.prototype),bt=St))||bt)||bt);d._RF.pop(),d._RF.push({},"6a52aQdIBpJgZV047397GvB","LocalizedSpine",void 0);var Yt=p.ccclass,Zt=p.property,Kt=p.menu;Ct=Yt("LocalizedSpine"),Ot=Kt("多语言/Spine"),Ht=Zt({serializable:!0}),Pt=Zt({displayOrder:-1}),Nt=Zt({serializable:!0}),It=Zt({displayOrder:-1}),Rt=Zt({displayOrder:-1}),Ct(Dt=Ot((Ft=function(t){function r(){for(var e,r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a))||this,i(e,"_module",Vt,n(e)),i(e,"_key",kt,n(e)),i(e,"anim",Gt,n(e)),e}e(r,t);var s=r.prototype;return s.onLoad=function(){var t=a(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.setSpine();case 1:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),s.onFocusInEditor=function(){this.initEditor()},s.onLostFocusInEditor=function(){this.initEditor()},s.initEditor=function(){var t=a(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.next=6;break;case 4:this._module=t.sent,this.setSpine();case 6:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),s.setSpine=function(){var t=a(o().mark((function t(){var e;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this._module&&this._key){t.next=3;break}return this.skeletonData=null,t.abrupt("return");case 3:t.next=9;break;case 6:this.skeletonData=t.sent,t.next=12;break;case 9:return t.next=11,null==(e=c.instance.get(this._module))||null==(e=e.i18n)?void 0:e.getSkeletonData(this._key);case 11:this.skeletonData=t.sent;case 12:this.animation=this.anim;case 13:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),s.refreshByEditor=function(){this.setSpine()},u(r,[{key:"module",get:function(){return this._module},set:function(t){this._module!==t&&(this._module=t)}},{key:"key",get:function(){return this._key},set:function(t){this._key!==t&&(this._key=t,this.setSpine())}}]),r}(H.Skeleton),Vt=t(Ft.prototype,"_module",[Ht],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),t(Ft.prototype,"module",[Pt],Object.getOwnPropertyDescriptor(Ft.prototype,"module"),Ft.prototype),kt=t(Ft.prototype,"_key",[Nt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),t(Ft.prototype,"key",[It],Object.getOwnPropertyDescriptor(Ft.prototype,"key"),Ft.prototype),Gt=t(Ft.prototype,"anim",[Rt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Dt=Ft))||Dt);d._RF.pop(),d._RF.push({},"32fd6muR2BKVZlAaLvrvHPi","Interceptor",void 0),d._RF.pop(),d._RF.push({},"ae138DLMTNBBKv9tVFvh4VN","GameManager",void 0);var Xt=A.tick;A.tick=function(t){Xt.call(A,1*t)},d._RF.pop(),d._RF.push({},"d9fe6VEz7xIuKfymKMXGDvv","Shaker",void 0),d._RF.pop(),d._RF.push({},"af4b4pLzoFPaZgvN2YlD93y","TweenCtrl",void 0),d._RF.pop(),d._RF.push({},"58775zvXZVLiKxwueUKlLy5","TweenHelper",void 0),d._RF.pop(),d._RF.push({},"21168fhfp5Aw4tN3YlGEjVv","enum",void 0);var Jt,Qt=function(t){return t[t.Vertical=0]="Vertical",t[t.Horizontal=1]="Horizontal",t}({}),qt=function(t){return t[t.Unrestricted=0]="Unrestricted",t[t.Elastic=1]="Elastic",t[t.Clamped=2]="Clamped",t}({}),$t=function(t){return t[t.Start=0]="Start",t[t.End=1]="End",t}({}),te=function(t){return t[t.Auto=0]="Auto",t[t.Header=1]="Header",t[t.Footer=2]="Footer",t[t.Center=3]="Center",t}({}),ee=function(t){return t[t.Lowest=0]="Lowest",t[t.Medium=1]="Medium",t[t.Highest=2]="Highest",t}({}),ie=function(t){return t[t.Auto=0]="Auto",t[t.Wrap=1]="Wrap",t[t.Nowrap=2]="Nowrap",t}({}),ne=function(t){return t[t.Auto=0]="Auto",t[t.AlwaysAllow=1]="AlwaysAllow",t[t.Disabled=2]="Disabled",t}({}),re=function(t){return t[t.Header=0]="Header",t[t.Footer=1]="Footer",t}({}),ae=function(t){return t[t.UpperLeft=0]="UpperLeft",t[t.UpperCenter=1]="UpperCenter",t[t.UpperRight=2]="UpperRight",t[t.MiddleLeft=3]="MiddleLeft",t[t.MiddleCenter=4]="MiddleCenter",t[t.MiddleRight=5]="MiddleRight",t[t.LowerLeft=6]="LowerLeft",t[t.LowerCenter=7]="LowerCenter",t[t.LowerRight=8]="LowerRight",t}({}),oe=function(t){return t[t.Up=0]="Up",t[t.Down=1]="Down",t[t.Left=2]="Left",t[t.Right=3]="Right",t[t.None=4]="None",t}({}),se=function(t){return t[t.Top_To_Bottom=0]="Top_To_Bottom",t[t.Bottom_To_Top=1]="Bottom_To_Top",t[t.Left_To_Right=2]="Left_To_Right",t[t.Right_To_Left=3]="Right_To_Left",t}({}),le=function(t){return t[t.Both=0]="Both",t[t.Header=1]="Header",t[t.Footer=2]="Footer",t}({}),he=function(t){return t[t.Auto=0]="Auto",t[t.Header=1]="Header",t[t.Footer=2]="Footer",t}({}),ce=function(t){return t[t.Normal=0]="Normal",t[t.Button=1]="Button",t}({}),ue=function(t){return t[t.None=0]="None",t[t.ColorTint=1]="ColorTint",t[t.SpriteSwap=2]="SpriteSwap",t[t.Scale=3]="Scale",t}({}),de=function(t){return t.IDLE="IDLE",t.PULL="PULL",t.WAIT="WAIT",t.RELEASE="RELEASE",t}({}),pe=function(t){return t.CREATED="ADAPTER:HOLDER:CREATED",t.VISIBLE="ADAPTER:HOLDER:VISIBLE",t.DISABLE="ADAPTER:HOLDER:DISABLE",t}({}),_e=function(t){return t.VISIBLE="ADAPTER:VIEW:VISIBLE",t.DISABLE="ADAPTER::VIEW:DISABLE",t}({});P(Qt),P(qt),P($t),P(te),P(re),P(se),P(ae),P(ne),P(ce),P(ue),d._RF.pop(),d._RF.push({},"9e556t6rHxO6ZbZa4CSsrXu","Manager",void 0);var ge=p.ccclass,fe=(p.property,ge("Manager")(Jt=function(){function t(){this._inited=!1,this._eventMap=new Map,this._adapter=null}var e=t.prototype;return e.internal_create=function(t){this._adapter=t},e.internal_init=function(){this._inited||(this._inited=!0,this.onInit())},e.on=function(t,e,i,n){void 0===n&&(n=!1),this._eventMap.has(t)||this._eventMap.set(t,[]);var r=this._eventMap.get(t);null!=r&&r.find((function(t){return t.target==i&&t.callback==e}))||r.push({callback:e,target:i,once:n})},e.off=function(t,e,i){if(this._eventMap.has(t)){var n=this._eventMap.get(t),r=null==n?void 0:n.findIndex((function(t){return t.callback==e&&t.target==i}));-1!=r&&n.splice(r,1)}},e.emit=function(t){if(this._eventMap.has(t)){for(var e=this._eventMap.get(t),i=arguments.length,n=new Array(i>1?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];for(var a=0;a<e.length;a++){var o,s=e[a];(o=s.callback).call.apply(o,[s.target].concat(n)),s.once&&(e.splice(a,1),a--)}}},u(t,[{key:"adapter",get:function(){return this._adapter}}]),t}())||Jt);d._RF.pop(),d._RF.push({},"b7bf3JPeg5Pz4Pj5H6FXtBa","debug",void 0);new g(238,124,55,255),new g(88,175,64,50),new g(56,120,94,255);d._RF.pop(),d._RF.push({},"d16dfIj/wBDe7lg2eRhY7du","helper",void 0);var ve=function(){function t(){}return t.smoothStep=function(t,e,i){return e*(i=-2*(i=this.clamp01(i))*i*i+3*i*i)+t*(1-i)},t.smoothDamp=function(t,e,i,n,r,a){var o=2/(n=Math.max(1e-4,n)),s=o*a,l=1/(1+s+.48*s*s+.235*s*s*s),h=t-e,c=e,u=r*n,d=(i+o*(h=this.clamp(h,0-u,u)))*a;i=(i-o*d)*l;var p=(e=t-h)+(h+d)*l;return c-t>0==p>c&&(i=((p=c)-c)/a),{velocity:i,position:p}},t.clamp01=function(t){return this.clamp(t,0,1)},t.clamp=function(t,e,i){return void 0===e&&(e=0),void 0===i&&(i=1),Math.min(Math.max(t,e),i)},t.sign=function(t){return t>=0?1:-1},t.lerp=function(t,e,i){return t+(e-t)*this.clamp01(i)},t.approximately=function(t,e){return Math.abs(e-t)<Math.max(1e-4*Math.max(Math.abs(t),Math.abs(e)),8*this.Epsilon)},t.round=function(t,e){return Math.round(t*Math.pow(10,e))/Math.pow(10,e)},t.pingpang=function(t){var e=t;e=Math.abs(t);var i=Math.trunc(e);return i%2==0?e-=i:e=1-(e-i),e},t.isNumber=function(t){return"number"==typeof t&&!isNaN(t)},t.progress=function(t,e,i,n){return t+(e-t)*n},t.getGuid=function(){var t=(new Date).getTime();return window.performance&&"function"==typeof window.performance.now&&(t+=performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var i=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"==e?i:3&i|8).toString(16)}))},t}();ve.Epsilon=1401298e-51,ve.Infinity=1/0,d._RF.pop(),d._RF.push({},"c701cxQvelFbLzv3DVRhj2t","Group",void 0);var me,ye,xe,be,Se,Ae,Ee,we,Me,Te,ze,Le,Ce,Oe,He,Pe,Ne,Ie,Re,De,Fe,Ve,ke,Ge,Ue,Be=function(){function t(t){this._adapter=void 0,this._index=-1,this._models=[],this._size={x:0,y:0},this._oldSize={x:0,y:0},this._anchorPoint={x:.5,y:.5},this._position={x:0,y:0},this._oldPosition={x:0,y:0},this._totalMinSize={x:0,y:0},this._totalPreferredSize={x:0,y:0},this._totalFlexibleSize={x:0,y:0},this._isFixed=!1,this._fixedIndex=-1,this._adapter=t,this.internal_reset()}var e=t.prototype;return e.findModelIndex=function(t){return this.models.findIndex((function(e){return e.index==t}))},e.internal_reset=function(){this._models=[],this._size={x:0,y:0},this._oldSize={x:0,y:0},this._anchorPoint={x:.5,y:.5},this._position={x:0,y:0},this._oldPosition={x:0,y:0},this._totalMinSize={x:0,y:0},this._totalPreferredSize={x:0,y:0},this._totalFlexibleSize={x:0,y:0},this._isFixed=!1,this._fixedIndex=-1,this._setAnchorPoint()},e.internal_setPosition=function(t){var e=this.adapter.mainAxis;this.oldPosition[e]=this.position[e],this.position[e]=t},e.internal_setIndex=function(t){this._index=t},e.internal_insert=function(t,e,i){e.internal_reset();var n=this.models;if(this.internal_reset(),this._fixedIndex=t.fixedIndex,!i)for(var r=0;r<n.length;r++){var a=n[r];if(!(a.index<t.modelIndex))break;if(!this._insertHandler(a,e))return t.modelIndex=a.index,t.fixedIndex=this.isFixed?this.index:t.fixedIndex,!0}for(var o=t.modelIndex;o<this.adapter.modelManager.length;o++){var s=this.adapter.modelManager.get(o);if(!this._insertHandler(s,e))return t.modelIndex=s.index,t.fixedIndex=this.isFixed?this.index:t.fixedIndex,s.index}return!1},e.internal_includes=function(t){for(var e,i=this,n=function(){var e=t[r];if(-1!=i.models.findIndex((function(t){return t.data==e})))return{v:!0}},r=0;r<t.length;r++)if(e=n())return e.v;return!1},e._insertHandler=function(t,e){if(e.internal_isWrap(t,this))return e.internal_reset(),!1;e.internal_push(t),t.element.fixed&&(this._isFixed=!0,this._fixedIndex=-1);var i=this.adapter.mainAxis,n=this.adapter.crossAxis;return(!t.element.ignoreLayout||t.element.ignoreLayout&&t.element.placeholder)&&(this.size[i]=Math.max(this.size[i],t.size[i]*t.scale[i])),this.size[n]=this.adapter.crossAxisSize,this.oldSize[i]=this.size[i],this.oldSize[n]=this.size[n],this.models.push(t),!0},e._setAnchorPoint=function(){switch(this.adapter.viewManager.stretchDirection){case te.Center:this.anchorPoint[this.adapter.mainAxis]=.5;break;case te.Header:this.anchorPoint[this.adapter.mainAxis]=1-this.adapter.mainAxisAnchorPoint;break;default:this.anchorPoint[this.adapter.mainAxis]=this.adapter.mainAxisAnchorPoint}},u(t,[{key:"adapter",get:function(){return this._adapter}},{key:"index",get:function(){return this._index}},{key:"models",get:function(){return this._models}},{key:"size",get:function(){return this._size}},{key:"oldSize",get:function(){return this._oldSize}},{key:"anchorPoint",get:function(){return this._anchorPoint}},{key:"position",get:function(){return this._position}},{key:"oldPosition",get:function(){return this._oldPosition}},{key:"totalMinSize",get:function(){return this._totalMinSize}},{key:"totalPreferredSize",get:function(){return this._totalPreferredSize}},{key:"totalFlexibleSize",get:function(){return this._totalFlexibleSize}},{key:"isFixed",get:function(){return this._isFixed}},{key:"fixedIndex",get:function(){return this._fixedIndex}}]),t}();d._RF.pop(),d._RF.push({},"d91f5nGeD5IbK7eVk2CJPJh","LayoutManager",void 0);var We,je=p.ccclass,Ye=p.property,Ze=function(t){return t[t.ON_LAYOUT_COMPLATED=0]="ON_LAYOUT_COMPLATED",t[t.ON_CHANGED_LAYOUT_STATE=1]="ON_CHANGED_LAYOUT_STATE",t}(Ze||{}),Ke=(me=je("LayoutManager"),ye=Ye({type:ae}),xe=Ye({type:ae,tooltip:"布局元素的对齐方式"}),be=Ye({tooltip:"元素交叉轴布局的间距"}),Se=Ye({tooltip:"反转布局"}),Ae=Ye({tooltip:"延迟布局，开启后会统一在下一帧布局，建议开启"}),Ee=Ye({group:{id:"0",name:"forceExpand"},tooltip:"是否强制布局元素宽度扩展以填充额外的可用空间"}),we=Ye({group:{id:"0",name:"forceExpand"},tooltip:"是否强制布局元素高度扩展以填充额外的可用空间"}),Me=Ye({group:{id:"0",name:"controlSize"},tooltip:"如果设置为 false，布局只会影响元素的位置，而不会影响宽度，在这种情况下你可以设置元素的宽度\n如果设置为 true，元素的宽度将由布局根据它们各自的 IElement.minSize、IElement.preferredSize、IElement.flexibleSize自动设置。如果元素的宽度应根据可用空间的大小而变化，应开启此功能。在这种情况下不能直接设置每个元素的宽度，但可以通过控制每个元素的IElement.minSize、IElement.preferredSize、IElement.flexibleSize来进行控制"}),Te=Ye({group:{id:"0",name:"controlSize"},tooltip:"如果设置为 false，布局只会影响元素的位置，而不会影响高度，在这种情况下你可以设置元素的高度\n如果设置为 true，元素的高度将由布局根据它们各自的 IElement.minSize、IElement.preferredSize、IElement.flexibleSize自动设置。如果元素的高度应根据可用空间的大小而变化，应开启此功能。在这种情况下不能直接设置每个元素的高度，但可以通过控制每个元素的IElement.minSize、IElement.preferredSize、IElement.flexibleSize来进行控制"}),ze=Ye({group:{id:"0",name:"controlScale"},tooltip:"是否使用 x 缩放计算宽度"}),Le=Ye({group:{id:"0",name:"controlScale"},tooltip:"是否使用 y 缩放计算高度"}),me(((Ue=function(t){function r(){for(var e,r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a))||this,i(e,"_childAlignment",He,n(e)),i(e,"_spacing",Pe,n(e)),i(e,"_reverseArrangement",Ne,n(e)),i(e,"delayLayout",Ie,n(e)),i(e,"_forceExpandWidth",Re,n(e)),i(e,"_forceExpandHeight",De,n(e)),i(e,"_controlSizeWidth",Fe,n(e)),i(e,"_controlSizeHeight",Ve,n(e)),i(e,"_controlScaleWidth",ke,n(e)),i(e,"_controlScaleHeight",Ge,n(e)),e._isDirty=!1,e._layoutQueue=[],e}e(r,t);var a=r.prototype;return a.onInit=function(){},a.layout=function(t){t&&(this.delayLayout?(this.unLayout(t.index),this._layoutQueue.push(t),this._isDirty=!0):(this._layoutHandler(t),this.emit(Ze.ON_LAYOUT_COMPLATED,[t.index])))},a.unLayout=function(t){-1!=(t=this._layoutQueue.findIndex((function(e){return e.index==t})))&&this._layoutQueue.splice(t,1)},a._layoutHandler=function(t){this._calcAlongAxis(t,Qt.Horizontal,this.adapter.isHorizontal),this._setChildrenAlongAxis(t,Qt.Horizontal,this.adapter.isHorizontal),this._calcAlongAxis(t,Qt.Vertical,this.adapter.isHorizontal),this._setChildrenAlongAxis(t,Qt.Vertical,this.adapter.isHorizontal)},a._calcAlongAxis=function(t,e,i){for(var n=e==Qt.Horizontal?this.horizontal:this.vertical,r=this._getControlSize(e),a=this._getControlScale(e),o=this._getForceExpandSize(e),s=n,l=n,h=0,c=i!=(e==Qt.Vertical),u=this._getLayoutList(t.models),d=0;d<u.length;d++){var p=u[d],_=this._getChildSizes(p,e,r,o),g=_.min,f=_.preferred,v=_.flexible;if(a){var m=p.scale[this._getAxis(e)];g*=m,f*=m,v*=m}c?(s=Math.max(g+n,s),l=Math.max(f+n,l),h=Math.max(v,h)):(s+=g+this.spacing,l+=f+this.spacing,h+=v)}!c&&u.length>0&&(s-=this.spacing,l-=this.spacing),l=Math.max(s,l),this._setLayoutInputForAxis(t,s,l,h,e)},a._getControlSize=function(t){return t==Qt.Horizontal?this.controlSizeWidth:this.controlSizeHeight},a._getControlScale=function(t){return t==Qt.Horizontal?this.controlScaleWidth:this.controlScaleHeight},a._getForceExpandSize=function(t){return t==Qt.Horizontal?this.forceExpandWidth:this.forceExpandHeight},a._setChildrenAlongAxis=function(t,e,i){var n=t.size[this._getAxis(e)],r=this._getControlSize(e),a=this._getControlScale(e),o=this._getForceExpandSize(e),s=this._getAlignmentOnAxis(e),l=this._getLayoutList(t.models),h=i!=(e==Qt.Vertical),c=this.reverseArrangement?l.length-1:0,u=this.reverseArrangement?0:l.length,d=this.reverseArrangement?-1:1,p=this._getAxis(e);if(h)for(var _=n-(e==Qt.Horizontal?this.horizontal:this.vertical),g=c;this.reverseArrangement?g>=u:g<u;g+=d){var f=l[g],v=this._getChildSizes(f,e,r,o),m=v.min,y=v.preferred,x=v.flexible,b=a?f.scale[p]:1,S=ve.clamp(_,m,x>0?n:y),A=this._getStartOffset(t,e,S*b);if(r)this._setChildAlongAxisWithScale(t,f,e,A,b,S);else{var E=(S-f.size[p])*s;E*=b,this._setChildAlongAxisWithScale(t,f,e,A+E,b)}}else{var w=e==Qt.Horizontal?this.left:this.top,M=0,T=n-this._getTotalPreferredSize(t,e);T>0&&(0==this._getTotalFlexibleSize(t,e)?w=this._getStartOffset(t,e,this._getTotalPreferredSize(t,e)-(e==Qt.Horizontal?this.horizontal:this.vertical)):this._getTotalFlexibleSize(t,e)>0&&(M=T/this._getTotalFlexibleSize(t,e)));var z=0;this._getTotalMinSize(t,e)!=this._getTotalPreferredSize(t,e)&&(z=ve.clamp01((n-this._getTotalMinSize(t,e))/(this._getTotalPreferredSize(t,e)-this._getTotalMinSize(t,e))));for(g=c;this.reverseArrangement?g>=u:g<u;g+=d){var L=l[g],C=this._getChildSizes(L,e,r,o),O=(m=C.min,y=C.preferred,x=C.flexible,a?L.scale[p]:1),H=ve.lerp(m,y,z);if(H+=x*M,r)this._setChildAlongAxisWithScale(t,L,e,w,O,H);else{E=(H-L.size[p])*s;this._setChildAlongAxisWithScale(t,L,e,w+E,O)}w+=H*O+this.spacing}}},a._setChildAlongAxisWithScale=function(t,e,i,n,r,a){if(null!=e){var o=this._getAxis(i),s=0;isNaN(a)?s=e.size[o]:(e.layoutSize[o]=a,s=a);var l={x:e.position.x,y:e.position.y},h=0;i==Qt.Horizontal?(h=n+s*e.anchorPoint[o]*r,h-=t.size[o]*t.anchorPoint[o],h+=t.position[o]):(h=-n-s*(1-e.anchorPoint[o])*r,h+=t.size[o]*(1-t.anchorPoint[o]),h+=t.position[o]),l[o]=h,e.position=l}},a._getStartOffset=function(t,e,i){var n=i+(e==Qt.Horizontal?this.horizontal:this.vertical),r=t.size[this._getAxis(e)]-n,a=this._getAlignmentOnAxis(e);return(e==Qt.Horizontal?this.left:this.top)+r*a},a._setLayoutInputForAxis=function(t,e,i,n,r){var a=this._getAxis(r);t.totalMinSize[a]=e,t.totalPreferredSize[a]=i,t.totalFlexibleSize[a]=n},a._getAxis=function(t){return t==Qt.Horizontal?"x":"y"},a._getMinSize=function(t,e){return t.minSize[this._getAxis(e)]},a._getPreferredSize=function(t,e){var i=this._getAxis(e);return Math.max(t.minSize[i],t.preferredSize[i])},a._getFlexibleSize=function(t,e){return t.flexibleSize[this._getAxis(e)]},a._getTotalMinSize=function(t,e){return t.totalMinSize[this._getAxis(e)]},a._getTotalPreferredSize=function(t,e){return t.totalPreferredSize[this._getAxis(e)]},a._getTotalFlexibleSize=function(t,e){return t.totalFlexibleSize[this._getAxis(e)]},a._getChildSizes=function(t,e,i,n){var r,a,o;return i?(r=this._getMinSize(t.element,e),a=this._getPreferredSize(t.element,e),o=this._getFlexibleSize(t.element,e)):(a=r=t.size[this._getAxis(e)],o=0),n&&(o=Math.max(o,1)),{min:r,preferred:a,flexible:o}},a._getAlignmentOnAxis=function(t){return t==Qt.Horizontal?this.adapter.layoutManager.childAlignment%3*.5:.5*Math.floor(this.adapter.layoutManager.childAlignment/3)},a._getLayoutList=function(t){for(var e=[],i=0;i<t.length;i++){var n=t[i];n.element.ignoreLayout||e.push(n)}return e},a.internal_lateUpdate=function(t){if(this._isDirty){this._isDirty=!1;for(var e=[];this._layoutQueue.length>0;){var i=this._layoutQueue.shift();this._layoutHandler(i),e.push(i.index)}e.length>0&&this.emit(Ze.ON_LAYOUT_COMPLATED,e)}},u(r,[{key:"childAlignment",get:function(){return this._childAlignment},set:function(t){t!=this._childAlignment&&(this._childAlignment=t,this.emit(Ze.ON_CHANGED_LAYOUT_STATE))}},{key:"spacing",get:function(){return this._spacing},set:function(t){t!=this._spacing&&(this._spacing=t,this.emit(Ze.ON_CHANGED_LAYOUT_STATE))}},{key:"reverseArrangement",get:function(){return this._reverseArrangement},set:function(t){t!=this._reverseArrangement&&(this._reverseArrangement=t,this.emit(Ze.ON_CHANGED_LAYOUT_STATE))}},{key:"forceExpandWidth",get:function(){return this._forceExpandWidth},set:function(t){t!=this._forceExpandWidth&&(this._forceExpandWidth=t,this.emit(Ze.ON_CHANGED_LAYOUT_STATE))}},{key:"forceExpandHeight",get:function(){return this._forceExpandHeight},set:function(t){t!=this._forceExpandHeight&&(this._forceExpandHeight=t,this.emit(Ze.ON_CHANGED_LAYOUT_STATE))}},{key:"controlSizeWidth",get:function(){return this._controlSizeWidth},set:function(t){t!=this._controlSizeWidth&&(this._controlSizeWidth=t,this.emit(Ze.ON_CHANGED_LAYOUT_STATE))}},{key:"controlSizeHeight",get:function(){return this._controlSizeHeight},set:function(t){t!=this._controlSizeHeight&&(this._controlSizeHeight=t,this.emit(Ze.ON_CHANGED_LAYOUT_STATE))}},{key:"controlScaleWidth",get:function(){return this._controlScaleWidth},set:function(t){t!=this._controlScaleWidth&&(this._controlScaleWidth=t,this.emit(Ze.ON_CHANGED_LAYOUT_STATE))}},{key:"controlScaleHeight",get:function(){return this._controlScaleHeight},set:function(t){t!=this._controlScaleHeight&&(this._controlScaleHeight=t,this.emit(Ze.ON_CHANGED_LAYOUT_STATE))}},{key:"top",get:function(){return this.adapter.isVertical?0:this.adapter.viewManager.top}},{key:"bottom",get:function(){return this.adapter.isVertical?0:this.adapter.viewManager.bottom}},{key:"left",get:function(){return this.adapter.isHorizontal?0:this.adapter.viewManager.left}},{key:"right",get:function(){return this.adapter.isHorizontal?0:this.adapter.viewManager.right}},{key:"horizontal",get:function(){return this.left+this.right}},{key:"vertical",get:function(){return this.top+this.bottom}},{key:"isControlMainAxisSize",get:function(){return this.adapter.isHorizontal&&this.controlSizeWidth||this.adapter.isVertical&&this.controlSizeHeight}},{key:"isControlCrossAxisSize",get:function(){return this.adapter.isHorizontal&&this.controlSizeHeight||this.adapter.isVertical&&this.controlSizeWidth}},{key:"isControlCrossAxisScale",get:function(){return this.adapter.isHorizontal&&this.controlScaleHeight||this.adapter.isVertical&&this.controlScaleWidth}}]),r}(fe)).Event=Ze,He=t((Oe=Ue).prototype,"_childAlignment",[ye],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return ae.UpperLeft}}),t(Oe.prototype,"childAlignment",[xe],Object.getOwnPropertyDescriptor(Oe.prototype,"childAlignment"),Oe.prototype),Pe=t(Oe.prototype,"_spacing",[Ye],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),t(Oe.prototype,"spacing",[be],Object.getOwnPropertyDescriptor(Oe.prototype,"spacing"),Oe.prototype),Ne=t(Oe.prototype,"_reverseArrangement",[Ye],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),t(Oe.prototype,"reverseArrangement",[Se],Object.getOwnPropertyDescriptor(Oe.prototype,"reverseArrangement"),Oe.prototype),Ie=t(Oe.prototype,"delayLayout",[Ae],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Re=t(Oe.prototype,"_forceExpandWidth",[Ye],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),t(Oe.prototype,"forceExpandWidth",[Ee],Object.getOwnPropertyDescriptor(Oe.prototype,"forceExpandWidth"),Oe.prototype),De=t(Oe.prototype,"_forceExpandHeight",[Ye],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),t(Oe.prototype,"forceExpandHeight",[we],Object.getOwnPropertyDescriptor(Oe.prototype,"forceExpandHeight"),Oe.prototype),Fe=t(Oe.prototype,"_controlSizeWidth",[Ye],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),t(Oe.prototype,"controlSizeWidth",[Me],Object.getOwnPropertyDescriptor(Oe.prototype,"controlSizeWidth"),Oe.prototype),Ve=t(Oe.prototype,"_controlSizeHeight",[Ye],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),t(Oe.prototype,"controlSizeHeight",[Te],Object.getOwnPropertyDescriptor(Oe.prototype,"controlSizeHeight"),Oe.prototype),ke=t(Oe.prototype,"_controlScaleWidth",[Ye],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),t(Oe.prototype,"controlScaleWidth",[ze],Object.getOwnPropertyDescriptor(Oe.prototype,"controlScaleWidth"),Oe.prototype),Ge=t(Oe.prototype,"_controlScaleHeight",[Ye],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),t(Oe.prototype,"controlScaleHeight",[Le],Object.getOwnPropertyDescriptor(Oe.prototype,"controlScaleHeight"),Oe.prototype),Ce=Oe))||Ce);d._RF.pop(),d._RF.push({},"20c27Yt8z5L9bZJqa8MgjS3","View",void 0);var Xe,Je,Qe=p.ccclass,qe=(p.property,Qe("View")(We=function(){function t(t){this.__debug_graphics=void 0,this._adapter=void 0,this._total=0,this._innerSize=0,this._group=null,this._holderList=[],this._tempHolderList=[],this._isOverflowFixed=void 0,this._adapter=t,this.internal_reset(),this.__createDebug()}var e=t.prototype;return e.__createDebug=function(){},e.__drawDebug=function(){if(this.__debug_graphics&&this.group){this.__debug_graphics.clear();var t=this.adapter.mainAxis,e=this.adapter.crossAxis,i={x:0,y:0},n={x:this.group.size.x,y:this.group.size.y},r={x:this.group.anchorPoint.x,y:this.group.anchorPoint.y};i[t]=this.group.position[t]-n[t]*r[t],i[t]+=1.5,i[e]=this.group.position[e]-n[e]*(1-r[e]),i[e]+=1.5,n[t]-=3,n[e]-=3,this.__debug_graphics.roundRect(i.x,i.y,n.x,n.y,2),this.__debug_graphics.stroke()}},e.getFixedHolders=function(){if(!this.group.isFixed)return[];for(var t=[],e=this.holderList.length,i=0;i<e;i++){var n=this.holderList[i];n.model.element.fixed&&t.push(n)}return t},e.internal_isWrap=function(t,e){var i=!1,n=e&&e.models[e.models.length-1];if(n)switch(t.element.wrapBeforeMode){case ie.Wrap:i=!0;break;case ie.Nowrap:i=n.element.wrapAfterMode==ie.Wrap;break;case ie.Auto:(i=n.element.wrapAfterMode==ie.Wrap)||(i=this._calculateInnerSize(t,e))}return i},e.internal_reset=function(){this._group=null,this._innerSize=0,this._total=0,this._holderList.length=0,this._isOverflowFixed=!0,this._tempHolderList.length=0,this.__debug_graphics&&this.__debug_graphics.clear()},e.internal_push=function(t){this._total++;var e=this.adapter.crossAxis;(!t.element.ignoreLayout||t.element.ignoreLayout&&t.element.placeholder)&&(0!=this._innerSize&&(this._innerSize+=this.adapter.layoutManager.spacing),this._innerSize+=t.size[e])},e.internal_recycleHolders=function(t){for(var e=0;e<this._holderList.length;e++){var i=this._holderList[e];i.internal_disable(),t(i)}this._holderList.length=0},e.internal_preVisible=function(t,e){return this._group=t,this._createHolders(e),this},e.internal_visible=function(){this.register();for(var t=0;t<this._tempHolderList.length;t++){var e=this._tempHolderList[t],i=e.holder,n=e.model,r=e.isNew;i.internal_visible(this,n,r)}this._tempHolderList.length=0,this.adapter.layoutManager.layout(this.group),this.onVisible()},e.internal_disable=function(){this.adapter.layoutManager.unLayout(this.index),this.unregister(),this.onDisable(),this.internal_reset()},e.internal_holderChanged=function(t){var e=!0,i=this.adapter.mainAxis,n=this.group.size[i];if(!t){for(var r=0,a=0;a<this.group.models.length;a++){var o=this.group.models[a],s=o.size[i];(this.adapter.isVertical&&this.adapter.layoutManager.controlScaleHeight||this.adapter.isHorizontal&&this.adapter.layoutManager.controlScaleWidth)&&(s*=o.scale[i]),r=Math.max(r,s)}ve.approximately(this.group.size[i],r)||(this.group.oldSize[i]=this.group.size[i],this.group.size[i]=r,e=!1)}e?this.adapter.layoutManager.layout(this.group):this.adapter.viewManager.internal_viewChanged(this,n)},e.register=function(){this.adapter.viewManager.on(vn.Event.ON_SCROLL,this._onScroll,this),this.adapter.viewManager.on(vn.Event.ON_LATEUPDATE,this._onLateUpdate,this),this.adapter.layoutManager.on(Ke.Event.ON_LAYOUT_COMPLATED,this._onLayoutComplated,this),this.adapter.layoutManager.on(Ke.Event.ON_CHANGED_LAYOUT_STATE,this._onChangedLayoutState,this)},e.unregister=function(){this.adapter.viewManager.off(vn.Event.ON_SCROLL,this._onScroll,this),this.adapter.viewManager.off(vn.Event.ON_LATEUPDATE,this._onLateUpdate,this),this.adapter.layoutManager.off(Ke.Event.ON_LAYOUT_COMPLATED,this._onLayoutComplated,this),this.adapter.layoutManager.off(Ke.Event.ON_CHANGED_LAYOUT_STATE,this._onChangedLayoutState,this)},e._createHolders=function(t){var e=this.adapter.mainAxis;this._tempHolderList.length=0;for(var i=0;i<this.group.models.length;i++){var n=this.group.models[i],r=!1,a=t&&t(n);a||(a=this.adapter.viewManager.internal_getHolder(n),r=!0),n.position[e]=this.group.position[e],this._holderList.push(a),this._tempHolderList.push({holder:a,model:n,isNew:r})}},e._calculateInnerSize=function(t,e){if(0==this._total)return!1;var i=t.size[this.adapter.crossAxis];return this._innerSize+i+this.adapter.layoutManager.spacing>e.size[this.adapter.crossAxis]},e._onLayoutComplated=function(t){if(-1!=t.indexOf(this.index)){for(var e=0;e<this.holderList.length;e++){this.holderList[e].internal_layout()}this.group.isFixed&&this._calcFixedPosition()}},e._calcFixedPosition=function(){for(var t=this._holderList.length,e=this.adapter.mainAxis,i=0;i<t;i++){var n=this._holderList[i];if(n.element.fixed){var r={x:n.model.position.x,y:n.model.position.y},a=0,o=this._getModelBoundary(n.model);if(this._isNeedFixed(o)){r[e]-=o;var s=this.adapter.viewManager.getNextFixedHolders(this.index);a=this._getRelativeNextHolderOffset(n,s)}r[e]+=a*this.adapter.multiplier,r[e]!=n.node.position[e]&&n.node.setPosition(r.x,r.y)}}},e._onChangedLayoutState=function(){this.adapter.layoutManager.layout(this.group)},e._onScroll=function(){this.group.isFixed&&0!=this._holderList.length&&this._calcFixedPosition()},e._onLateUpdate=function(t){},e._isNeedFixed=function(t){return 1==this.adapter.multiplier?t>=0:t<=0},e._getModelBoundary=function(t){var e=ve.isNumber(t.element.fixedOffset)?t.element.fixedOffset:0;return 1==this.adapter.multiplier?this._getModelHeaderBoundary(t)+e:this._getModelFooterBoundary(t)-e},e._getModelHeaderBoundary=function(t){var e=this.adapter.mainAxis;return t.position[e]+t.size[e]*(1-t.anchorPoint[e])*t.scale[e]+this.adapter.scrollManager.contentPosition},e._getModelFooterBoundary=function(t){var e=this.adapter.mainAxis;return t.position[e]-t.size[e]*t.anchorPoint[e]*t.scale[e]+this.adapter.scrollManager.contentPosition},e._getModelSizeWithSpacing=function(t){var e=this.adapter.mainAxis,i=ve.isNumber(t.element.fixedOffset)?t.element.fixedOffset:0,n=ve.isNumber(t.element.fixedSpacing)?t.element.fixedSpacing:this.adapter.viewManager.spacing;return t.size[e]*t.scale[e]+i+n},e._getReatureRelativeBoundary=function(t,e){var i=1==this.adapter.multiplier?this._getModelHeaderBoundary(t):this._getModelFooterBoundary(t),n=1==this.adapter.multiplier?i+e:e-i;return Math.min(n,e)},e._getRelativeNextHolderOffset=function(t,e){for(var i=e.length,n=this.adapter.crossAxis,r=this._getModelSizeWithSpacing(t.model),a=0,o=0;o<i;o++){var s=e[o],l=this._getReatureRelativeBoundary(s.model,r),h=t.model.scale[n]==s.model.scale[n],c=t.model.size[n]==s.model.size[n];if(t.fixedIndex==s.fixedIndex&&h&&c){a=l>0?l:0;break}l>0&&(a=Math.max(a,l))}return a},u(t,[{key:"isOverflowFixed",get:function(){return this._isOverflowFixed}},{key:"adapter",get:function(){return this._adapter}},{key:"group",get:function(){return this._group}},{key:"holderList",get:function(){return this._holderList}},{key:"index",get:function(){return this.group?this.group.index:-1}}]),t}())||We);d._RF.pop(),d._RF.push({},"18c36plR9VHHbXIt40bKQ+w","ModelManager",void 0);var $e,ti,ei,ii,ni,ri,ai,oi,si,li,hi,ci,ui,di,pi,_i,gi,fi,vi,mi,yi,xi,bi,Si,Ai,Ei,wi,Mi,Ti,zi,Li,Ci,Oi,Hi,Pi,Ni=p.ccclass,Ii=(p.property,function(t){return t[t.ON_CLEAR=0]="ON_CLEAR",t[t.ON_INSERT=1]="ON_INSERT",t[t.ON_REMOVE=2]="ON_REMOVE",t[t.ON_MOVE=3]="ON_MOVE",t[t.ON_UPDATE=4]="ON_UPDATE",t[t.ON_CHANGE_BEFORE=5]="ON_CHANGE_BEFORE",t}(Ii||{})),Ri=Ni("ModelManager")(((Je=function(t){function i(){for(var e,i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];return(e=t.call.apply(t,[this].concat(n))||this)._modelList=[],e._length=0,e}e(i,t);var n=i.prototype;return n.onInit=function(){},n.insert=function(){var t=a(o().mark((function t(e,i){var n;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:void 0===i&&(i=this.length),n=this._toArray(e),i=ve.clamp(i,0,this.length),this.emit(Ii.ON_CHANGE_BEFORE),this._insertHandler(n,i),this._length=this._modelList.length,n.length>0&&this.emit(Ii.ON_INSERT,i);case 7:case"end":return t.stop()}}),t,this)})));return function(e,i){return t.apply(this,arguments)}}(),n._insertHandler=function(t,e){var i=this,n=e;this._length=this._modelList.length;for(var r=[],a=function(t,e){return(d=i._getNewModel(t)).index=e,i._modelList.push(d),d},o=function(t){var e=i.get(n);if(e)r.push(i._copyModel(e,{})),e.data=t,e.index=n,i._initModel(e);else{var o=a(t,n);i._initModel(o)}n++},s=0,l=t.length;s<l;s++)o(t[s]);for(var h=0;h<r.length;h++){var c=r[h],u=n+h;if(this.get(u)){var d=this.get(u);r.push(this._copyModel(d,{})),this._copyModel(c,d)}else{var p=a(c.data,u);this._copyModel(c,p)}}},n.remove=function(t,e){if(void 0===e&&(e=1),0!=e&&!(t<0||t>=this.length)){var i=this.length;this.emit(Ii.ON_CHANGE_BEFORE);for(var n=t;n<this.length;n++){var r=this.get(n),a=this.get(n+e);if(!a){i=n;break}this._copyModel(a,r),r.index=n}this._modelList.splice(i,this.length),this._length=this._modelList.length,this.emit(Ii.ON_REMOVE,t)}},n.move=function(t,e,i){var n=this;if(!(t<0||e<=0)){this.emit(Ii.ON_CHANGE_BEFORE);var r=this._modelList.map((function(t){return n._copyModel(t,{})})),a=r.splice(t,e);r.splice.apply(r,[i,0].concat(a));for(var o=0;o<r.length;o++)this._copyModel(r[o],this._modelList[o]);var s=Math.min(t,i);this.emit(Ii.ON_MOVE,s)}},n.update=function(){this.emit(Ii.ON_UPDATE)},n.clear=function(){this._modelList.length=0,this._length=0,this.emit(Ii.ON_CLEAR)},n.has=function(t){return!!this._modelList[t]},n.get=function(t){return isNaN(t)?null:this._modelList[t]},n.slice=function(t,e){return 0==this.length?[]:this._modelList.slice(t,e)},n._toArray=function(t){return t?t instanceof Array?t:[t]:[]},n._getNewModel=function(t){return{data:t,index:-1,code:null,size:{x:0,y:0},layoutSize:{x:0,y:0},scale:{x:0,y:0},position:{x:0,y:0},anchorPoint:{x:0,y:0},element:{wrapBeforeMode:ie.Wrap,wrapAfterMode:ie.Nowrap,ignoreLayout:!1,placeholder:!1,minSize:{x:0,y:0},preferredSize:{x:0,y:0},flexibleSize:{x:0,y:0},layer:ee.Lowest,fixed:!1,fixedOffset:0,fixedSpacing:null,update:function(){}},isValid:!0,update:function(){}}},n._initModel=function(t){var e,i=this.adapter.getPrefab(t.data);if(!i)throw Error("预制体不能为空");i instanceof _?(e=i.getComponent(v),t.code=i.uuid):(e=i.data.getComponent(v),t.code=i.data._uuid),t.size={x:e.width,y:e.height},t.scale={x:e.node.scale.x,y:e.node.scale.y},t.anchorPoint={x:e.anchorPoint.x,y:e.anchorPoint.y},t.layoutSize={x:0,y:0},t.position={x:0,y:0},t.element={wrapBeforeMode:ie.Wrap,wrapAfterMode:ie.Nowrap,ignoreLayout:!1,placeholder:!1,minSize:{x:0,y:0},preferredSize:{x:0,y:0},flexibleSize:{x:0,y:0},layer:ee.Lowest,fixed:!1,fixedOffset:0,fixedSpacing:null,update:function(){}},this.adapter.initElement(t.element,t.data)},n._copyModel=function(t,e){t.element.update=function(){};return function t(e,i){for(var n in e){var r=e[n];"data"!=n?"index"!=n&&(null!=r&&"object"==typeof r?(i[n]={},t(r,i[n])):i[n]=r):i[n]=r}}(t,e),e},u(i,[{key:"length",get:function(){return this._length}},{key:"modelList",get:function(){return this._modelList}}]),i}(fe)).Event=Ii,Xe=Je))||Xe;d._RF.pop(),d._RF.push({},"74bbbWBWzpGspxEpsEO9xIS","ViewManager",void 0);var Di,Fi,Vi,ki,Gi,Ui,Bi,Wi,ji,Yi,Zi,Ki,Xi,Ji,Qi,qi,$i,tn,en,nn,rn,an,on,sn,ln,hn,cn,un,dn,pn,_n=p.ccclass,gn=p.property,fn=function(t){return t[t.ON_SCROLL=0]="ON_SCROLL",t[t.ON_LATEUPDATE=1]="ON_LATEUPDATE",t[t.ON_CLEARVIEWS=2]="ON_CLEARVIEWS",t[t.ON_UPDATE_VIEWS=3]="ON_UPDATE_VIEWS",t[t.ON_CHANGED_VIRTUALSIZE=4]="ON_CHANGED_VIRTUALSIZE",t[t.ON_MAGNETIC=5]="ON_MAGNETIC",t[t.ON_CHANGED_OVERFLOWHEADER=6]="ON_CHANGED_OVERFLOWHEADER",t[t.ON_RESET_ALL_STATE=7]="ON_RESET_ALL_STATE",t[t.ON_CHANGED_SPACING=8]="ON_CHANGED_SPACING",t}(fn||{}),vn=($e=_n("ViewManager"),ti=gn({type:$t}),ei=gn({type:$t,tooltip:"主轴方向的排列方式\n        Start: 从上到下、从左到右\n        End: 从下到上、从右到左"}),ii=gn({type:te,tooltip:"当元素的尺寸、缩放改变时，受影响的其他元素应该如何计算新的位置\n        Auto: 以可视区域中心为起点，所有其他元素向两边延伸\n        Center: 以当前变化的元素为起点，所有其他元素向两边延伸\n        Header: 以当前变化的元素和它头部的所有元素向头部延伸\n        Footer: 以当前变化的元素和它尾部的所有元素向尾部延伸"}),ni=gn({range:[0,1],slide:!0,step:.01,tooltip:"当元素移动到可视区域外偏移多少时才进行回收\n        比如元素的尺寸为100，当元素超出可视范围 100+100*0.3 时就会被回收\n        没有特殊需求时，默认值即可"}),ri=gn({range:[0,1],slide:!0,step:.01,tooltip:"此值会影响填充元素的时机\n        没有特殊需求时，默认值即可"}),ai=gn({tooltip:"主轴方向元素的间隙"}),oi=gn({group:{id:"padding",name:"padding"}}),si=gn({group:{id:"padding",name:"padding"}}),li=gn({group:{id:"padding",name:"padding"}}),hi=gn({group:{id:"padding",name:"padding"}}),ci=gn({tooltip:"磁性停靠\n        开启后，会在增加数据时，根据设置进行自动滚动到顶部或底部"}),ui=gn({type:re,visible:function(){return this.magnetic},tooltip:"停靠的方向"}),di=gn({visible:function(){return this.magnetic},tooltip:"停靠动画的时长"}),pi=gn({visible:function(){return this.magnetic},tooltip:"默认情况下，仅当添加数据时才会触发停靠\n        当开启时，元素的尺寸改变时,也会否触发停靠"}),_i=gn({tooltip:"头部循环"}),gi=gn({tooltip:"尾部循环"}),$e(((Pi=function(t){function r(){for(var e,r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a))||this,i(e,"_arrangeAxis",mi,n(e)),i(e,"stretchDirection",yi,n(e)),i(e,"overflowOffset",xi,n(e)),i(e,"enterOffset",bi,n(e)),i(e,"_spacing",Si,n(e)),i(e,"left",Ai,n(e)),i(e,"right",Ei,n(e)),i(e,"top",wi,n(e)),i(e,"bottom",Mi,n(e)),i(e,"magnetic",Ti,n(e)),i(e,"magneticDirection",zi,n(e)),i(e,"magneticDuration",Li,n(e)),i(e,"magneticSizeChanges",Ci,n(e)),i(e,"loopHeader",Oi,n(e)),i(e,"loopFooter",Hi,n(e)),e._groupLength=0,e._cacheGroups=[],e._groups=[],e._disableViews=[],e._visibleViews=[],e._fixedViews=[],e._disableHolders=[],e._isFill=!1,e._headerIndex=-1,e._footerIndex=-1,e._virtualSize=0,e._overflowHeader=0,e._cacheHeadeDatas=[],e._cacheHeadePosition=void 0,e}e(r,t);var a=r.prototype;return a.onInit=function(){this.adapter.modelManager.on(Ri.Event.ON_CHANGE_BEFORE,this._onModelChangeBefore,this),this.adapter.modelManager.on(Ri.Event.ON_INSERT,this._updateGroups,this),this.adapter.modelManager.on(Ri.Event.ON_REMOVE,this._updateGroups,this),this.adapter.modelManager.on(Ri.Event.ON_MOVE,this._updateGroups,this),this.adapter.modelManager.on(Ri.Event.ON_CLEAR,this._onClearModel,this),this.adapter.scrollManager.on(Hn.Event.ON_SCROLL,this._onScroll,this),this.adapter.scrollManager.on(Hn.Event.ON_VIEW_SIZE_CHANGED,this._resetAllState,this),this.adapter.scrollManager.on(Hn.Event.ON_CHANGED_ORIENTATION,this._resetAllState,this)},a._clearAll=function(){for(var t,e=0,i=this._visibleViews.length;e<i;e++)this._recycleViewToDisableViews(this._visibleViews[e]);(t=this._cacheGroups).push.apply(t,this._groups),this._clearFixedViews(),this._visibleViews.length=0,this._groups.length=0,this.virtualSize=0,this.overflowHeader=0},a._onClearModel=function(){this._clearAll(),this.emit(fn.ON_CLEARVIEWS)},a._resetAllState=function(){this._clearAll(),this.internal_updateVisibleView(0),this.emit(fn.ON_RESET_ALL_STATE)},a._onModelChangeBefore=function(){if(this.header&&this.virtualSize>this.adapter.mainAxisSize){var t=this.getVisibleIndexByGroupIndex(0);if(-1!=t){var e=this._visibleViews[t];this._cacheHeadeDatas=e.group.models.map((function(t){return t.data})),this._cacheHeadePosition={x:e.group.position.x,y:e.group.position.y}}else this._cacheHeadeDatas=this.header.group.models.map((function(t){return t.data})),this._cacheHeadePosition={x:this.header.group.position.x,y:this.header.group.position.y}}},a._updateGroups=function(t){var e,i=this,n=this._getViewFromDisibleViews(null),r=this.getGroupIndexByModelIndex(t);-1==r&&(r=this._groupLength-1);var a=null,o=!1,s={modelIndex:t,fixedIndex:-1},l=this._groups[r-1];for(l&&(s.fixedIndex=l.fixedIndex);;){(a=this._groups[r])||((a=this._getGroupFromCache()).internal_setIndex(this._groups.length),this._groups.push(a),r=this._groups.length);var h=a.internal_insert(s,n,o);if(r++,o=!0,!h)break}var c=this._groups.splice(r,this._groups.length);(e=this._cacheGroups).push.apply(e,c),this._groupLength=this._groups.length;var u=-1,d=0;this._cacheHeadeDatas.length>0&&(u=this._groups.findIndex((function(t){return t.internal_includes(i._cacheHeadeDatas)})));var p=this._groups[u];p&&(d+=p.size[this.adapter.mainAxis]+this.spacing,p.internal_setPosition(this._cacheHeadePosition[this.adapter.mainAxis]));for(var _=u-1;_>=0;_--){var g=this._groups[_];this._calcMainAxisPosition(g,p,re.Header),d+=g.size[this.adapter.mainAxis]+this.spacing,p=g}p=this._groups[u];for(var f=u+1;f<this.groupLength;f++){g=this._groups[f];this._calcMainAxisPosition(g,p,re.Footer),d+=g.size[this.adapter.mainAxis]+this.spacing,p=g}d-=this.spacing,this._virtualSize=Math.max(0,d),this._resetOverflowHeader(this._groups[0]),n.internal_reset(),this._disableViews.push(n),this.updateVisibles(u),this._cacheHeadeDatas=[],this._cacheHeadePosition=null},a.updateVisibles=function(t){var e=[];t=Math.max(0,t);for(var i=function(t){var i=e.findIndex((function(e){return e.oldData==t.data}));return-1!=i?e.splice(i,1)[0]:null},n=0;n<this._visibleViews.length;n++){var r=this._visibleViews[n];e=e.concat(r.holderList),r.internal_reset()}for(var a=this.adapter.mainAxisSize,o=0,s=this.visibleLength,l=t,h=this._groups.length;l<h;l++){var c=this._groups[l];if(this.getVisibleMainAxisSize()>=a&&s<=0)break;(d=this._visibleViews[o++])||(d=this._getViewFromDisibleViews(c.index),this._visibleViews.push(d)),d.internal_preVisible(c,i),s--}for(var u=this._visibleViews.length-1;u>=0;u--){var d;if((d=this._visibleViews[u]).holderList.length>0)break;this._disableFromVisibleViews(u)}for(var p=0,_=e.length;p<_;p++){var g=e[p];g.internal_disable(),this._disableHolders.push(g)}for(var f=0;f<this.visibleLength;f++)this._visibleViews[f].internal_visible();this._forceFill(),this._calcMagnetic(),this.emit(fn.ON_UPDATE_VIEWS)},a._getGroupFromCache=function(){var t=this._cacheGroups.pop();return t||(t=new Be(this.adapter)),t.internal_reset(),t},a._calcMagnetic=function(){if(this.magnetic&&this.header){var t=!1;0==this.adapter.scrollManager.velocity&&(this.magneticDirection==re.Footer?this.footer.index==this._groupLength-1&&(this.adapter.scrollManager.scrollToFooter(this.magneticDuration),t=!0):0==this.header.index&&(this.adapter.scrollManager.scrollToHeader(this.magneticDuration),t=!0)),this.emit(fn.ON_MAGNETIC,t)}},a._calcMainAxisPosition=function(t,e,i){if(t)if(e){var n,r,a=this.adapter.mainAxis,o=this.adapter.multiplier,s=i==re.Footer?1:-1;i==re.Footer?(n=1==o?e.anchorPoint[a]:1-e.anchorPoint[a],r=1==o?1-t.anchorPoint[a]:t.anchorPoint[a]):(n=1==o?1-e.anchorPoint[a]:e.anchorPoint[a],r=1==o?t.anchorPoint[a]:1-t.anchorPoint[a]);var l=e.position[a];l-=e.size[a]*n*s*o,l-=this.spacing*o*s,l-=t.size[a]*r*s*o,t.internal_setPosition(l)}else t.internal_setPosition(this._getMainAxisHeaderPosition(t))},a._getMainAxisHeaderPosition=function(t){var e=0,i=0;return this.adapter.isVertical?(e=this.adapter.isArrangeAxisStart?-this.top:this.bottom,i=this.adapter.isArrangeAxisStart?1-t.anchorPoint[this.adapter.mainAxis]:t.anchorPoint[this.adapter.mainAxis]):(e=this.adapter.isArrangeAxisStart?this.left:-this.right,i=this.adapter.isArrangeAxisStart?t.anchorPoint[this.adapter.mainAxis]:1-t.anchorPoint[this.adapter.mainAxis]),e-=i*t.size[this.adapter.mainAxis]*this.adapter.multiplier},a._getViewFromDisibleViews=function(t){var e=null;if(null!=t){var i=this._fixedViews.findIndex((function(e){return e.index==t}));if(-1!=i){var n=this._fixedViews.splice(i,1)[0];this._recycleViewToDisableViews(n)}}return e||(e=this._disableViews.pop()),e||(e=this.adapter.getView()),e},a._getHolderFromDisableHolders=function(t){var e=this._disableHolders.findIndex((function(e){return e.code==t.code}));if(-1!=e)return this._disableHolders.splice(e,1)[0]},a._disableFromVisibleViews=function(t){var e=-1;e=t instanceof qe?this._visibleViews.findIndex((function(e){return e.index==t.index})):t,this._recycleViewToDisableViews(this._visibleViews[e]),this._visibleViews.splice(e,1)},a._recycleViewToDisableViews=function(t){var e=this;t&&(t.internal_recycleHolders((function(t){return e._disableHolders.push(t)})),t.internal_disable(),this._disableViews.push(t))},a._clearFixedViews=function(){for(var t=0,e=this._fixedViews.length;t<e;t++){var i=this._fixedViews[t];this._recycleViewToDisableViews(i)}this._fixedViews.length=0},a._checkHeaderInvisible=function(){this.header&&(this.loopFooter||this.footer.index!=this.groupLength-1)&&this._isOverflowHeader(this.header.group)&&(this._disableFromVisibleViews(0),this._checkHeaderInvisible())},a._checkFooterInvisible=function(){this.footer&&(this.loopHeader||0!=this.header.index)&&this._isOverflowFooter(this.footer.group)&&(this._disableFromVisibleViews(this._visibleViews.length-1),this._checkFooterInvisible())},a._isOverflowHeader=function(t,e){void 0===e&&(e=this.overflowOffset);var i=this.internal_getGroupFooterBoundary(t);return e*=t.size[this.adapter.mainAxis],1==this.adapter.multiplier?i>=e:i<=-e},a._isOverflowFooter=function(t,e){void 0===e&&(e=this.overflowOffset);var i=this.internal_getGroupHeaderBoundary(t);return e*=t.size[this.adapter.mainAxis],1==this.adapter.multiplier?i+this.adapter.mainAxisSize<=-e:i-this.adapter.mainAxisSize>=e},a._isEnterFooter=function(t){if(!t)return!1;var e=this.internal_getGroupFooterBoundary(t),i=this.enterOffset*t.size[this.adapter.mainAxis];return 1==this.adapter.multiplier?e+this.adapter.mainAxisSize+i>=0:e-this.adapter.mainAxisSize-i<=0},a._isEnterHeader=function(t){if(!t)return!1;var e=this.internal_getGroupHeaderBoundary(t),i=this.overflowOffset*t.size[this.adapter.mainAxis];return 1==this.adapter.multiplier?e-i<=0:e+i>=0},a._fillHeader=function(){var t=this._groups[this._headerIndex];if(this._isEnterHeader(t)){var e=this._accumTargetSizeTowardsHeader(t.index,this.internal_getInitHeaderSize(t)),i=e.index,n=e.size,r=this._groups[i];if(r&&-1==this.getVisibleIndexByGroupIndex(i)){var a=this.internal_convertSizeToHeaderPosition(n,r);r.internal_setPosition(a);var o=this._getViewFromDisibleViews(r.index);this._visibleViews.unshift(o),o.internal_preVisible(r).internal_visible(),0==o.index&&this._resetOverflowHeader(o.group),this._headerIndex=r.index,this._fillHeader()}}},a._fillFooter=function(){var t=this._groups[this._footerIndex];if(this._isEnterFooter(t)){var e=this._accumTargetSizeTowardsFooter(t.index,this.internal_getInitFooterSize(t)),i=e.index,n=e.size,r=this._groups[i];if(r&&-1==this.getVisibleIndexByGroupIndex(i)){var a=this.internal_convertSizeToFooterPosition(n,r);r.internal_setPosition(a);var o=this._getViewFromDisibleViews(r.index);this._visibleViews.push(o),o.internal_preVisible(r).internal_visible(),0==o.index&&this._resetOverflowHeader(o.group),this._footerIndex=r.index,this._fillFooter()}}},a._fillFixedView=function(){if(this.header&&(-1!=this.header.group.fixedIndex||this.header.group.isFixed))for(var t=this.header.index,e=this.adapter.mainAxis,i=this.internal_getInitHeaderSize(this.header.group),n=t-1;n>=0;n--){var r=this._groups[n];if(!r)return void console.error("_fillFixedView错误 找不到group",n);if(i+=r.size[e]+this.spacing,r.isFixed){var a=this.internal_convertSizeToHeaderPosition(i,r);if(-1!=this._fixedViews.findIndex((function(t){return t.index==r.index}))){ve.approximately(a,r.position[e])||(r.internal_setPosition(a),this.adapter.layoutManager.layout(r));break}this._clearFixedViews();a=this.internal_convertSizeToHeaderPosition(i,r);r.internal_setPosition(a);var o=this._getViewFromDisibleViews(r.index);o.internal_preVisible(r).internal_visible(),this._fixedViews.push(o);break}}},a._accumTargetSizeTowardsHeader=function(t,e){for(var i=this._groups.length;;){if(0==t&&this.loopHeader&&(t=i),0==t)return{index:t,size:e};if(t--,!this._groups[t])return{index:t,size:e};if((e+=this.internal_accumulationSize(t))>=0)return{index:t,size:e}}},a._accumTargetSizeTowardsFooter=function(t,e){for(var i=this._groups.length;;){if(t==i-1&&this.loopFooter&&(t=-1),t==i-1)return{index:t,size:e};if(t++,!this._groups[t])return{index:t,size:e};if((e+=this.internal_accumulationSize(t))>=0)return{index:t,size:e}}},a._fillFooterHandle=function(){this._checkHeaderInvisible(),this._fillFooter()},a._fillHeaderHandle=function(){this._checkFooterInvisible(),this._fillHeader()},a._forceFill=function(){this._updateHeaderFooterIndex(),this._fillHeaderHandle(),this._fillFooterHandle()},a._updateHeaderFooterIndex=function(){this._headerIndex=this.header?this.header.index:0,this._footerIndex=this.footer?this.footer.index:0},a._onScroll=function(t){if(0!=this._groups.length){switch(this._updateHeaderFooterIndex(),t){case oe.Up:case oe.Left:this.adapter.isArrangeAxisStart?this._fillFooterHandle():this._fillHeaderHandle();break;case oe.Down:case oe.Right:this.adapter.isArrangeAxisStart?this._fillHeaderHandle():this._fillFooterHandle()}this._fillFixedView(),this.emit(fn.ON_SCROLL)}},a._stretchToHeader=function(t,e){for(var i=this._visibleViews[t],n=e;n>=0;n--){var r=this._visibleViews[n];i?(this._calcMainAxisPosition(r.group,i.group,re.Header),this.adapter.layoutManager.layout(r.group)):this.getVisibleMainAxisSize()<this.adapter.mainAxisSize&&this._calcMainAxisPosition(r.group,null,re.Header),i=r}},a._stretchToFooter=function(t,e){for(var i=this._visibleViews[t],n=e;n<this._visibleViews.length;n++){var r=this._visibleViews[n];i?(this._calcMainAxisPosition(r.group,i.group,re.Footer),this.adapter.layoutManager.layout(r.group)):this.getVisibleMainAxisSize()<this.adapter.mainAxisSize&&this._calcMainAxisPosition(r.group,null,re.Footer),i=r}},a._resetOverflowHeader=function(t){if(!t)return this.overflowHeader=0;var e=this.adapter.mainAxis,i=t.anchorPoint[e];i=1==this.adapter.multiplier?1-i:i;var n=t.position[e];n+=t.size[e]*i*this.adapter.multiplier,this.overflowHeader=n},a._calcOverflowHeader=function(t,e,i){var n=this.getVisibleIndexByGroupIndex(0);if(-1!=n){var r=this._visibleViews[n];return this._resetOverflowHeader(r.group)}var a=this.adapter.mainAxis,o=t.anchorPoint[a];o=1==this.adapter.multiplier?1-o:o;var s=t.oldSize[a],l=t.size[a],h=this.adapter.multiplier;switch(this.stretchDirection){case te.Header:var c=t.oldPosition[a]+s*o*h;(u=1==h?this.overflowHeader>=c:this.overflowHeader<=c)&&(this.overflowHeader+=(l-s)*h);break;case te.Footer:c=t.oldPosition[a]+s*o*h;(u=1==h?this.overflowHeader>=c:this.overflowHeader<=c)||(this.overflowHeader-=(l-s)*h);break;case te.Center:c=t.oldPosition[a]+s*o*h;(u=1==h?this.overflowHeader>=c:this.overflowHeader<=c)?this.overflowHeader+=.5*(l-s)*h:this.overflowHeader-=.5*(l-s)*h;break;case te.Auto:c=t.oldPosition[a]+s*o*h;var u=1==h?this.overflowHeader>=c:this.overflowHeader<=c;e<=i&&(c=t.oldPosition[a]+s*o*h,u=-1==h?this.overflowHeader>=c:this.overflowHeader<=c),u&&(e<=i?this.overflowHeader-=(l-s)*h:this.overflowHeader+=(l-s)*h)}},a.internal_lateUpdate=function(t){this._isFill&&(this._isFill=!1,this._forceFill()),this.emit(fn.ON_LATEUPDATE,t)},a.internal_viewChanged=function(t,e){var i=t.group.size[this.adapter.mainAxis]-e;this.virtualSize+=i;var n=this.getVisibleIndexByGroupIndex(t.index),r=-1;if(this.stretchDirection==te.Footer){var a=n-1;this._visibleViews[a]||this.adapter.layoutManager.layout(t.group),this._stretchToFooter(a,n)}else if(this.stretchDirection==te.Header){var o=n+1;this._visibleViews[o]||this.adapter.layoutManager.layout(t.group),this._stretchToHeader(o,n)}else if(this.stretchDirection==te.Center)this.adapter.layoutManager.layout(t.group),this._stretchToHeader(n,n-1),this._stretchToFooter(n,n+1);else{if(-1==(r=this.adapter.centerManager.getCenterVisibleIndex()))throw Error("找不到中心索引"+t.index);var s=this._visibleViews[r];this.adapter.layoutManager.layout(s.group),this._stretchToHeader(r,r-1),this._stretchToFooter(r,r+1)}this._calcOverflowHeader(t.group,r,n),this.magneticSizeChanges&&this._calcMagnetic(),this._isFill=!0,this.emit(fn.ON_CHANGED_VIRTUALSIZE)},a.internal_getHolder=function(t){var e=this._getHolderFromDisableHolders(t);if(!e){var i=this.adapter.getPrefab(t.data),n=m(i);e=this.adapter.getHolder(n,t.code)}return e.node.parent=this.adapter.scrollManager.getLayerNode(t.element.layer),e},a.internal_updateVisibleView=function(t){this._onModelChangeBefore(),this._updateGroups(t)},a.internal_getGroupFooterBoundary=function(t){if(!t)return 0;var e=t.anchorPoint[this.adapter.mainAxis];e=1==this.adapter.multiplier?e:1-e;var i=t.position[this.adapter.mainAxis];return i-=t.size[this.adapter.mainAxis]*e*this.adapter.multiplier,i+=this.adapter.scrollManager.contentPosition},a.internal_getGroupHeaderBoundary=function(t){if(!t)return 0;var e=t.anchorPoint[this.adapter.mainAxis];return e=1==this.adapter.multiplier?1-e:e,t.position[this.adapter.mainAxis]+this.adapter.scrollManager.contentPosition+e*t.size[this.adapter.mainAxis]*this.adapter.multiplier},a.internal_getInitHeaderSize=function(t){if(!t)return 0;var e=t.anchorPoint[this.adapter.mainAxis];e=1==this.adapter.multiplier?1-e:e;var i=-t.position[this.adapter.mainAxis]*this.adapter.multiplier;return i-=t.size[this.adapter.mainAxis]*e,i-=this.adapter.scrollManager.contentPosition*this.adapter.multiplier,i=this.adapter.mainAxisSize-i},a.internal_getInitFooterSize=function(t){if(!t)return 0;var e=t.anchorPoint[this.adapter.mainAxis];e=1==this.adapter.multiplier?e:1-e;var i=-t.position[this.adapter.mainAxis]*this.adapter.multiplier;return i+=t.size[this.adapter.mainAxis]*e,i-=this.adapter.scrollManager.contentPosition*this.adapter.multiplier},a.internal_accumulationSize=function(t){var e=this._groups[t];return e?e.size[this.adapter.mainAxis]+this.spacing:0},a.internal_convertSizeToFooterPosition=function(t,e){var i=e.anchorPoint[this.adapter.mainAxis];i=1==this.adapter.multiplier?i:1-i;var n=e.size[this.adapter.mainAxis]*i,r=-this.adapter.scrollManager.contentPosition;return r-=this.adapter.multiplier*t-this.adapter.multiplier*n},a.internal_convertSizeToHeaderPosition=function(t,e){var i=e.anchorPoint[this.adapter.mainAxis];i=1==this.adapter.multiplier?1-i:i;var n=e.size[this.adapter.mainAxis]*i,r=this.adapter.multiplier*t-this.adapter.multiplier*n;return r-=this.adapter.multiplier*this.adapter.mainAxisSize,r-=this.adapter.scrollManager.contentPosition},a.getGroup=function(t){return this._groups[t]},a.getVisibleView=function(t){return this._visibleViews[t]},a.getVisibleMainAxisSize=function(){if(0==this._visibleViews.length)return 0;for(var t=0,e=this.adapter.mainAxis,i=0,n=this._visibleViews.length;i<n;i++){var r=this._visibleViews[i];r.group&&(t+=r.group.size[e]+this.spacing)}return t-=this.spacing},a.getGroupIndexByModelIndex=function(t){for(var e=0,i=this._groups.length;e<i;e++){if(-1!=this._groups[e].findModelIndex(t))return e}return-1},a.getVisibleIndexByGroupIndex=function(t){return this._visibleViews.findIndex((function(e){return e.index==t}))},a.getNextFixedHolders=function(t){for(var e=[],i=this.getVisibleIndexByGroupIndex(t)+1,n=this._visibleViews.length;i<n;i++){var r=this._visibleViews[i];if(r.index!=t&&r.group.isFixed){e=r.getFixedHolders();break}}return e},a.getMagneticOffset=function(){if(!this.magnetic)return 0;var t=this.adapter.isHorizontal?-this.adapter.multiplier:this.adapter.multiplier;return this.magneticDirection==re.Footer?this.footer?Math.max(0,this.adapter.mainAxisSize-this.adapter.mainAxisPadding-this.getVisibleMainAxisSize())*t:this.adapter.mainAxisSize*t:0},u(r,[{key:"arrangeAxis",get:function(){return this._arrangeAxis},set:function(t){t!=this._arrangeAxis&&(this._arrangeAxis=t,this._resetAllState())}},{key:"spacing",get:function(){return this._spacing},set:function(t){t!=this._spacing&&(this._spacing=t,this._resetAllState())}},{key:"header",get:function(){return this._visibleViews[0]}},{key:"footer",get:function(){return this._visibleViews[this._visibleViews.length-1]}},{key:"overflowHeader",get:function(){return this._overflowHeader},set:function(t){t!=this._overflowHeader&&(this._overflowHeader=t,this.emit(fn.ON_CHANGED_OVERFLOWHEADER,t))}},{key:"virtualSize",get:function(){return this._virtualSize},set:function(t){t!=this._virtualSize&&(this._virtualSize=t,this.emit(fn.ON_CHANGED_VIRTUALSIZE))}},{key:"groupLength",get:function(){return this._groupLength}},{key:"visibleLength",get:function(){return this._visibleViews.length}},{key:"min",get:function(){return this.header?this.adapter.isArrangeAxisStart?this.internal_getGroupFooterBoundary(this.footer.group):this.internal_getGroupHeaderBoundary(this.header.group):0}},{key:"max",get:function(){return this.header?this.adapter.isArrangeAxisStart?this.internal_getGroupHeaderBoundary(this.header.group):this.internal_getGroupFooterBoundary(this.footer.group):0}}]),r}(fe)).Event=fn,mi=t((vi=Pi).prototype,"_arrangeAxis",[ti],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return $t.Start}}),t(vi.prototype,"arrangeAxis",[ei],Object.getOwnPropertyDescriptor(vi.prototype,"arrangeAxis"),vi.prototype),yi=t(vi.prototype,"stretchDirection",[ii],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return te.Auto}}),xi=t(vi.prototype,"overflowOffset",[ni],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.3}}),bi=t(vi.prototype,"enterOffset",[ri],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Si=t(vi.prototype,"_spacing",[gn],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),t(vi.prototype,"spacing",[ai],Object.getOwnPropertyDescriptor(vi.prototype,"spacing"),vi.prototype),Ai=t(vi.prototype,"left",[oi],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Ei=t(vi.prototype,"right",[si],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),wi=t(vi.prototype,"top",[li],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Mi=t(vi.prototype,"bottom",[hi],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Ti=t(vi.prototype,"magnetic",[ci],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),zi=t(vi.prototype,"magneticDirection",[ui],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return re.Header}}),Li=t(vi.prototype,"magneticDuration",[di],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),Ci=t(vi.prototype,"magneticSizeChanges",[pi],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Oi=t(vi.prototype,"loopHeader",[_i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Hi=t(vi.prototype,"loopFooter",[gi],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),fi=vi))||fi);d._RF.pop(),d._RF.push({},"6000cNyEYlC4aj/Efw70/yK","ScrollManager",void 0);var mn,yn,xn,bn,Sn,An,En,wn,Mn,Tn=p.ccclass,zn=p.property,Ln=new N,Cn="__ADAPTER__",On=function(t){return t[t.ON_SCROLL=0]="ON_SCROLL",t[t.ON_DRAGGING=1]="ON_DRAGGING",t[t.ON_UPDATE_PERCENTAGE=2]="ON_UPDATE_PERCENTAGE",t[t.ON_VIEW_SIZE_CHANGED=3]="ON_VIEW_SIZE_CHANGED",t[t.ON_ABOUT_TO_STOP=4]="ON_ABOUT_TO_STOP",t[t.ON_SCROLL_START=5]="ON_SCROLL_START",t[t.ON_SCROLL_END=6]="ON_SCROLL_END",t[t.ON_SCROLL_CANCEL=7]="ON_SCROLL_CANCEL",t[t.ON_CHANGED_ORIENTATION=8]="ON_CHANGED_ORIENTATION",t[t.ON_SCROLL_TO_GROUPINDEX_BEFOR=9]="ON_SCROLL_TO_GROUPINDEX_BEFOR",t[t.ON_SCROLL_TO_GROUPINDEX_AFTER=10]="ON_SCROLL_TO_GROUPINDEX_AFTER",t[t.ON_SCROLL_TO_MODELINDEX_BEFOR=11]="ON_SCROLL_TO_MODELINDEX_BEFOR",t[t.ON_SCROLL_TO_MODELINDEX_AFTER=12]="ON_SCROLL_TO_MODELINDEX_AFTER",t}(On||{}),Hn=(Di=Tn("ScrollManager"),Fi=zn(v),Vi=zn(v),ki=zn(v),Gi=zn(v),Ui=zn({type:Qt}),Bi=zn({type:Qt}),Wi=zn({type:ne,tooltip:"Auto: 当内容撑满可视区域或开启ReleaseManager时允许拖动\n        AlwaysAllow: 任何情况下都可以拖动，即使没有任何元素\n        Disabled: 任何情况下都禁用拖动\n        "}),ji=zn({type:qt}),Yi=zn({range:[0,1],slide:!0,step:.001,visible:function(){return this.movementType==qt.Elastic}}),Zi=zn({range:[0,1],slide:!0,step:.001,visible:function(){return this.inertia}}),Ki=zn({tooltip:"当滚动速度小于这个值时，会发送ON_ABOUT_TO_STOP广播"}),Xi=zn({tooltip:"取消子节点的Button点击事件"}),Ji=zn({range:[0,.5],slide:!0,step:.001,visible:function(){return this.inertia},tooltip:"嵌套时，当子元素的ScrollView拖动方向和当前拖动方向相同时，使用当前阈值进行计算由谁来处理拖动\n        无特殊需求时，默认值即可"}),Qi=zn({range:[.5,1],slide:!0,step:.001,visible:function(){return this.inertia},tooltip:"嵌套时，当子元素的ScrollView拖动方向和当前拖动方向相同时，使用当前阈值进行计算由谁来处理拖动\n        无特殊需求时，默认值即可"}),Di(((pn=function(t){function r(){for(var e,r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a))||this,i(e,"_view",tn,n(e)),i(e,"_content",en,n(e)),i(e,"_orientation",nn,n(e)),i(e,"touchMode",rn,n(e)),i(e,"movementType",an,n(e)),i(e,"elasticity",on,n(e)),i(e,"inertia",sn,n(e)),i(e,"decelerationRate",ln,n(e)),i(e,"aboutToStopVelocity",hn,n(e)),i(e,"cancelInnerEvents",cn,n(e)),i(e,"nestedMinThreshold",un,n(e)),i(e,"nestedMaxThreshold",dn,n(e)),e.__debug_graphics=void 0,e._boundaryOffset=0,e._viewWidget=null,e._parentAdapter=void 0,e._layerLowest=void 0,e._layerMedium=void 0,e._layerHighest=void 0,e._percentage=0,e._velocity=0,e._dragging=!1,e._scrolling=!1,e._isCanceledEvent=!1,e._contentStartPosition=new N,e._prevContentPosition=new N,e._nestedDirection=le.Both,e._parentTouch=!1,e._stopCheckNested=!1,e._scrollHandlePercentage=null,e._scrollHandlePosition=null,e._isEmitAboutToStop=!1,e._isMyEventAndMoved=!1,e._scrollDirection=oe.None,e._laseScrollDirection=oe.None,e._touchEvent=null,e.test=!1,e}e(r,t);var s=r.prototype;return s.onInit=function(){var t=this;this._initView(),this._initContent(),this._parentAdapter=this.adapter.getParentAdapter(this.adapter.node.parent),this.view.node[Cn]=!0,this.adapter.viewManager.on(vn.Event.ON_UPDATE_VIEWS,this._onUpdateViews,this),this.adapter.viewManager.on(vn.Event.ON_CHANGED_VIRTUALSIZE,this._onChangedVirtualSize,this),this.adapter.viewManager.on(vn.Event.ON_CHANGED_OVERFLOWHEADER,this._onChangedOverflowHeader,this),this.adapter.viewManager.on(vn.Event.ON_RESET_ALL_STATE,this._onResetAllState,this),this.adapter.viewManager.on(vn.Event.ON_CLEARVIEWS,this._onResetAllState,this),this.adapter.node.on(_.EventType.SIZE_CHANGED,this._onAdapterSizeChanged,this),this.view.node.on(_.EventType.SIZE_CHANGED,this._onViewSizeChanged,this),this._registerTouchEvent(),this.__createDebug(),this.view.scheduleOnce((function(){t._updatePercentage()}))},s._initView=function(){if(!this.view)throw Error("ScrollManager view 参数为空！");var t={x:.5,y:.5};t[this.adapter.mainAxis]=this.adapter.mainAxisAnchorPoint,this.view.setAnchorPoint(t.x,t.y);var e=this.view.getComponent(z);e||((e=this.view.addComponent(z)).isAlignLeft=e.isAlignRight=e.isAlignTop=e.isAlignBottom=!0,e.left=e.right=e.top=e.bottom=0),e.updateAlignment(),this._viewWidget=e},s.__createDebug=function(){},s.__drawDebug=function(){if(this.__debug_graphics){this.__debug_graphics.clear();var t=this.adapter.mainAxis,e=this.adapter.crossAxis,i=this.adapter.multiplier,n={x:0,y:0},r={x:0,y:0};r[t]=this.adapter.viewManager.virtualSize,r[e]=this.adapter.crossAxisSize,n[t]=this.contentPosition-r[t]*this.content.anchorPoint[t]*i,n[t]+=this.adapter.viewManager.overflowHeader,n[e]-=r[e]*this.view.anchorPoint[e],this.__debug_graphics.fillRect(n.x,n.y,r.x,r.y),this.__debug_graphics.stroke()}},s._initContent=function(){if(!this.content)throw Error("ScrollManager content 参数为空！");this.content.setAnchorPoint(this.view.anchorPoint);var t={x:0,y:0};t[this.adapter.crossAxis]=this.view.contentSize[this.adapter.crossAxis],this.content.setContentSize(t.x,t.y),this._layerLowest||(this._layerLowest=new _("_layerLowest"),this._layerMedium=new _("_layerMedium"),this._layerHighest=new _("_layerHighest"),this.content.node.addChild(this._layerLowest),this.content.node.addChild(this._layerMedium),this.content.node.addChild(this._layerHighest)),this._updateContentPosition({x:0,y:0})},s._registerTouchEvent=function(){this.view.node.on(_.EventType.TOUCH_START,this._onTouchStart,this,!0),this.view.node.on(_.EventType.TOUCH_END,this._onTouchEnd,this,!0),this.view.node.on(_.EventType.TOUCH_CANCEL,this._onTouchCancel,this,!0),this.view.node.on(_.EventType.TOUCH_MOVE,this._onTouchMove,this,!0)},s._bubbleToParent=function(t){this._parentAdapter&&this._parentAdapter.scrollManager.view.node.dispatchEvent(t)},s._emitCancelEvent=function(t){if(!this._isCanceledEvent){var e=t.getUILocation();e.subtract(t.getUIStartLocation()),this.cancelInnerEvents&&e.length()>7&&t.target!==this.view.node&&(this._simulateEvent(t,_.EventType.MOUSE_LEAVE),this._simulateEvent(t,_.EventType.TOUCH_CANCEL),this._isCanceledEvent=!0)}},s._simulateEvent=function(t,e,i){if(void 0===i&&(i=!0),t){var n=new I(t.getTouches(),t.bubbles,e),r=t.target;n.type=e,n.touch=t.touch,n.simulate=i,r.dispatchEvent(n)}},s._onUpdateViews=function(){this._velocity=0,this._updatePercentage()},s._onChangedVirtualSize=function(){this._updatePercentage(),null!=this._scrollHandlePosition&&null!=this._scrollHandlePosition.change&&this._scrollHandlePosition.change()},s._onChangedOverflowHeader=function(t){this.__drawDebug()},s._onResetAllState=function(){this._velocity=0,this._scrolling=!1,this._dragging=!1,this._isMyEventAndMoved=!1,this._scrollDirection=oe.None,this._percentage=0,this._isEmitAboutToStop=!1,this._boundaryOffset=0,this._isCanceledEvent=!1,this._parentTouch=!1,this._stopCheckNested=!1,this._scrollDirection=oe.None,this._touchEvent=null,this.stopScroll(),this._initView(),this._initContent()},s._onAdapterSizeChanged=function(){this._viewWidget.updateAlignment()},s._onViewSizeChanged=function(){this.emit(On.ON_VIEW_SIZE_CHANGED)},s._isMyEvent=function(t,e){return t.eventPhase==I.AT_TARGET||!e||e[0]==this.view.node&&!t.target[Cn]},s._onTouchStart=function(t){this._velocity=0,this._dragging=!0,this._isMyEventAndMoved=!1,this._isCanceledEvent=!1,this._parentTouch=!1,this._stopCheckNested=!1,this._isEmitAboutToStop=!1,this._scrollDirection=oe.None,this._contentStartPosition.set(this.content.node.position),this._touchEvent=t,this.stopScroll(),this._calcNestedDirection(),this.emit(On.ON_SCROLL_START)},s._onTouchEnd=function(t,e){this._dragging=!1,this._touchEvent=null,this.emit(On.ON_SCROLL_END,t)},s._onTouchCancel=function(t,e){t.simulate||(this._dragging=!1,this._touchEvent=null,this.emit(On.ON_SCROLL_CANCEL,t))},s._onTouchMove=function(t,e){if(this._isMyEvent(t,e)){if(this._emitCancelEvent(t),this._parentTouch||!this.canTouch)return this._bubbleToParent(t);if(this._touchEvent){var i=this.adapter.mainAxis,n=t.getUILocation(),r=t.getUIStartLocation(),a=n.subtract(r);if(!a.equals2f(0,0)){var o={x:0,y:0};o[i]=this._contentStartPosition[i]+a[i];var s=o[i]-this.contentPosition,l=this.calcOffset(s),h=this.adapter.isHorizontal?-1:1;o[i]+=h*l,this.movementType==qt.Elastic&&0!=l&&(o[i]-=h*this._rubberDelta(l,this.adapter.mainAxisSize)),this._checkNested(t,o,this._parentAdapter),this._parentTouch?this._bubbleToParent(t):(this._isMyEventAndMoved=!0,this._updateContentPosition(o),this.emit(On.ON_DRAGGING,l))}}}},s._calcNestedDirection=function(){this._parentAdapter&&(this.percentage<=this.nestedMinThreshold&&!this.adapter.viewManager.loopHeader?this._nestedDirection=1==this.adapter.multiplier?le.Footer:le.Header:this.percentage>=this.nestedMaxThreshold&&!this.adapter.viewManager.loopFooter?this._nestedDirection=1==this.adapter.multiplier?le.Header:le.Footer:this._nestedDirection=le.Both)},s._checkNested=function(t,e,i){if(i&&!this._stopCheckNested){if(this.orientation==i.scrollManager.orientation){var n=e[this.adapter.mainAxis]-this._contentStartPosition[this.adapter.mainAxis];if(Math.abs(n)<=.1)return;this._nestedDirection==le.Footer?n<0&&(this._parentTouch=!0):this._nestedDirection==le.Header&&n>0&&(this._parentTouch=!0)}else{var r=0,a=0;if(t instanceof I){var o=t.getUIStartLocation(),s=t.getUILocation();r=Math.abs(o.x-s.x),a=Math.abs(o.y-s.y)}else r=Math.abs(t.getScrollX()),a=Math.abs(t.getScrollY());if(r==a)return;r>a?this.adapter.isVertical&&(this._parentTouch=!0):a>r&&this.adapter.isHorizontal&&(this._parentTouch=!0)}if(!this._parentTouch&&i.scrollManager.parentAdapter)return this._checkNested(t,e,i.scrollManager.parentAdapter);this._stopCheckNested=!0}},s._updateContentPosition=function(t,e){void 0===e&&(e=!0),this._updateScrollDirection(t),this.content.node.setPosition(t.x,t.y),this.emit(On.ON_SCROLL,this._scrollDirection),e?this._updatePercentage():this.__drawDebug()},s._updatePrevContentPosition=function(){this._prevContentPosition.set(this.content.node.position)},s._calcPercentage=function(t,e){var i=this.internal_getHiddenSize(),n=this.adapter.viewManager.loopHeader,r=this.adapter.viewManager.loopFooter,a=this.adapter.multiplier,o=this.adapter.viewManager.overflowHeader,s=t*a;if(this.adapter.isHorizontal?s-=e*a:s+=e*a,r)s+=(o+(i+=this.adapter.viewManager.spacing)*a)*a,this.adapter.centerManager.enabled?s+=this.adapter.centerManager.getContainerOffset():s+=this.adapter.paddingHeader,s+=1,s%=i;else if(n){s+=this.adapter.mainAxisSize-1,this.adapter.centerManager.enabled?s-=this.adapter.centerManager.getContainerOffset():s-=this.adapter.paddingFooter,s+=(o+i*a)*a,t*-a>o*a&&(s+=this.adapter.viewManager.spacing),s%=i}else s+=o*a,this.adapter.centerManager.enabled?s+=this.adapter.centerManager.getContainerOffset():s+=this.adapter.paddingHeader,s>i&&(s=i);return s/i},s._updatePercentage=function(){var t=this.calcOffset();this.adapter.viewManager.virtualSize<=this.adapter.mainAxisSize?this._percentage=0:this._percentage=this._calcPercentage(this.contentPosition,t),this.emit(On.ON_UPDATE_PERCENTAGE,this._percentage,t),this.__drawDebug()},s.internal_disableTouchTarget=function(t){if(this._touchEvent&&this._touchEvent.target==t){var e=this._touchEvent;this._simulateEvent(e,_.EventType.TOUCH_CANCEL,!1),this._simulateEvent(e,_.EventType.MOUSE_LEAVE,!1),this._touchEvent=null}},s.internal_getHiddenSize=function(){var t=this.adapter.viewManager.loopHeader,e=this.adapter.viewManager.loopFooter,i=this.adapter.viewManager.virtualSize;return t||e||this.adapter.centerManager.enabled||(i-=this.adapter.mainAxisSize,i+=this.adapter.mainAxisPadding),i},s._getContentMinBoundaryOffset=function(t,e){return!this.adapter.viewManager.header||!this.adapter.centerManager.enabled&&this.adapter.viewManager.virtualSize<=this.adapter.mainAxisSize?this.adapter.isHorizontal?e+this._defaultMax+t:e+this._defaultMin+t:this.adapter.viewManager.min+t},s._getContentMaxBoundaryOffset=function(t,e){return!this.adapter.viewManager.header||!this.adapter.centerManager.enabled&&this.adapter.viewManager.virtualSize<=this.adapter.mainAxisSize?this.adapter.isHorizontal?e+this._defaultMin+t:e+this._defaultMax+t:this.adapter.viewManager.max+t},s._getMaxBoundaryOffset=function(t){var e=this._viewMax;return this.adapter.isHorizontal?this.adapter.isArrangeAxisStart?t:e+t:this.adapter.isArrangeAxisStart?-t:e-t},s._getMinBoundaryOffset=function(t){var e=this._viewMin;return this.adapter.isHorizontal?this.adapter.isArrangeAxisStart?e+t:t:this.adapter.isArrangeAxisStart?e-t:-t},s._rubberDelta=function(t,e){return(1-1/(.55*Math.abs(t)/e+1))*e*Math.sign(t)},s._calcElastic=function(t,e,i){var n=this.adapter.mainAxis,r=this.elasticity;this._scrolling&&(r*=3);var a=this.adapter.isHorizontal?-1:1,o=ve.smoothDamp(this.contentPosition,this.contentPosition+a*e,this._velocity,r,ve.Infinity,t),s=o.velocity,l=o.position;Math.abs(s)<1&&(s=0),this._velocity=s,i[n]=l},s._calcInertia=function(t,e){this._velocity*=Math.pow(this.decelerationRate,t),Math.abs(this._velocity)<1&&(this._velocity=0),e[this.adapter.mainAxis]+=this._velocity*t},s._calcClamped=function(t){var e=this.adapter.mainAxis,i=t[e]-this.contentPosition,n=this.calcOffset(i);this.adapter.isHorizontal?t[e]-=n:t[e]+=n},s._updateScrollDirection=function(t){var e=t[this.adapter.mainAxis]-this.contentPosition;0!=e?(this.adapter.isHorizontal?this._scrollDirection=e>0?oe.Right:oe.Left:this._scrollDirection=e>0?oe.Up:oe.Down,this._laseScrollDirection=this._scrollDirection):this._scrollDirection=oe.None},s.internal_setContentPosition=function(t,e){void 0===e&&(e=!0);var i={x:0,y:0};i[this.adapter.mainAxis]=t,this._updateContentPosition(i,e)},s.internal_lateUpdate=function(t){this.test||(this._autoScrolling(t),this._scrollHandler(t,this._scrollHandlePosition,this._scrollPositionHandler.bind(this)),this._scrollHandler(t,this._scrollHandlePercentage,this._scrollPercentageHandler.bind(this)))},s._autoScrolling=function(t){var e=this.calcOffset();if(this._boundaryOffset=e,this._dragging||0==e&&0==this._velocity||(this.content.node.getPosition(Ln),this.movementType==qt.Elastic&&0!=e?this._calcElastic(t,e,Ln):this.inertia?this._calcInertia(t,Ln):this._velocity=0,this.movementType==qt.Clamped&&this._calcClamped(Ln),this._updateContentPosition(Ln)),this._dragging&&this.inertia){var i=(this.contentPosition-this._prevContentPosition[this.adapter.mainAxis])/t;this._velocity=ve.lerp(this._velocity,i,10*t)}this._prevContentPosition.equals(this.content.node.position)||this._updatePrevContentPosition(),this._isEmitAboutToStop||this._dragging||(Math.abs(this._velocity)<=this.aboutToStopVelocity||0!=e)&&(this._scrollHandlePercentage||this._scrollHandlePosition||(this.emit(On.ON_ABOUT_TO_STOP,this._velocity),this._isEmitAboutToStop=!0)),this._scrolling=!1},s._scrollHandler=function(t,e,i){if(null!=e){e.deltaTime+=t;var n=e.deltaTime/(e.duration>R.FLT_EPSILON?e.duration:R.FLT_EPSILON);n=ve.clamp01(n);var r=D.quintOut(n);e.current=ve.progress(e.from,e.to,e.current,r),i(e,n)}},s._scrollPercentageHandler=function(t,e){var i=this.percentage;if(this.setPercentage(t.current),1==e||i==this.percentage){var n=!0;this._scrollHandlePercentage.stop&&(n=this._scrollHandlePercentage.stop()),n&&(this._scrollHandlePercentage=null)}},s._scrollPositionHandler=function(t,e){var i={x:0,y:0};i[this.adapter.mainAxis]=t.current,this._setAutoScroll(i),(1==e||Math.abs(this.contentPosition-t.to)<=1e-4)&&(this._scrollHandlePosition.stop&&this._scrollHandlePosition.stop(),this._scrollHandlePosition=null)},s._setAutoScroll=function(t){var e=this,i=function(t){e._updateContentPosition(t),e._updatePrevContentPosition(),e._velocity=0};i(t);var n=this.calcOffset();if(0!=n){var r=this.adapter.isHorizontal?-1:1;return t[this.adapter.mainAxis]+=n*r,i(t),!1}return!0},s._scrollToPosition=function(t,e){var i=this;return new Promise((function(n){if(!i.canAutoScroll)return n(!1);var r=e();if(null==r||Math.abs(i.contentPosition-r)<R.FLT_EPSILON)return n(!1);i._scrollHandlePercentage=null,i._scrollHandlePosition={current:0,from:i.contentPosition,to:r,deltaTime:0,duration:Math.max(0,t),change:function(){r=e(),i._scrollHandlePosition.to=r},stop:function(){n(!0)}}}))},s.getLayerNode=function(t){switch(t){case ee.Medium:return this._layerMedium;case ee.Highest:return this._layerHighest;default:return this._layerLowest}},s.scrollToModelIndex=function(){var t=a(o().mark((function t(e,i,n){var r,a,s=this;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(-1!=(r=this.adapter.viewManager.getGroupIndexByModelIndex(i))){t.next=3;break}return t.abrupt("return");case 3:return a=!1,this.emit(On.ON_SCROLL_TO_MODELINDEX_BEFOR,i),t.next=7,this._scrollToPosition(e,(function(){var t=s.adapter.centerManager.getPositionByGroupIndex(r,n,a);return a=!0,t}));case 7:this.emit(On.ON_SCROLL_TO_MODELINDEX_AFTER,i);case 8:case"end":return t.stop()}}),t,this)})));return function(e,i,n){return t.apply(this,arguments)}}(),s.scrollToGroupIndex=function(){var t=a(o().mark((function t(e,i,n){var r,a=this;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=!1,this.emit(On.ON_SCROLL_TO_GROUPINDEX_BEFOR,i),t.next=4,this._scrollToPosition(e,(function(){var t=a.adapter.centerManager.getPositionByGroupIndex(i,n,r);return r=!0,t}));case 4:this.emit(On.ON_SCROLL_TO_GROUPINDEX_AFTER,i);case 5:case"end":return t.stop()}}),t,this)})));return function(e,i,n){return t.apply(this,arguments)}}(),s.scrollToHeader=function(t){this.scrollToGroupIndex(t,0)},s.scrollToFooter=function(t){this.scrollToGroupIndex(t,this.adapter.viewManager.groupLength-1)},s.scrollToPercentage=function(t,e){if(!this.canAutoScroll)return!1;Math.abs(this._percentage-e)<.001||(e=ve.clamp01(e),t=Math.max(0,t),this._scrollHandlePercentage=null,this._scrollHandlePercentage={deltaTime:0,duration:t,current:0,from:this._percentage,to:e})},s.stopVelocity=function(){this._velocity=0},s.stopScroll=function(){this._scrollHandlePosition=null,this._scrollHandlePercentage=null,this.stopVelocity()},s.setPercentage=function(t){for(var e=this.internal_getHiddenSize(),i={x:0,y:0},n=0,r=null;n<100;){n++;var a=this._percentage-t;if(null!=r&&this._percentage===r)break;if(Math.abs(a)<R.FLT_EPSILON)break;r=this._percentage;var o=this.contentPosition-a*this.adapter.multiplier*e;if(i[this.adapter.mainAxis]=o,!this._setAutoScroll(i))break}100==n&&console.warn("循环次数已达最大值，尽量不要在滚动过程中频繁修改尺寸")},s.calcOffset=function(t,e){void 0===t&&(t=0),void 0===e&&(e=this.contentPosition);var i=0;if(this.movementType==qt.Unrestricted)return i;var n=this._getContentMaxBoundaryOffset(t,e),r=this._getContentMinBoundaryOffset(t,e),a=this._getMaxBoundaryOffset(n),o=this._getMinBoundaryOffset(r);!this.adapter.centerManager.enabled&&this.adapter.viewManager.virtualSize>this.adapter.mainAxisSize&&(this.adapter.isVertical?(a-=this.adapter.viewManager.top,o+=this.adapter.viewManager.bottom):(a-=this.adapter.viewManager.left,o+=this.adapter.viewManager.right));var s=0,l=0;if(this.adapter.centerManager.enabled&&this.adapter.viewManager.groupLength>0)l=this.adapter.centerManager.max,s=this.adapter.centerManager.min;else{var h=this.adapter.viewManager.getMagneticOffset();a-=h,o-=h}return this.adapter.releaseManager.enabled&&(l=Math.max(l,this.adapter.releaseManager.max),s=Math.max(s,this.adapter.releaseManager.min)),a-=l,(o+=s)<-.001?i=o:a>.001&&(i=a),i},u(r,[{key:"view",get:function(){return this._view},set:function(t){this._view=t}},{key:"content",get:function(){return this._content},set:function(t){this._content=t}},{key:"orientation",get:function(){return this._orientation},set:function(t){t!=this._orientation&&(this._orientation=t,this.emit(On.ON_CHANGED_ORIENTATION))}},{key:"_viewMin",get:function(){return-this.adapter.mainAxisSize}},{key:"_viewMax",get:function(){return this.adapter.mainAxisSize}},{key:"_defaultMin",get:function(){return 1==this.adapter.multiplier?-this.adapter.mainAxisSize:0}},{key:"_defaultMax",get:function(){return 1==this.adapter.multiplier?0:this.adapter.mainAxisSize}},{key:"isMyEventAndMoved",get:function(){return this._isMyEventAndMoved}},{key:"velocity",get:function(){return this._velocity}},{key:"scrollDirection",get:function(){return this._scrollDirection}},{key:"laseScrollDirection",get:function(){return this._laseScrollDirection}},{key:"percentage",get:function(){return this._percentage}},{key:"dragging",get:function(){return this._dragging}},{key:"boundaryOffset",get:function(){return this._boundaryOffset}},{key:"parentAdapter",get:function(){return this._parentAdapter}},{key:"canAutoScroll",get:function(){return!this.dragging&&this.adapter.viewManager.virtualSize>this.adapter.mainAxisSize||this.adapter.centerManager.enabled}},{key:"canTouch",get:function(){return this.touchMode==ne.AlwaysAllow||this.touchMode!=ne.Disabled&&(!!this.adapter.centerManager.enabled||(!!this.adapter.releaseManager.enabled||this.adapter.viewManager.virtualSize>this.adapter.mainAxisSize))}},{key:"contentPosition",get:function(){return this.content.node.position[this.adapter.mainAxis]}}]),r}(fe)).Event=On,tn=t(($i=pn).prototype,"_view",[Fi],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),t($i.prototype,"view",[Vi],Object.getOwnPropertyDescriptor($i.prototype,"view"),$i.prototype),en=t($i.prototype,"_content",[ki],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),t($i.prototype,"content",[Gi],Object.getOwnPropertyDescriptor($i.prototype,"content"),$i.prototype),nn=t($i.prototype,"_orientation",[Ui],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Qt.Vertical}}),t($i.prototype,"orientation",[Bi],Object.getOwnPropertyDescriptor($i.prototype,"orientation"),$i.prototype),rn=t($i.prototype,"touchMode",[Wi],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return ne.Auto}}),an=t($i.prototype,"movementType",[ji],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return qt.Elastic}}),on=t($i.prototype,"elasticity",[Yi],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.1}}),sn=t($i.prototype,"inertia",[zn],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),ln=t($i.prototype,"decelerationRate",[Zi],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.135}}),hn=t($i.prototype,"aboutToStopVelocity",[Ki],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 100}}),cn=t($i.prototype,"cancelInnerEvents",[Xi],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),un=t($i.prototype,"nestedMinThreshold",[Ji],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.001}}),dn=t($i.prototype,"nestedMaxThreshold",[Qi],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.999}}),qi=$i))||qi);d._RF.pop(),d._RF.push({},"49cfdCskIREZ6//by123w4v","CenterManager",void 0);var Pn,Nn,In,Rn,Dn,Fn,Vn,kn,Gn,Un,Bn,Wn,jn,Yn,Zn=p.ccclass,Kn=p.property,Xn=(mn=Zn("CenterManager"),yn=Kn("boolean"),xn=Kn({range:[0,1],slide:!0,step:.1,tooltip:"容器(view)的锚点,当滚动停止时,元素锚点位置会和容器锚点位置重合"}),bn=Kn({range:[0,1],slide:!0,step:.1,tooltip:"元素(item)的锚点位置,当滚动停止时,元素锚点位置会和容器锚点位置重合"}),mn((En=t((An=function(t){function r(){for(var e,r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a))||this,i(e,"_enabled",En,n(e)),i(e,"containerAnchorPoint",wn,n(e)),i(e,"elementAnchorPoint",Mn,n(e)),e}e(r,t);var a=r.prototype;return a.getContainerOffset=function(t){void 0===t&&(t=this.containerAnchorPoint);var e=0;return e=this.adapter.isHorizontal?-1==this.adapter.multiplier?t:1-t:1==this.adapter.multiplier?t:1-t,this.adapter.mainAxisSize*e},a.getElementOffset=function(t){void 0===t&&(t=this.elementAnchorPoint);return this.adapter.isHorizontal?-1==this.adapter.multiplier?t:1-t:1==this.adapter.multiplier?t:1-t},a.onInit=function(){this.adapter.scrollManager.on(Hn.Event.ON_ABOUT_TO_STOP,this._onAboutToStop,this),this.adapter.viewManager.on(vn.Event.ON_UPDATE_VIEWS,this.scrollToCenter,this,!0)},a._onAboutToStop=function(t){this.scrollToCenter(t)},a.scrollToCenter=function(t){if(void 0===t&&(t=.5),this.enabled){var e=this.getCenterVisibleIndex();if(-1!=e){var i=this.adapter.viewManager.getVisibleView(e),n=this.getPositionByGroupIndex(i.index),r=this.adapter.scrollManager.content.node.position[this.adapter.mainAxis],a=Math.abs(n-r),o=0;o=a<Math.abs(t)?Math.max(a/Math.abs(t),.1):Math.max(Math.abs(t)/a,.1),this.adapter.scrollManager.scrollToGroupIndex(o,i.index)}}},a.getCenterVisibleIndex=function(t,e){void 0===t&&(t=this.containerAnchorPoint),void 0===e&&(e=this.elementAnchorPoint);for(var i=this.adapter.mainAxis,n=this.getContainerOffset(t),r=-1,a=Number.MAX_SAFE_INTEGER,o=0;o<this.adapter.viewManager.visibleLength;o++){var s=this.adapter.viewManager.getVisibleView(o);if(!s||!s.group)break;var l={x:s.group.position.x,y:s.group.position.y};l[i]-=this.adapter.multiplier*s.group.size[i]*e;var h=this.adapter.scrollManager.content.convertToWorldSpaceAR(F(l.x,l.y)),c=this.adapter.scrollManager.view.convertToNodeSpaceAR(h),u=Math.abs(c[i]+this.adapter.multiplier*n);u<a&&(a=u,r=o)}return r},a.getPositionByGroupIndex=function(t,e,i){void 0===e&&(e=he.Auto),void 0===i&&(i=!1);var n=this.adapter.viewManager.getGroup(t);if(!n)return null;var r=null;if(e==he.Header&&this.adapter.viewManager.loopHeader)i&&(r=this._checkExists(t)),null==r&&(r=this._alwaysHeader(t,n));else if(e==he.Footer&&this.adapter.viewManager.loopFooter)i&&(r=this._checkExists(t)),null==r&&(r=this._alwaysFooter(t,n));else if(null==(r=this._checkExists(t))){var a=this.adapter.viewManager.header,o=this.adapter.viewManager.footer;a?t>o.index?r=this._calcTargetFooter(o.group,o.index+1,t,n):t<a.index&&(r=this._calcTargetHeader(a.group,a.index-1,t,n)):r={position:n.position[this.adapter.mainAxis],size:n.size[this.adapter.mainAxis],anchor:n.anchorPoint[this.adapter.mainAxis]}}return this._convertTargetToPosition(r)},a._convertTargetToPosition=function(t){var e=null;if(t){var i=this.adapter.multiplier,n=-1==i?t.anchor:1-t.anchor;e=-t.position,e-=this.getContainerOffset()*i,e-=t.size*n*i,e+=t.size*this.getElementOffset()*i}return e},a._checkExists=function(t){var e=this.adapter.viewManager.getVisibleIndexByGroupIndex(t);if(-1!=e){var i=this.adapter.viewManager.getVisibleView(e);return{position:i.group.position[this.adapter.mainAxis],size:i.group.size[this.adapter.mainAxis],anchor:i.group.anchorPoint[this.adapter.mainAxis]}}return null},a._calcTargetFooter=function(t,e,i,n){for(var r=this.adapter.viewManager.internal_getInitFooterSize(t),a=e;a<=i;a++)r+=this.adapter.viewManager.internal_accumulationSize(a);return{position:this.adapter.viewManager.internal_convertSizeToFooterPosition(r,n),size:n.size[this.adapter.mainAxis],anchor:n.anchorPoint[this.adapter.mainAxis]}},a._calcTargetHeader=function(t,e,i,n){for(var r=this.adapter.viewManager.internal_getInitHeaderSize(t),a=e;a>=i;a--)r+=this.adapter.viewManager.internal_accumulationSize(a);return{position:this.adapter.viewManager.internal_convertSizeToHeaderPosition(r,n),size:n.size[this.adapter.mainAxis],anchor:n.anchorPoint[this.adapter.mainAxis]}},a._alwaysHeader=function(t,e){var i=0,n=t,r=this.adapter.viewManager.header;return r&&(i=this.adapter.viewManager.internal_getInitHeaderSize(r.group),n=r.index),t!=n&&(i=this._calcSizeToHeader(n,t,i)),{position:this.adapter.viewManager.internal_convertSizeToHeaderPosition(i,e),size:e.size[this.adapter.mainAxis],anchor:e.anchorPoint[this.adapter.mainAxis]}},a._alwaysFooter=function(t,e){var i=0,n=t,r=this.adapter.viewManager.footer;return r&&(i=this.adapter.viewManager.internal_getInitFooterSize(r.group),n=r.index),t!=n&&(i=this._calcSizeToFooter(n,t,i)),{position:this.adapter.viewManager.internal_convertSizeToFooterPosition(i,e),size:e.size[this.adapter.mainAxis],anchor:e.anchorPoint[this.adapter.mainAxis]}},a._calcSizeToHeader=function(t,e,i){for(;;){if(--t<0){if(!this.adapter.viewManager.loopHeader)return i;t=this.adapter.viewManager.groupLength-1}if(i+=this.adapter.viewManager.internal_accumulationSize(t),e==t)return i}},a._calcSizeToFooter=function(t,e,i){for(;;){if(++t>=this.adapter.viewManager.groupLength){if(!this.adapter.viewManager.loopFooter)return i;t=0}if(i+=this.adapter.viewManager.internal_accumulationSize(t),t==e)return i}},u(r,[{key:"enabled",get:function(){return this._enabled},set:function(t){t!=this._enabled&&(this._enabled=t)}},{key:"max",get:function(){var t=this.getContainerOffset(this.containerAnchorPoint);return this.adapter.isArrangeAxisStart?t:this.adapter.mainAxisSize-t}},{key:"min",get:function(){var t=this.getContainerOffset(this.containerAnchorPoint);return this.adapter.isArrangeAxisStart?this.adapter.mainAxisSize-t:t}}]),r}(fe)).prototype,"_enabled",[Kn],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),t(An.prototype,"enabled",[yn],Object.getOwnPropertyDescriptor(An.prototype,"enabled"),An.prototype),wn=t(An.prototype,"containerAnchorPoint",[xn],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Mn=t(An.prototype,"elementAnchorPoint",[bn],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Sn=An))||Sn);d._RF.pop(),d._RF.push({},"9a9b8/q4JFHHb650TtGE+gS","PageViewManager",void 0);var Jn,Qn,qn,$n,tr,er,ir,nr,rr,ar,or,sr,lr,hr,cr=p.ccclass,ur=p.property,dr=function(t){return t[t.ON_PAGE_LENGTH_CHANGED=0]="ON_PAGE_LENGTH_CHANGED",t[t.ON_SCROLL_PAGE_BEFOR=1]="ON_SCROLL_PAGE_BEFOR",t[t.ON_SCROLL_PAGE_END=2]="ON_SCROLL_PAGE_END",t}(dr||{}),pr=(Pn=cr("PageViewManager"),Nn=ur("boolean"),In=ur({range:[0,1],slide:!0,step:.01,visible:function(){return this.enabled},tooltip:"滚动临界值，默认单位百分比，当拖拽超出该数值时，松开会自动滚动下一页，小于时则还原"}),Rn=ur({range:[0,1],slide:!0,step:.01,visible:function(){return this.enabled},tooltip:"设置 PageView PageTurning 事件的发送时机"}),Dn=ur({visible:function(){return this.enabled},tooltip:"快速滑动翻页临界值\n        当用户快速滑动时，会根据滑动开始和结束的距离与时间计算出一个速度值\n        该值与此临界值相比较，如果大于临界值，则进行自动翻页"}),Fn=ur({visible:function(){return this.enabled},tooltip:"每个页面翻页时所需时间。单位：秒"}),Pn(((Yn=function(t){function r(){for(var e,r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a))||this,i(e,"_enabled",Gn,n(e)),i(e,"scrollThreshold",Un,n(e)),i(e,"pageTurningEventTiming",Bn,n(e)),i(e,"autoPageTurningThreshold",Wn,n(e)),i(e,"pageTurningSpeed",jn,n(e)),e._currentIndex=0,e}e(r,t);var a=r.prototype;return a.onInit=function(){this._register()},a._register=function(){this.adapter&&this.enabled&&(this.adapter.scrollManager.on(Hn.Event.ON_SCROLL_END,this._handleReleaseLogic,this),this.adapter.scrollManager.on(Hn.Event.ON_SCROLL_CANCEL,this._handleReleaseLogic,this),this.adapter.scrollManager.on(Hn.Event.ON_SCROLL_TO_GROUPINDEX_BEFOR,this._onScrollToIndex,this),this.adapter.viewManager.on(vn.Event.ON_UPDATE_VIEWS,this._onUpdateViews,this,!0))},a._unregister=function(){this.adapter&&!this.enabled&&(this.adapter.scrollManager.off(Hn.Event.ON_SCROLL_END,this._handleReleaseLogic,this),this.adapter.scrollManager.off(Hn.Event.ON_SCROLL_CANCEL,this._handleReleaseLogic,this),this.adapter.scrollManager.off(Hn.Event.ON_SCROLL_TO_GROUPINDEX_BEFOR,this._onScrollToIndex,this),this.adapter.viewManager.off(vn.Event.ON_UPDATE_VIEWS,this._onUpdateViews,this))},a.scrollToPage=function(t,e,i){e<0||e>=this.length||e==this.currentIndex&&0!=this.adapter.scrollManager.calcOffset()||(this.adapter.scrollManager.scrollToGroupIndex(t,e,i),this.emit(dr.ON_SCROLL_PAGE_BEFOR,e))},a.scrollToPrevPage=function(t,e){void 0===t&&(t=this.pageTurningSpeed),void 0===e&&(e=he.Header),0!=this._currentIndex?this.scrollToPage(t,this._currentIndex-1,e):this.adapter.viewManager.loopHeader&&this.scrollToPage(t,this.length-1,e)},a.scrollToNextPage=function(t,e){void 0===t&&(t=this.pageTurningSpeed),void 0===e&&(e=he.Footer),this._currentIndex>=this.length-1?this.adapter.viewManager.loopFooter&&this.scrollToPage(t,0,e):this.scrollToPage(t,this._currentIndex+1,e)},a._onUpdateViews=function(){this.emit(dr.ON_PAGE_LENGTH_CHANGED),this._currentIndex=0,this.scrollToPage(this.pageTurningSpeed,this._currentIndex)},a._onScrollToIndex=function(t){this._currentIndex=t,this.emit(dr.ON_SCROLL_PAGE_END,t)},a._handleReleaseLogic=function(t){if(this._enabled&&this.adapter.scrollManager.isMyEventAndMoved){var e=t.getUIStartLocation()[this.adapter.mainAxis]-t.getUILocation()[this.adapter.mainAxis],i=this._getNextIndex(e);this._isScrollable(e)||this._isQuicklyScrollable(this.adapter.scrollManager.velocity)?this.scrollToPage(this.pageTurningSpeed,i):this.scrollToPage(this.pageTurningSpeed,this._currentIndex)}},a._getNextIndex=function(t){var e=this._currentIndex;return this.adapter.isHorizontal?this.adapter.isArrangeAxisStart?t>0?e++:t<0&&e--:(t<0&&e++,t>0&&e--):this.adapter.isArrangeAxisStart?t<0?e++:t>0&&e--:t>0?e++:t<0&&e--,e>=this.length&&this.adapter.viewManager.loopFooter?e=0:e<0&&this.adapter.viewManager.loopHeader&&(e=this.length-1),(e<0||e>=this.length)&&(e=this._currentIndex),e},a._isScrollable=function(t){return Math.abs(t)>=this.adapter.mainAxisSize*this.scrollThreshold},a._isQuicklyScrollable=function(t){return Math.abs(t)>this.autoPageTurningThreshold},u(r,[{key:"enabled",get:function(){return this._enabled},set:function(t){t!=this._enabled&&(this._enabled=t,this._enabled?this._register():this._unregister())}},{key:"currentIndex",get:function(){return this._currentIndex}},{key:"length",get:function(){return this.adapter.viewManager.groupLength}}]),r}(fe)).Event=dr,Gn=t((kn=Yn).prototype,"_enabled",[ur],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),t(kn.prototype,"enabled",[Nn],Object.getOwnPropertyDescriptor(kn.prototype,"enabled"),kn.prototype),Un=t(kn.prototype,"scrollThreshold",[In],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),Bn=t(kn.prototype,"pageTurningEventTiming",[Rn],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.1}}),Wn=t(kn.prototype,"autoPageTurningThreshold",[Dn],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 100}}),jn=t(kn.prototype,"pageTurningSpeed",[Fn],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.3}}),Vn=kn))||Vn);d._RF.pop(),d._RF.push({},"584779mBRhND6eHOQ3xrp/1","ReleaseManager",void 0);var _r,gr=p.ccclass,fr=p.property,vr=function(t){return t[t.ON_PULL_UP=0]="ON_PULL_UP",t[t.ON_PULL_DOWN=1]="ON_PULL_DOWN",t[t.ON_PULL_LEFT=2]="ON_PULL_LEFT",t[t.ON_PULL_RIGHT=3]="ON_PULL_RIGHT",t}(vr||{}),mr=(Jn=gr("ReleaseManager"),Qn=fr("boolean"),qn=fr({range:[0,1],slide:!0,step:.01,visible:function(){return this.enabled},tooltip:"根据此阈值来切换state状态"}),$n=fr({range:[0,1],slide:!0,step:.01,visible:function(){return this.enabled},tooltip:"根据此阈值来切换state状态"}),tr=fr({range:[0,1],slide:!0,step:.01,visible:function(){return this.enabled},tooltip:"根据此阈值来切换state状态"}),er=fr({range:[0,1],slide:!0,step:.01,visible:function(){return this.enabled},tooltip:"根据此阈值来切换state状态"}),Jn(((hr=function(t){function r(){for(var e,r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a))||this,i(e,"_enabled",rr,n(e)),i(e,"left",ar,n(e)),i(e,"right",or,n(e)),i(e,"top",sr,n(e)),i(e,"bottom",lr,n(e)),e._pullUp=void 0,e._pullDown=void 0,e._pullLeft=void 0,e._pullRight=void 0,e}e(r,t);var a=r.prototype;return a.onInit=function(){this.enabled&&(this._pullUp=new yr(this,vr.ON_PULL_UP,this.bottom),this._pullDown=new yr(this,vr.ON_PULL_DOWN,this.top),this._pullLeft=new yr(this,vr.ON_PULL_LEFT,this.right),this._pullRight=new yr(this,vr.ON_PULL_RIGHT,this.left),this.adapter.scrollManager.on(Hn.Event.ON_SCROLL_START,this.onScrollStart,this),this.adapter.scrollManager.on(Hn.Event.ON_SCROLL_END,this.onScrollEnd,this),this.adapter.scrollManager.on(Hn.Event.ON_SCROLL_CANCEL,this.onScrollEnd,this),this.checkLoop())},a.checkLoop=function(){this.adapter.isHorizontal?this.adapter.isArrangeAxisStart?(this.left>0&&(this.adapter.viewManager.loopHeader=!1),this.right>0&&(this.adapter.viewManager.loopFooter=!1)):(this.left>0&&(this.adapter.viewManager.loopFooter=!1),this.right>0&&(this.adapter.viewManager.loopHeader=!1)):this.adapter.isArrangeAxisStart?(this.top>0&&(this.adapter.viewManager.loopHeader=!1),this.bottom>0&&(this.adapter.viewManager.loopFooter=!1)):(this.top>0&&(this.adapter.viewManager.loopFooter=!1),this.bottom>0&&(this.adapter.viewManager.loopHeader=!1))},a.onScrollStart=function(){this.adapter.isHorizontal?(this.left>0&&this._pullRight._setState(de.IDLE),this.right>0&&this._pullLeft._setState(de.IDLE)):(this.top>0&&this._pullDown._setState(de.IDLE),this.bottom>0&&this._pullUp._setState(de.IDLE))},a.onScrollEnd=function(){this.adapter.isHorizontal?(this.left>0&&this._pullRight._setState(de.RELEASE),this.right>0&&this._pullLeft._setState(de.RELEASE)):(this.top>0&&this._pullDown._setState(de.RELEASE),this.bottom>0&&this._pullUp._setState(de.RELEASE))},a.internal_lateUpdate=function(t){if(this.enabled){var e=this.adapter.scrollManager.boundaryOffset;this.adapter.scrollManager.dragging||(e=0),this.adapter.isHorizontal?(this.left>0&&this._pullRight._set(Math.max(-e,0),e<0),this.right>0&&this._pullLeft._set(Math.max(e,0),e>0)):(this.top>0&&this._pullDown._set(Math.max(e,0),e>0),this.bottom>0&&this._pullUp._set(Math.max(-e,0),e<0))}},u(r,[{key:"enabled",get:function(){return this._enabled},set:function(t){t!=this._enabled&&(this._enabled=t)}},{key:"max",get:function(){return this.enabled?this.adapter.isHorizontal?this._pullLeft?this._pullLeft.expand:0:this._pullDown?this._pullDown.expand:0:0}},{key:"min",get:function(){return this.enabled?this.adapter.isHorizontal?this._pullRight?this._pullRight.expand:0:this._pullUp?this._pullUp.expand:0:0}}]),r}(fe)).Event=vr,rr=t((nr=hr).prototype,"_enabled",[fr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),t(nr.prototype,"enabled",[Qn],Object.getOwnPropertyDescriptor(nr.prototype,"enabled"),nr.prototype),ar=t(nr.prototype,"left",[qn],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),or=t(nr.prototype,"right",[$n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),sr=t(nr.prototype,"top",[tr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),lr=t(nr.prototype,"bottom",[er],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),ir=nr))||ir),yr=function(){function t(t,e,i){this._expand=0,this._progress=0,this._offset=0,this._state=void 0,this._defaultPercentage=void 0,this._manager=void 0,this._event=void 0,this._stop=void 0,this._defaultPercentage=i,this._manager=t,this._event=e}var e=t.prototype;return e._set=function(t,e){e&&(this._stop=!1),this._stop||(this._offset=t,this._progress=t/(this._defaultPercentage*this._manager.adapter.mainAxisSize),this._stop=this._offset<=.1,this._setState(de.PULL),this._manager.emit(this._event,this))},e._setState=function(t){this._state!=de.WAIT&&(t==de.PULL&&this._state==de.RELEASE||(this._state=t))},e.wait=function(t){void 0===t&&(t=this._defaultPercentage*this._manager.adapter.mainAxisSize),this._expand=t,this._state=de.WAIT},e.release=function(){this._expand=0,this._state=de.IDLE,this.offset<=.1&&(this._offset=0,this._progress=0,this._manager.emit(this._event,this))},u(t,[{key:"expand",get:function(){return this._expand}},{key:"progress",get:function(){return this._progress}},{key:"offset",get:function(){return this._offset}},{key:"state",get:function(){return this._state}}]),t}();d._RF.pop(),d._RF.push({},"06194IgtVlOubt8kvkPRvBb","Holder",void 0);var xr,br,Sr,Ar,Er,wr,Mr,Tr,zr,Lr,Cr,Or,Hr,Pr,Nr,Ir=p.ccclass,Rr=(p.property,Ir("Holder")(_r=function(){function t(t,e,i){this._node=void 0,this._transform=void 0,this._code=void 0,this._adapter=void 0,this._model=void 0,this._view=void 0,this._fixedIndex=-1,this._oldData=null,this._oldElement=null,this._isCallCreated=!1,this._isLayout=!1,this._node=t,this._code=e,this._adapter=i,this._transform=this.node.getComponent(v)}var e=t.prototype;return e.internal_visible=function(t,e,i){var n=this;this._view=t,this._model=e,this._oldElement=Object.assign({},e.element),this._model.element.update=this._updateElement.bind(this),this._oldData=this.data,i&&(this.node.active=!0,this._isCallCreated||(this._isCallCreated=!0,this.onCreated()),this.element.fixed&&(this._fixedIndex=this.view.group.models.findIndex((function(t){return t.index==n.model.index}))),this.transform.setContentSize(this.model.size.x,this.model.size.y),this.node.setScale(this.model.scale.x,this.model.scale.y),this._register(),this.onVisible(),this._model.update=this._updateHandler.bind(this))},e._updateElement=function(){this._oldElement.layer!=this.element.layer&&(this.node.parent=this.adapter.scrollManager.getLayerNode(this.element.layer),this._oldElement.layer=this.element.layer),(this._oldElement.wrapAfterMode!=this.element.wrapAfterMode||this._oldElement.wrapBeforeMode!=this.element.wrapBeforeMode||this._oldElement.ignoreLayout!=this.element.ignoreLayout||this.element.ignoreLayout&&this._oldElement.placeholder!=this.element.placeholder)&&(this.adapter.viewManager.internal_updateVisibleView(this.model.index),this._oldElement.wrapAfterMode=this.element.wrapAfterMode,this._oldElement.wrapBeforeMode=this.element.wrapBeforeMode,this._oldElement.ignoreLayout=this.element.ignoreLayout,this._oldElement.placeholder=this.element.placeholder)},e._updateHandler=function(){this._model.update=function(){},this.onVisible(),this._model.update=this._updateHandler.bind(this)},e.internal_disable=function(){this.adapter.scrollManager.internal_disableTouchTarget(this.node),this.onDisable(),this._unregister(),this._model.update=function(){},this._model.element.update=function(){},this._view=null,this._model=null,this._fixedIndex=-1,this._isLayout=!1,this._oldData=null,this.node.active=!1},e.internal_layout=function(){var t={x:this.model.size.x,y:this.model.size.y};this.adapter.layoutManager.isControlMainAxisSize&&(t[this.adapter.mainAxis]=this.model.layoutSize[this.adapter.mainAxis]),this.adapter.layoutManager.isControlCrossAxisSize&&(t[this.adapter.crossAxis]=this.model.layoutSize[this.adapter.crossAxis]),this._isLayout=!0,this.transform.setContentSize(t.x,t.y),this._isLayout=!1,this.node.setPosition(this.model.position.x,this.model.position.y)},e._register=function(){this.node.on(_.EventType.SIZE_CHANGED,this._onSizeChanged,this),this.node.on(_.EventType.TRANSFORM_CHANGED,this._onScaleChanged,this),this.node.on(_.EventType.ANCHOR_CHANGED,this._onAnchorPointChanged,this),this._adapter.modelManager.on(Ri.Event.ON_UPDATE,this._updateHandler,this)},e._unregister=function(){this.node.off(_.EventType.SIZE_CHANGED,this._onSizeChanged,this),this.node.off(_.EventType.TRANSFORM_CHANGED,this._onScaleChanged,this),this.node.off(_.EventType.ANCHOR_CHANGED,this._onAnchorPointChanged,this),this._adapter.modelManager.off(Ri.Event.ON_UPDATE,this._updateHandler,this)},e._onSizeChanged=function(){if(!this._isLayout){var t=ve.approximately(this.model.size[this.adapter.mainAxis],this.transform.contentSize[this.adapter.mainAxis]),e=ve.approximately(this.model.size[this.adapter.crossAxis],this.transform.contentSize[this.adapter.crossAxis]);this.model.size.x=this.transform.width,this.model.size.y=this.transform.height,t&&e||this.view.internal_holderChanged(t)}},e._onScaleChanged=function(t){if(t==_.TransformBit.SCALE&&(this.adapter.layoutManager.controlScaleWidth||this.adapter.layoutManager.controlScaleHeight)){var e=ve.approximately(this.model.scale[this.adapter.mainAxis],this.node.scale[this.adapter.mainAxis]),i=ve.approximately(this.model.scale[this.adapter.crossAxis],this.node.scale[this.adapter.crossAxis]);this.model.scale.x=this.node.scale.x,this.model.scale.y=this.node.scale.y,e&&i||this.view.internal_holderChanged(e)}},e._onAnchorPointChanged=function(){var t=ve.approximately(this.model.anchorPoint[this.adapter.mainAxis],this.transform.anchorPoint[this.adapter.mainAxis]),e=ve.approximately(this.model.anchorPoint[this.adapter.crossAxis],this.transform.anchorPoint[this.adapter.crossAxis]);this.model.anchorPoint.x=this.transform.anchorPoint.x,this.model.anchorPoint.y=this.transform.anchorPoint.y,t&&e||this.view.internal_holderChanged(t)},u(t,[{key:"node",get:function(){return this._node}},{key:"transform",get:function(){return this._transform}},{key:"code",get:function(){return this._code}},{key:"adapter",get:function(){return this._adapter}},{key:"model",get:function(){return this._model}},{key:"view",get:function(){return this._view}},{key:"data",get:function(){return this._model&&this._model.data}},{key:"fixedIndex",get:function(){return this._fixedIndex}},{key:"oldData",get:function(){return this._oldData}},{key:"element",get:function(){return this._model&&this._model.element}},{key:"index",get:function(){return this._model&&this._model.index}}]),t}())||_r);d._RF.pop(),d._RF.push({},"d5d1crBDMFIA4umJNt7GKmz","ScrollAdapter",void 0);var Dr,Fr,Vr,kr,Gr,Ur=p.ccclass,Br=p.property,Wr=(xr=Ur("ScrollAdapter"),br=Br(Hn),Sr=Br(vn),Ar=Br(Ke),Er=Br(pr),wr=Br(mr),Mr=Br(Xn),xr((Lr=t((zr=function(t){function r(){for(var e,r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a))||this,i(e,"scrollManager",Lr,n(e)),i(e,"viewManager",Cr,n(e)),i(e,"layoutManager",Or,n(e)),i(e,"pageViewManager",Hr,n(e)),i(e,"releaseManager",Pr,n(e)),i(e,"centerManager",Nr,n(e)),e.modelManager=new Ri,e}e(r,t);var a=r.prototype;return a.initElement=function(t,e){},a.getView=function(){return new jr(this)},a.getHolder=function(t,e){return new Yr(t,e,this)},a.getParentAdapter=function(t){if(null!=t){var e=t.getComponent("ScrollAdapter");return e||this.getParentAdapter(t.parent)}},a.__preload=function(){this.scrollManager.internal_create(this),this.viewManager.internal_create(this),this.modelManager.internal_create(this),this.releaseManager.internal_create(this),this.layoutManager.internal_create(this),this.pageViewManager.internal_create(this),this.centerManager.internal_create(this),this.viewManager.internal_init(),this.releaseManager.internal_init(),this.layoutManager.internal_init(),this.pageViewManager.internal_init(),this.centerManager.internal_init(),this.scrollManager.internal_init(),this.modelManager.internal_init()},a.lateUpdate=function(t){this.scrollManager.internal_lateUpdate(t),this.viewManager.internal_lateUpdate(t),this.layoutManager.internal_lateUpdate(t),this.releaseManager.internal_lateUpdate(t)},u(r,[{key:"isVertical",get:function(){return this.scrollManager.orientation==Qt.Vertical}},{key:"isHorizontal",get:function(){return this.scrollManager.orientation==Qt.Horizontal}},{key:"isArrangeAxisStart",get:function(){return this.viewManager.arrangeAxis==$t.Start}},{key:"mainAxis",get:function(){return this.isVertical?"y":"x"}},{key:"crossAxis",get:function(){return this.isVertical?"x":"y"}},{key:"mainAxisAnchorPoint",get:function(){var t=this.isVertical?1:0;return this.isArrangeAxisStart?t:1-t}},{key:"mainAxisSize",get:function(){return this.scrollManager.view.contentSize[this.mainAxis]}},{key:"crossAxisSize",get:function(){return this.scrollManager.view.contentSize[this.crossAxis]}},{key:"multiplier",get:function(){var t=this.isVertical?-1:1;return this.isArrangeAxisStart?-t:t}},{key:"paddingHeader",get:function(){return this.isHorizontal?this.isArrangeAxisStart?this.viewManager.left:this.viewManager.right:this.isArrangeAxisStart?this.viewManager.top:this.viewManager.bottom}},{key:"paddingFooter",get:function(){return this.isHorizontal?this.isArrangeAxisStart?this.viewManager.right:this.viewManager.left:this.isArrangeAxisStart?this.viewManager.bottom:this.viewManager.top}},{key:"mainAxisPadding",get:function(){return this.isHorizontal?this.viewManager.left+this.viewManager.right:this.viewManager.top+this.viewManager.bottom}}]),r}(E)).prototype,"scrollManager",[br],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Hn}}),Cr=t(zr.prototype,"viewManager",[Sr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new vn}}),Or=t(zr.prototype,"layoutManager",[Ar],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Ke}}),Hr=t(zr.prototype,"pageViewManager",[Er],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new pr}}),Pr=t(zr.prototype,"releaseManager",[wr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new mr}}),Nr=t(zr.prototype,"centerManager",[Mr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Xn}}),Tr=zr))||Tr),jr=function(t){function i(){return t.apply(this,arguments)||this}e(i,t);var n=i.prototype;return n.onVisible=function(){this.adapter.node.emit(_e.VISIBLE,this)},n.onDisable=function(){this.adapter.node.emit(_e.DISABLE,this)},i}(qe),Yr=function(t){function i(){return t.apply(this,arguments)||this}e(i,t);var n=i.prototype;return n.onCreated=function(){this.node.emit(pe.CREATED,this)},n.onVisible=function(){this.node.emit(pe.VISIBLE,this)},n.onDisable=function(){this.node.emit(pe.DISABLE,this)},i}(Rr);d._RF.pop(),d._RF.push({},"da1fezgWaRII6YHCEERKB92","SimpleAdapter",void 0);var Zr,Kr,Xr,Jr,Qr,qr,$r,ta,ea,ia,na,ra=p.ccclass,aa=p.property;Dr=ra("SimpleAdapter"),Fr=aa(_),Dr((Gr=t((kr=function(t){function r(){for(var e,r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a))||this,i(e,"prefab",Gr,n(e)),e._data=null,e}e(r,t);var a=r.prototype;return a.setData=function(t){this._data=t},a.getPrefab=function(t){return this.prefab},u(r,[{key:"data",get:function(){return this._data}}]),r}(Wr)).prototype,"prefab",[Fr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Vr=kr));d._RF.pop(),d._RF.push({},"39a65BHli1DW4GsARI0mFR5","Indicator",void 0);var oa,sa,la,ha,ca,ua,da,pa,_a,ga,fa,va,ma,ya,xa,ba,Sa,Aa,Ea,wa,Ma,Ta,za,La,Ca,Oa,Ha,Pa,Na,Ia,Ra,Da,Fa,Va,ka,Ga,Ua,Ba,Wa,ja,Ya=p.ccclass,Za=p.property;Zr=Ya("Indicator"),Kr=Za(Wr),Xr=Za({type:V}),Jr=Za({type:ce}),Zr(($r=t((qr=function(t){function r(){for(var e,r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a))||this,i(e,"adapter",$r,n(e)),i(e,"spriteFrame",ta,n(e)),i(e,"indicatorMode",ea,n(e)),i(e,"cellSize",ia,n(e)),i(e,"spacing",na,n(e)),e._indicators=[],e._layout=null,e._color=new g,e}e(r,t);var a=r.prototype;return a.__preload=function(){this.adapter&&(this.adapter.pageViewManager.on(pr.Event.ON_PAGE_LENGTH_CHANGED,this._onPageLengthChanged,this),this.adapter.pageViewManager.on(pr.Event.ON_SCROLL_PAGE_END,this._onScrollPageEnd,this))},a._onScrollPageEnd=function(){this.changedState()},a._onPageLengthChanged=function(){if(this.adapter){var t=this._indicators,e=this.adapter.viewManager.groupLength;if(e!==t.length){var i=0;if(e>t.length)for(i=0;i<e;++i)t[i]||(t[i]=this._createIndicator(i));else for(i=t.length-e;i>0;--i){var n=t[i-1];this.node.removeChild(n.node),t.splice(i-1,1)}this.layout&&this.layout.enabledInHierarchy&&this.layout.updateLayout(),this.changedState()}}},a._createIndicator=function(t){var e=new _;e.layer=this.node.layer;var i=e.addComponent(L);i.spriteFrame=this.spriteFrame,i.sizeMode=L.SizeMode.CUSTOM,e.parent=this.node;var n=e.getComponent(v);if(n.setContentSize(this.cellSize),this.indicatorMode==ce.Button){var r=e.getComponent(S)||e.addComponent(S),a=new k;a.component="Indicator",a.handler="_click",a.target=this.node,a.customEventData=t,r.clickEvents.push(a)}return n},a._click=function(t,e){this.adapter.pageViewManager.scrollToPage(this.adapter.pageViewManager.pageTurningSpeed,e)},a.changedState=function(){var t=this._indicators;if(0!==t.length&&this.adapter){var e=this.adapter.pageViewManager.currentIndex;if(!(e>=t.length)){for(var i=0;i<t.length;++i){var n=t[i].getComponent(L);this._color.set(n.color),this._color.a=127.5,n.color=this._color}if(t[e]){var r=t[e].getComponent(L);this._color.set(r.color),this._color.a=255,r.color=this._color}}}},u(r,[{key:"layout",get:function(){return null==this._layout&&(this._layout=this.getComponent(G)||this.addComponent(G),this.adapter.isHorizontal?(this._layout.type=G.Type.HORIZONTAL,this._layout.spacingX=this.spacing):(this._layout.type=G.Type.VERTICAL,this._layout.spacingY=this.spacing),this._layout.resizeMode=G.ResizeMode.CONTAINER),this._layout}}]),r}(E)).prototype,"adapter",[Kr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ta=t(qr.prototype,"spriteFrame",[Xr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ea=t(qr.prototype,"indicatorMode",[Jr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return ce.Normal}}),ia=t(qr.prototype,"cellSize",[Za],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new w(10,10)}}),na=t(qr.prototype,"spacing",[Za],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),Qr=qr));d._RF.pop(),d._RF.push({},"e7832mHcjNK2r9z66HM2mwU","Scrollbar",void 0);var Ka,Xa=p.ccclass,Ja=p.property,Qa=new g;oa=Xa("Scrollbar"),sa=Ja(Wr),la=Ja(L),ha=Ja({type:se,tooltip:"滚动方向"}),ca=Ja({tooltip:"开启后会允许用户滑动进度条"}),ua=Ja({range:[0,1],slide:!0,step:.001,visible:function(){return this.interactable},tooltip:"可拖拽的最小限制，默认=0不限制,仅当你开启了循环,并且你的item会实时修改主轴尺寸时,那么你应该适当限制拖拽区域"}),da=Ja({range:[0,1],slide:!0,step:.001,visible:function(){return this.interactable},tooltip:"可拖拽的最大限制，默认=1不限制,仅当你开启了循环,并且你的item会实时修改主轴尺寸时,那么你应该适当限制拖拽区域"}),pa=Ja({type:ue}),_a=Ja({type:ue,visible:function(){return this.interactable}}),ga=Ja({type:L,visible:function(){return this.transition!=ue.None&&this.interactable}}),fa=Ja({type:V,visible:function(){return this.transition==ue.SpriteSwap&&this.interactable}}),va=Ja({type:V,visible:function(){return this.transition==ue.SpriteSwap&&this.interactable}}),ma=Ja({visible:function(){return this.transition==ue.ColorTint&&this.interactable}}),ya=Ja({visible:function(){return this.transition==ue.ColorTint&&this.interactable}}),xa=Ja({visible:function(){return this.transition==ue.Scale&&this.interactable}}),ba=Ja({visible:function(){return this.transition==ue.Scale&&this.interactable}}),Sa=Ja({visible:function(){return this.transition==ue.Scale||this.transition==ue.ColorTint&&this.interactable}}),Aa=Ja({range:[0,11],slide:!0,step:1,tooltip:"用于进度的步数。值为 < 2 将禁用"}),Ea=Ja({tooltip:"开启后会在滚动条无更新时自动隐藏"}),wa=Ja({visible:function(){return this.enableAutoHide},tooltip:"自动隐藏滚动条的时间"}),oa((za=t((Ta=function(t){function r(){for(var e,r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a))||this,i(e,"adapter",za,n(e)),i(e,"handle",La,n(e)),i(e,"direction",Ca,n(e)),i(e,"interactable",Oa,n(e)),i(e,"dragMinLimit",Ha,n(e)),i(e,"dragMaxLimit",Pa,n(e)),i(e,"_transition",Na,n(e)),i(e,"targetGraphic",Ia,n(e)),i(e,"hoverSprite",Ra,n(e)),i(e,"pressedSprite",Da,n(e)),i(e,"hoverColor",Fa,n(e)),i(e,"pressedColor",Va,n(e)),i(e,"hoverScale",ka,n(e)),i(e,"pressedScale",Ga,n(e)),i(e,"transitionDuration",Ua,n(e)),i(e,"numberOfSteps",Ba,n(e)),i(e,"enableAutoHide",Wa,n(e)),i(e,"autoHideTime",ja,n(e)),e._transitionInfo=void 0,e._targetEnter=void 0,e._targetStart=void 0,e._isDirty=!1,e._transform=void 0,e._handleTransform=void 0,e._size=0,e._value=-1,e._pointerEvent=void 0,e._offset=void 0,e._isHide=void 0,e._opacity=255,e._autoHideRemainingTime=void 0,e._rawTargetScale=void 0,e._rawTargetFrame=void 0,e._rawTargetColor=void 0,e}e(r,t);var a=r.prototype;return a.__preload=function(){this.transform.setAnchorPoint(.5,.5),this.handleTransform.setAnchorPoint(.5,.5),this.handle.node.setPosition(0,0),this.adapter&&(this.adapter.scrollManager.on(Hn.Event.ON_UPDATE_PERCENTAGE,this._onUpdateScrollbar,this),this._updateVisuals()),this.targetGraphic&&(this._rawTargetScale=this.targetGraphic.node.getScale().clone(),this._rawTargetFrame=this.targetGraphic.spriteFrame,this._rawTargetColor=this.targetGraphic.color.clone()),this._openAutoHide(!0)},a.onEnable=function(){var t=this.node.getComponent(L);t&&(this._opacity=t.color.a),this.adapter&&(this.node[Cn]=!0,this.node.on(_.EventType.TOUCH_START,this._onTouchStart,this),this.node.on(_.EventType.TOUCH_MOVE,this._onTouchMove,this),this.node.on(_.EventType.TOUCH_END,this._onTouchEnd,this),this.node.on(_.EventType.TOUCH_CANCEL,this._onTouchEnd,this),this.node.on(_.EventType.MOUSE_ENTER,this._mouseEnter,this),this.node.on(_.EventType.MOUSE_LEAVE,this._mouseLeave,this),this.targetGraphic&&(this.targetGraphic.node.on(_.EventType.MOUSE_ENTER,this._targetMouseEnter,this),this.targetGraphic.node.on(_.EventType.MOUSE_LEAVE,this._targetMouseLeave,this)))},a.onDisable=function(){this.node.off(_.EventType.TOUCH_START,this._onTouchStart,this),this.node.off(_.EventType.TOUCH_MOVE,this._onTouchMove,this),this.node.off(_.EventType.TOUCH_END,this._onTouchEnd,this),this.node.off(_.EventType.TOUCH_CANCEL,this._onTouchEnd,this),this.node.off(_.EventType.MOUSE_ENTER,this._mouseEnter,this),this.node.off(_.EventType.MOUSE_LEAVE,this._mouseLeave,this),this.targetGraphic&&(this.targetGraphic.node.off(_.EventType.MOUSE_ENTER,this._targetMouseEnter,this),this.targetGraphic.node.off(_.EventType.MOUSE_LEAVE,this._targetMouseLeave,this))},a._targetMouseEnter=function(){switch(this._targetEnter=!0,this._openAutoHide(!1),this.transition){case ue.Scale:this._transitionScale(this._targetStart?this.pressedScale:this.hoverScale);break;case ue.SpriteSwap:this._transitionSprite(this._targetStart?this.pressedSprite:this.hoverSprite);break;case ue.ColorTint:this._transitionColor(this._targetStart?this.pressedColor:this.hoverColor)}},a._targetMouseLeave=function(){switch(this._targetEnter=!1,this._openAutoHide(!0),this.transition){case ue.Scale:this._transitionScale(this._targetStart?this.pressedScale:this._rawTargetScale);break;case ue.SpriteSwap:this._transitionSprite(this._targetStart?this.pressedSprite:this._rawTargetFrame);break;case ue.ColorTint:this._transitionColor(this._targetStart?this.pressedColor:this._rawTargetColor)}},a._transitionScale=function(t){t&&this.targetGraphic&&(this._transitionInfo={time:0,from:this.targetGraphic.node.getScale().clone(),to:t})},a._transitionColor=function(t){t&&this.targetGraphic&&(this._transitionInfo={time:0,from:this.targetGraphic.color,to:t})},a._transitionSprite=function(t){t&&this.targetGraphic&&(this.targetGraphic.spriteFrame=t)},a._mouseEnter=function(t){this.interactable&&this._openAutoHide(!1)},a._mouseLeave=function(t){this.interactable&&this._openAutoHide(!0)},a._openAutoHide=function(t){this.enableAutoHide&&(this._autoHideRemainingTime=this.autoHideTime,this._isHide=t,t||this._setOpacity(this._opacity))},a._onTouchStart=function(t){if(this.interactable&&1!=this.size&&0!=this.size){this._openAutoHide(!1),this._pointerEvent=null,this._targetStart=!0;var e=t.getUIStartLocation();if(this._offset=this.handleTransform.convertToNodeSpaceAR(F(e.x,e.y)),Math.abs(this._offset[this.xy])>.5*this.handleTransform[this.wh]){this._offset=null,this._pointerEvent=t;var i=this._calcPercentage(t);this._setPercentage(i)}this.transition==ue.Scale?this._transitionScale(this.pressedScale):this.transition==ue.SpriteSwap?this._transitionSprite(this.pressedSprite):this.transition==ue.ColorTint&&this._transitionColor(this.pressedColor)}},a._onTouchMove=function(t){if(this.interactable&&1!=this.size&&0!=this.size&&this._offset){var e=this._calcPercentage(t,this._offset[this.xy]);this._setPercentage(e)}},a._onTouchEnd=function(t){if(this.interactable&&1!=this.size&&0!=this.size){switch(this._offset=null,this._pointerEvent=null,this._targetStart=!1,this.transition){case ue.Scale:this._transitionScale(this._targetEnter?this.hoverScale:this._rawTargetScale);break;case ue.SpriteSwap:this._transitionSprite(this._targetEnter?this.hoverSprite:this._rawTargetFrame);break;case ue.ColorTint:this._transitionColor(this._targetEnter?this.hoverColor:this._rawTargetColor)}this.adapter.centerManager.scrollToCenter()}},a._setPercentage=function(t){this.adapter.scrollManager.stopScroll(),this.adapter.scrollManager.setPercentage(t)},a._calcPercentage=function(t,e){void 0===e&&(e=0);var i=(this.axis==Qt.Horizontal?this.transform.width:this.transform.height)*(1-this.size),n=t.getUILocation(),r=this.transform.convertToNodeSpaceAR(F(n.x,n.y))[this.xy]-e-.5*-this.transform[this.wh];r-=.5*this.handleTransform[this.wh];var a=this.adapter.scrollManager.percentage;switch(this.direction){case se.Right_To_Left:case se.Top_To_Bottom:a=ve.clamp(1-r/i,this.dragMinLimit,this.dragMaxLimit);break;case se.Left_To_Right:case se.Bottom_To_Top:a=ve.clamp(r/i,this.dragMinLimit,this.dragMaxLimit)}return this.getSteps(a)},a._onUpdateScrollbar=function(t,e){var i=0,n=0;this.adapter.viewManager.virtualSize>0&&(i=this.adapter.viewManager.virtualSize>=this.adapter.mainAxisSize?ve.clamp01((this.adapter.mainAxisSize-Math.abs(e))/this.adapter.viewManager.virtualSize):1),n=t,this.size=i,this.numberOfSteps>1&&(n=Math.round(n*(this.numberOfSteps-1))/(this.numberOfSteps-1),n=ve.clamp01(n)),this.value=n,this._autoHideRemainingTime=this.autoHideTime,this._setOpacity(this._opacity)},a._updateVisuals=function(){if(this.handleTransform&&this.adapter){var t={x:0,y:0},e={x:0,y:0},i=this.adapter.mainAxis,n=ve.clamp01(this.value)*(1-this.size);t[i]=n,e[i]=n+this.size;var r=this.transform.contentSize[this.wh]-e[i]*this.transform.contentSize[this.wh],a=t[i]*this.transform.contentSize[this.wh],o=this.handle.node.getPosition();switch(this.direction){case se.Bottom_To_Top:case se.Left_To_Right:o[this.xy]=.5*(a-r);break;case se.Top_To_Bottom:case se.Right_To_Left:o[this.xy]=.5*(r-a)}this.handleTransform[this.wh]=this.transform.contentSize[this.wh]-r-a,this.handle.node.setPosition(o)}},a.update=function(t){this._clearDirty(),this._autoHide(t),this._tranitionHandler(t)},a._clearDirty=function(){if(this._isDirty&&(this._isDirty=!1,this._updateVisuals(),this._pointerEvent)){var t=this._pointerEvent.getUILocation();this._offset=this.handleTransform.convertToNodeSpaceAR(F(t.x,t.y)),this._pointerEvent=null}},a._autoHide=function(t){if(this.enableAutoHide&&this._isHide&&!(this._autoHideRemainingTime<=0)&&(this._autoHideRemainingTime-=t,this._autoHideRemainingTime<=this.autoHideTime)){this._autoHideRemainingTime=Math.max(0,this._autoHideRemainingTime);var e=this._opacity*(this._autoHideRemainingTime/this.autoHideTime);this._setOpacity(e)}},a._tranitionHandler=function(t){var e=this.targetGraphic;if(this.transition!=ue.None&&e&&this._transitionInfo){this._transitionInfo.time+=t;var i=1;if(this.transitionDuration>0&&(i=this._transitionInfo.time/this.transitionDuration),i>=1&&(i=1),this.transition==ue.Scale){this._transitionInfo.current=e.node.getScale();var n=this._transitionInfo.from,r=this._transitionInfo.to;this._transitionInfo.current.x=ve.lerp(n.x,r.x,i),this._transitionInfo.current.y=ve.lerp(n.y,r.y,i),e.node.setScale(this._transitionInfo.current)}else if(this.transition==ue.ColorTint){var a=this._transitionInfo.from,o=this._transitionInfo.to;g.lerp(Qa,a,o,i),e.color=Qa}1===i&&(this._transitionInfo=null)}},a._setOpacity=function(t){if(this.handle){var e=function(e){e&&(Qa.set(e.color),Qa.a=t,e.color=Qa)};e(this.node.getComponent(L)),e(this.handle.getComponent(L))}},a.getSteps=function(t){return this.numberOfSteps>1&&(t=Math.round(t*(this.numberOfSteps-1))/(this.numberOfSteps-1),t=ve.clamp(t,this.dragMinLimit,this.dragMaxLimit)),t},u(r,[{key:"transition",get:function(){return this._transition},set:function(t){t!=this._transition&&(this._transition=t,t!=ue.None&&(this.targetGraphic||(this.targetGraphic=this.handle)))}},{key:"size",get:function(){return this._size},set:function(t){t!=this._size&&(this._size=ve.clamp(t,.01,1),this._isDirty=!0)}},{key:"value",get:function(){return this._value},set:function(t){t!=this._value&&(this._value=this.getSteps(t),this._isDirty=!0)}},{key:"stepSize",get:function(){return this.numberOfSteps>1?1/(this.numberOfSteps-1):.1}},{key:"transform",get:function(){return this._transform||(this._transform=this.node.getComponent(v)),this._transform}},{key:"handleTransform",get:function(){return this.handle?(this._handleTransform||(this._handleTransform=this.handle.node.getComponent(v)),this._handleTransform):null}},{key:"xy",get:function(){return this.axis==Qt.Horizontal?"x":"y"}},{key:"wh",get:function(){return this.axis==Qt.Horizontal?"width":"height"}},{key:"axis",get:function(){return this.direction==se.Left_To_Right||this.direction==se.Right_To_Left?Qt.Horizontal:Qt.Vertical}}]),r}(E)).prototype,"adapter",[sa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),La=t(Ta.prototype,"handle",[la],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ca=t(Ta.prototype,"direction",[ha],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return se.Top_To_Bottom}}),Oa=t(Ta.prototype,"interactable",[ca],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Ha=t(Ta.prototype,"dragMinLimit",[ua],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Pa=t(Ta.prototype,"dragMaxLimit",[da],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),Na=t(Ta.prototype,"_transition",[pa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return ue.None}}),t(Ta.prototype,"transition",[_a],Object.getOwnPropertyDescriptor(Ta.prototype,"transition"),Ta.prototype),Ia=t(Ta.prototype,"targetGraphic",[ga],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ra=t(Ta.prototype,"hoverSprite",[fa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Da=t(Ta.prototype,"pressedSprite",[va],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Fa=t(Ta.prototype,"hoverColor",[ma],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return g.WHITE.clone()}}),Va=t(Ta.prototype,"pressedColor",[ya],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new g(211,211,211,255)}}),ka=t(Ta.prototype,"hoverScale",[xa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new U(1,1)}}),Ga=t(Ta.prototype,"pressedScale",[ba],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new U(1.2,1.2)}}),Ua=t(Ta.prototype,"transitionDuration",[Sa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.2}}),Ba=t(Ta.prototype,"numberOfSteps",[Aa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Wa=t(Ta.prototype,"enableAutoHide",[Ea],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ja=t(Ta.prototype,"autoHideTime",[wa],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),Ma=Ta));d._RF.pop(),d._RF.push({},"3d52dVTlbBOz7Wijt15IBJI","interface",void 0),d._RF.pop(),d._RF.push({},"d2e06QKEJVKvqqR4LDh3FyM","index",void 0),function(t){var e=function(t){return t.ON_CENTER_NODE_CHANGED="on:center:node:changed",t}({});t.Event=e;t.CACHE_LOCAL_POSITION_KEY="BowLayout_LocalPosition",t.CACHE_POSITION_KEY="BowLayout_Position",t.CACHE_SCALE_KEY="BowLayout_Scale",t.CACHE_ANGLE_KEY="BowLayout_Angle",t.CACHE_CENTER_KEY="BowLayout_Center";var i=function(t){return t[t.Horizontal=0]="Horizontal",t[t.Vertical=1]="Vertical",t}({});t.Direction=i;var n=function(t){return t[t.Position=0]="Position",t[t.Angle=1]="Angle",t[t.Scale=2]="Scale",t[t.Opacity=3]="Opacity",t[t.Spacing=4]="Spacing",t}({});t.PluginType=n;t.IPlugin=function(t,e){this._params=void 0,this._bowLayout=t,this.initParams(e)};t.IPostPlugin=function(t,e){this._params=void 0,this._bowLayout=t,this.initParams(e)}}(Ka||(Ka={})),d._RF.pop(),d._RF.push({},"3975953SiVJa5rHe582Errs","AnglePlugin",void 0);Ka.IPlugin;d._RF.pop(),d._RF.push({},"cc976j/8FVPdb6Rp/goFZ5H","OpacityPlugin",void 0);Ka.IPlugin;d._RF.pop(),d._RF.push({},"30a53LXfF1B/ZpXqgbCLy1p","PositionPlugin",void 0);Ka.IPlugin;d._RF.pop(),d._RF.push({},"b355bnYG5xJuqcmWJcy0ChQ","ScalePlugin",void 0);Ka.IPlugin;d._RF.pop(),d._RF.push({},"a3ff6c4cwhJ9479JuflOYCg","SpacingPlugin",void 0);Ka.IPostPlugin;d._RF.pop(),d._RF.push({},"b1cd2zMEz1M84sy/WbjMNZ3","PluginFactory",void 0),d._RF.pop(),d._RF.push({},"f63560RvxRE74CnsB66h7b1","BowLayout",void 0),d._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///main.js'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});