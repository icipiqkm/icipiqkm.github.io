System.register([], function(_export, _context) { return { execute: function () {
System.register("chunks:///AudioManager-da424cd3.js",["./BaseModule-8a96da91.js","cc"],(function(e){var t,n,o,r,s,i,c,u,a,l,d,h,f,_,p,b,m,v,y,g,k,E,x,M,w,S,P;return{setters:[function(e){t=e.T,n=e.a,o=e.D,r=e.N,s=e.P,i=e.g,c=e.B,u=e.j,a=e.M,l=e.F,d=e.d,h=e.e,f=e.k,_=e.h,p=e.L,b=e.l},function(e){m=e.cclegacy,v=e._decorator,y=e.js,g=e.v3,k=e.Vec3,E=e.Tween,x=e.tween,M=e.AudioClip,w=e.Node,S=e.AudioSource,P=e.Component}],execute:function(){m._RF.push({},"7851dT82fJD8IGsYPBVRpB7","Broadcaster",void 0);var C=function(){function e(){this._subscribers=new Map}var t=e.prototype;return t.subscribe=function(e,t,n){this._subscribers.has(e)||this._subscribers.set(e,[]);var o=this._subscribers.get(e);-1===o.indexOf({callback:t,context:n})&&o.push({callback:t,context:n})},t.broadcast=function(e,t){this._subscribers.has(e)&&this._subscribers.get(e).forEach((function(n){n.callback.call(n.context,e,t)}))},t.unsubscribe=function(e,t,n){if(this._subscribers.has(e))for(var o=this._subscribers.get(e),r=o.length-1;r>=0;r--)o[r].callback===t&&o[r].context===n&&o.splice(r,1)},t.unsubscribeContext=function(e){this._subscribers.forEach((function(t){for(var n=t.length-1;n>=0;n--)t[n].context===e&&t.splice(n,1)}))},e}();m._RF.pop(),m._RF.push({},"5d609UeAalE17JdZc7k1ePk","DefinePropertyInterceptor",void 0);var I=function(){function e(){this._broadcaster=null,this._broadcaster=new C}var n=e.prototype;return n.unsubscribe=function(e,t,n){this._broadcaster.unsubscribe(e,t,n)},n.unsubscribeContext=function(e){this._broadcaster.unsubscribeContext(e)},n.subscribe=function(e,t,n){this._broadcaster.subscribe(e,t,n)},n.broadcast=function(e,t){this._broadcaster.broadcast(e,t)},n.intercept=function(e,n){var o=this;return(n=[].concat(n)).forEach((function(n){var r=t.getDescriptor(e,n),s=e[n],i=r&&r.get?r.get:null,c=r&&r.set?r.set:null,u=function(){return i?i.call(e):s},a=function(t){s!==t&&(c?c.call(e,t):s=t,o.broadcast(n,t))};r?(r.get=u,r.set=a):(r={get:u,set:a},Object.defineProperty(e,n,r))})),e},e}();m._RF.pop(),m._RF.push({},"f2aeeuXcS1DNrocTU3GIckh","ProxyInterceptor",void 0);var L=function(){function e(){this._broadcaster=void 0,this._broadcaster=new C}var t=e.prototype;return t.unsubscribe=function(e,t,n){},t.unsubscribeContext=function(e){},t.intercept=function(e,t){return new Proxy(e,{get:function(e,n,o){return(Array.isArray(t)?-1!==t.indexOf(n):n===t)&&console.warn("Property",n,"was accessed."),Reflect.get(e,n,o)}})},t.subscribe=function(e,t,n){this._broadcaster.subscribe(e,t,n)},t.broadcast=function(e,t){this._broadcaster.broadcast(e,t)},e}();m._RF.pop(),m._RF.push({},"523896WxOBLGpSogjCkSy77","InterceptorFactory",void 0);var R,T=function(){function e(){}return e.createInterceptor=function(e){switch(e){case"defineProperty":return new I;case"proxy":return new L;default:throw new Error("Interceptor type "+e+" is not supported.")}},e}();m._RF.pop(),m._RF.push({},"b2e99o50qdF1bI5h6DdyoOx","BaseModel",void 0);var A,D=v.ccclass;v.property,e("B",D("BaseModel")(R=function(e){function t(){var t;return(t=e.call(this)||this)._module=null,t._interceptor=void 0,t._mutables=void 0,t._onLoad(),t._onDestroy(),t}n(t,e);var c=t.prototype;return c._onLoad=function(){var e=this,t=this.onLoad;this.onLoad=function(){e._module=e.node.module,e._interceptor=T.createInterceptor("defineProperty"),e._mutables=e.constructor[o.MUTABLES_KEY]||[],e._interceptor.intercept(e,e._mutables),e._listener(),e.callFuncIsExist(t)}},c._onDestroy=function(){var e=this,t=this.onDestroy;this.onDestroy=function(){var n;r.instance.offContext(e),null==(n=e.module)||n.notify.offContext(e),e._interceptor.unsubscribeContext(e),s.cancel(e),e.callFuncIsExist(t)}},c._listener=function(){var e=this,t=this.constructor[o.GLOBAL_LISTENERS_KEY]||[];t.forEach((function(t){var n=e[t.key];"function"==typeof n&&r.instance.on(t.event,n,e,t.once)})),this.module&&(t=this.constructor[o.MODULE_LISTENERS_KEY]||[]).forEach((function(t){var n=e[t.key];"function"==typeof n&&e.module.notify.on(t.event,n,e,t.once)}))},c.hasMutable=function(e){return-1!==this._mutables.indexOf(e)},c.subscribe=function(e,t,n){return this._interceptor?-1===this._mutables.indexOf(e)?console.log("this._mutables.indexOf(prop) === -1"):(this._interceptor.subscribe(e,t,n),void this._interceptor.broadcast(e,this[e])):console.log("this._interceptor is null")},c.unsubscribeContext=function(e){this._interceptor.unsubscribeContext(e)},i(t,[{key:"module",get:function(){return this._module}}]),t}(c))||R);m._RF.pop(),m._RF.push({},"6d8c43qWyVAzoZR3Ycn4Knh","BaseViewModel",void 0);var F=v.ccclass,N=(v.property,"_VALUE$");e("a",F("BaseViewModel")(A=function(e){n(l,e);var c=l.prototype;function l(){var t;return(t=e.call(this)||this)._model=void 0,t._module=null,t._interceptor=void 0,t._broadcaster=void 0,t._bindables=void 0,t._injects=void 0,t._injectModels=void 0,t._mutables=void 0,t._onLoad(),t._onDestroy(),t}return c.getPropKey=function(e){return"function"==typeof this[e]?e+N:e},c.bind=function(e,t,n){if(e&&t&&"function"==typeof t&&n)return-1!==this._bindables.indexOf(e)||-1!==this._injects.indexOf(e)?(this._broadcaster.subscribe(e,t,n),void t(e,this[this.getPropKey(e)])):-1!==this._mutables.indexOf(e)?(this._interceptor.subscribe(e,t,n),void t(e,this[this.getPropKey(e)])):void 0},c._onLoad=function(){var e=this,t=this.onLoad;this.onLoad=function(){e._module=e.node.module,e._interceptor=T.createInterceptor("defineProperty"),e._mutables=e.constructor[o.MUTABLES_KEY]||[],e._interceptor.intercept(e,e._mutables),e._broadcaster=new C,e._injectModels=new Map,e.module&&(e._model=e.module.getModel(e.constructor[o.MODEL_KEY]),e._subscribeModel(),e._injectHandler()),e._listener(),e.callFuncIsExist(t)}},c._onDestroy=function(){var e=this,t=this.onDestroy;this.onDestroy=function(){for(var n,o,i=u(e._injectModels.values());!(o=i()).done;){o.value.unsubscribeContext(e)}r.instance.offContext(e),null==(n=e.module)||n.notify.offContext(e),e._broadcaster.unsubscribeContext(e),e._interceptor.unsubscribeContext(e),s.cancel(e),e.callFuncIsExist(t)}},c._listener=function(){var e=this,t=this.constructor[o.GLOBAL_LISTENERS_KEY]||[];t.forEach((function(t){var n=e[t.key];"function"==typeof n&&r.instance.on(t.event,n,e,t.once)})),this.module&&(t=this.constructor[o.MODULE_LISTENERS_KEY]||[]).forEach((function(t){var n=e[t.key];"function"==typeof n&&e.module.notify.on(t.event,n,e,t.once)}))},c._subscribeModel=function(){var e=this;if(!this._model)return console.warn(y.getClassName(this),"未指定 model");this._bindables=this.constructor[o.BINDABLES_KEY]||[],this._bindables.forEach((function(t){e._model.hasMutable(t)?e._subscribeAndDefineProperty(e._model,t):console.warn("模型 "+e._model.constructor.name+" 没有可变的 "+t)}))},c._injectHandler=function(){var e=this;this._injects=[],(this.constructor[o.INJECTS_KEY]||[]).forEach((function(t){var n=t.module,o=t.model,r=t.prop,s=a.instance.get(n);if(s){var i=s.getModel(o);i?i.hasMutable(r)?(e._injects.push(r),e._injectModels.set(o.uuid,i),e._subscribeAndDefineProperty(i,r)):console.error("模型 "+o+" 没有可变的 "+r):console.error("模型 "+o+" 不存在")}else console.error("模块 "+n+" 不存在")}))},c._subscribeAndDefineProperty=function(e,n){var o=this,r=null,s=n;"function"!=typeof this[n]?r=t.getDescriptor(this,n):s+=N,this._defineProperty(r,s,n,e),e.subscribe(n,(function(e,t){r&&r.set?r.set.call(o,t):"function"==typeof o[e]&&o[e](t),o._broadcaster.broadcast(e,t)}),this)},c._defineProperty=function(e,t,n,o){var r=this;Object.defineProperty(this,t,{get:function(){return e&&e.get?e.get.call(r):o[n]},set:function(e){console.warn("试图修改model的属性"+t+"，请使用model的方法修改")},configurable:!0})},i(l,[{key:"module",get:function(){return this._module}},{key:"model",get:function(){return this._model}}]),l}(c))||A);m._RF.pop(),m._RF.push({},"383c5mNVaJPjKCv9iHgIGzK","Mathf",void 0);var O=e("M",function(){function e(){}return e.getRandomInt=function(e,t,n){var o;do{o=Math.floor(Math.random()*(n-t+1))+t}while(o===e);return o},e.clamp=function(e,t,n){return Math.min(Math.max(e,t),n)},e.clamp01=function(e){return this.clamp(e,0,1)},e.progress=function(e,t,n,o){return e+(t-e)*o},e.calculateBezierPoint=function(e,t,n,o){var r=this.degreesToRadians(n.x),s=this.degreesToRadians(n.y),i=(t.x+e.x)*Math.sin(r)+o.x,c=(t.y+e.y)*Math.cos(s)+o.y;return[e,g(i,c,0),t]},e.calculateThirdPointByOffset=function(e,t,n,o){void 0===o&&(o=.5);var r=e.clone().lerp(t,o),s=t.clone().subtract(e).normalize(),i=new k(-s.y,s.x,0);return r.clone().add(i.multiplyScalar(n))},e.calculateThirdPointByAngle=function(e,t,n,o){void 0===o&&(o=.5);var r=e.clone().lerp(t,o),s=t.clone().subtract(e).normalize(),i=new k(-s.y,s.x,0),c=k.distance(e,t)*Math.tan(this.degreesToRadians(n));return r.clone().add(i.multiplyScalar(c))},e.degreesToRadians=function(e){return e*Math.PI/180},e.calculateAngle=function(e,t){var n={x:t.x-e.x,y:t.y-e.y},o=Math.atan2(n.y,n.x),r=this.radiansToDegrees(o);return r<0?360+r:360-r},e.radiansToDegrees=function(e){return e*(180/Math.PI)},e.toDecimalWithPrecision=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Both value and precision must be valid numbers.");var n=Math.pow(10,t);return Math.round(e*n)/n},e}());m._RF.pop();var B=["module","key","path"],j=["module","key","path"];m._RF.push({},"9340c0ViRRCJoAL3+gEze/p","AudioManager",void 0);var K="sandbox:music:volume",V="sandbox:sound:volume",Y=function(e){function o(){for(var t,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(t=e.call.apply(e,[this].concat(o))||this)._source=void 0,t._seek=null,t._onEndedCallback=null,t}n(o,e);var r=o.prototype;return r.onLoad=function(){this._source=this.node.addComponent(S),this._source.node.on(S.EventType.ENDED,this._onEnded,this),this._source.playOnAwake=!1,this._source.loop=!1,this._source.volume=1},r.init=function(e,t){return this.clear(),this._source.clip=e,this._source.loop=!!t.music||t.loop,t.music||(this._source.volume=U.instance.soundVolume),t.seek&&(this._seek={from:"string"==typeof t.seek.from?this._convertToSeconds(t.seek.from):t.seek.from,to:"string"==typeof t.seek.to?this._convertToSeconds(t.seek.to):t.seek.to},this._seek.from>this._seek.to&&(console.error("Sound: from > to"),this._seek=null)),this},r.onEnded=function(e){return this._onEndedCallback=e,this},r.play=function(){var e=d(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._seek){e.next=3;break}return this._playSeek(),e.abrupt("return");case 3:this._source.play();case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),r.clear=function(){this._source.stop(),this.unscheduleAllCallbacks(),this._source.clip=null,this._seek=null,this._onEndedCallback=null},r._playSeek=function(){var e=d(h().mark((function e(){var t,n=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._seek){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this._fromTime(this._seek.from);case 4:t=function e(){if(!n._seek)return n.unschedule(e);n._source.currentTime>=n._seek.to&&(n.unschedule(e),n._source.loop?(n._source.pause(),n._playSeek()):(n._source.stop(),n._callEnded()))},this._source.play(),this.schedule(t);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),r._fromTime=function(e){var t=this;return new Promise((function(n){t._source.currentTime=e;t.schedule((function o(){if(t._source.currentTime==e)return t.unschedule(o),n()}))}))},r._onEnded=function(){this._callEnded()},r._callEnded=function(){t.isFunction(this._onEndedCallback)&&(this._onEndedCallback(),this._onEndedCallback=null)},r._convertToSeconds=function(e){if(!/^\d+:\d{1,2}:\d{1,2}(:\d{1,2})?$/.test(e))return 0;var t=e.split(":").map(Number);return(86400*t[0]+3600*t[1]+60*t[2]+(t[3]||0))/60},i(o,[{key:"source",get:function(){return this._source}},{key:"seek",get:function(){return this._seek}}]),o}(P),U=e("A",function(){function e(){this._soundParent=null,this._music=null,this._soundMap=void 0,this._cacheSound=void 0,this._isLock=!1,this._soundParent=new w("__SOUND_PARENT__"),this._soundParent.parent=p.instance.getLayer(b.Lowest),this._music=new w("__MUSIC__").addComponent(Y),this._music.node.parent=this._soundParent,this._music.source.volume=this.musicVolume,this._soundMap=new Map,this._cacheSound=[]}var t=e.prototype;return t.switchEnable=function(){this.switchMusic(),this.switchSound()},t.switchMusic=function(){var e=!this.musicEnabled;this.musicVolume=e?1:0,r.instance.emit(l.Event.OnMusicSwitched,e)},t.switchSound=function(){var e=!this.soundEnabled;this.soundVolume=e?1:0,r.instance.emit(l.Event.OnSoundSwitched,e)},t.lock=function(e){this._isLock=e},t.play=function(e,t){var n=this;return new Promise(d(h().mark((function o(r){var s,i,c,u;return h().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(!n._isLock){o.next=2;break}return o.abrupt("return",r());case 2:return o.next=4,n._loadClip(e);case 4:if(s=o.sent,i=n._parseOptions(e,t),c=n._generateKey(e),s){o.next=9;break}return o.abrupt("return",r());case 9:if(!i.music){o.next=12;break}return n._music.init(s,i).play(),o.abrupt("return",r());case 12:if(!i.unqiue||!n._soundMap.has(c)){o.next=14;break}return o.abrupt("return",r());case 14:u=n._getSound(),n._soundMap.set(c,u),u.init(s,i).onEnded((function(){u.clear(),n._soundMap.delete(c),n._cacheSound.push(u),r()})).play();case 17:case"end":return o.stop()}}),o)}))))},t.stopMusic=function(){this._music.clear()},t.fadeOutMusic=function(e){var t=this;return void 0===e&&(e=.5),new Promise((function(n){E.stopAllByTarget(t._music.source),x(t._music.source).to(e,{volume:0}).call(n).start()}))},t.fadeInMusic=function(e){var t=this;return void 0===e&&(e=.5),new Promise((function(n){E.stopAllByTarget(t._music.source),x(t._music.source).to(e,{volume:t.musicVolume}).call(n).start()}))},t.pauseMusic=function(){this._music.source&&(this._music.source.volume=0)},t.resumeMusic=function(){this._music.source&&(this._music.source.volume=this.musicVolume)},t.stop=function(e){if(e){var t=this._generateKey(e),n=this._soundMap.get(t);n?(n.clear(),this._soundMap.delete(t),this._cacheSound.push(n)):console.error("停止失败，找不到")}},t._loadClip=function(e){return new Promise((function(t){if(e instanceof M)return t(e);var n=a.instance.get(e.module);return n&&(e.path||e.key)?void(e.path?n.bundle.load(e.path,M).then((function(e){t(e)})).catch((function(e){return console.error(e)})):e.key&&n.i18n.getAudioClip(e.key).then((function(e){t(e)})).catch((function(e){return console.error(e)}))):t(null)}))},t._parseOptions=function(e,t){var n=e instanceof M?t:e,o=(n.module,n.key,n.path,f(n,B));return _({volume:1,loop:!1,unqiue:!1,seek:null},o)},t._generateKey=function(e){if(e instanceof M)return e.uuid;e.module;var t=e.key,n=e.path,o=f(e,j),r=""+(n||t);return o.seek&&(r+=":"+o.seek.from+":"+o.seek.to),r},t._getSound=function(){if(this._cacheSound.length>0)return this._cacheSound.pop();var e=new w("__SOUND__").addComponent(Y);return e.node.parent=this._soundParent,e},i(e,[{key:"musicEnabled",get:function(){var e=parseFloat(localStorage.getItem(K));return isNaN(e)||e>0}},{key:"soundEnabled",get:function(){var e=parseFloat(localStorage.getItem(V));return isNaN(e)||e>0}},{key:"soundVolume",get:function(){var e=parseFloat(localStorage.getItem(V));return isNaN(e)?1:e},set:function(e){e=O.clamp01(e),localStorage.setItem(V,e.toString()),r.instance.emit(l.Event.OnSoundVolumeChanged,e),this._soundMap.forEach((function(t){t.source.volume=e}))}},{key:"musicVolume",get:function(){var e=parseFloat(localStorage.getItem(K));return isNaN(e)?1:e},set:function(e){e=O.clamp01(e),localStorage.setItem(K,e.toString()),r.instance.emit(l.Event.OnMusicVolumeChanged,e),this._music.source.volume=e}}],[{key:"instance",get:function(){return e._instance||(e._instance=new e),e._instance}}]),e}());U._instance=null,cc.AudioManager=U,m._RF.pop()}}}));

System.register("chunks:///BaseModule-8a96da91.js",["cc"],(function(e){var t,n,r,o,i,a,s,c,u,l,h,f,p,d,_,g,v,y,m,w,b,E,L,x,M;return{setters:[function(e){t=e.cclegacy,n=e.resources,r=e.JsonAsset,o=e.native,i=e.assetManager,a=e._decorator,s=e.view,c=e.ResolutionPolicy,u=e.Component,l=e.Canvas,h=e.Widget,f=e.director,p=e.Director,d=e.Camera,_=e.Node,g=e.UITransform,v=e.js,y=e.SpriteFrame,m=e.Texture2D,w=e.AudioClip,b=e.sp,E=e.path,L=e.Font,x=e.instantiate,M=e.Prefab}],execute:function(){function k(){
/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */
k=e("e",(function(){return n}));var t,n={},r=Object.prototype,o=r.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},s=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(t){l=function(e,t,n){return e[t]=n}}function h(e,t,n,r){var o=t&&t.prototype instanceof v?t:v,a=Object.create(o.prototype),s=new A(r||[]);return i(a,"_invoke",{value:S(e,n,s)}),a}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}n.wrap=h;var p="suspendedStart",d="executing",_="completed",g={};function v(){}function y(){}function m(){}var w={};l(w,s,(function(){return this}));var b=Object.getPrototypeOf,E=b&&b(b(C([])));E&&E!==r&&o.call(E,s)&&(w=E);var L=m.prototype=v.prototype=Object.create(w);function x(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function M(e,t){function n(r,i,a,s){var c=f(e[r],e,i);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==typeof l&&o.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(l).then((function(e){u.value=e,a(u)}),(function(e){return n("throw",e,a,s)}))}s(c.arg)}var r;i(this,"_invoke",{value:function(e,o){function i(){return new t((function(t,r){n(e,o,t,r)}))}return r=r?r.then(i,i):i()}})}function S(e,n,r){var o=p;return function(i,a){if(o===d)throw new Error("Generator is already running");if(o===_){if("throw"===i)throw a;return{value:t,done:!0}}for(r.method=i,r.arg=a;;){var s=r.delegate;if(s){var c=R(s,r);if(c){if(c===g)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===p)throw o=_,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=d;var u=f(e,n,r);if("normal"===u.type){if(o=r.done?_:"suspendedYield",u.arg===g)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=_,r.method="throw",r.arg=u.arg)}}}function R(e,n){var r=n.method,o=e.iterator[r];if(o===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,R(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var i=f(o,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,g;var a=i.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,g):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function A(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function C(e){if(e||""===e){var n=e[s];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function n(){for(;++r<e.length;)if(o.call(e,r))return n.value=e[r],n.done=!1,n;return n.value=t,n.done=!0,n};return i.next=i}}throw new TypeError(typeof e+" is not iterable")}return y.prototype=m,i(L,"constructor",{value:m,configurable:!0}),i(m,"constructor",{value:y,configurable:!0}),y.displayName=l(m,u,"GeneratorFunction"),n.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},n.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,l(e,u,"GeneratorFunction")),e.prototype=Object.create(L),e},n.awrap=function(e){return{__await:e}},x(M.prototype),l(M.prototype,c,(function(){return this})),n.AsyncIterator=M,n.async=function(e,t,r,o,i){void 0===i&&(i=Promise);var a=new M(h(e,t,r,o),i);return n.isGeneratorFunction(t)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},x(L),l(L,u,"Generator"),l(L,s,(function(){return this})),l(L,"toString",(function(){return"[object Generator]"})),n.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},n.values=C,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var n in this)"t"===n.charAt(0)&&o.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function r(r,o){return s.type="throw",s.arg=e,n.next=r,o&&(n.method="next",n.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var c=o.call(a,"catchLoc"),u=o.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&o.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,g):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),O(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;O(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:C(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),g}},n}function S(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function R(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){S(i,r,o,a,s,"next",e)}function s(e){S(i,r,o,a,s,"throw",e)}a(void 0)}))}}function P(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,"symbol"==typeof(i=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"))?i:String(i)),r)}var o,i}function O(e,t,n){return t&&P(e.prototype,t),n&&P(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function A(){return(A=e("h",Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e})).apply(this,arguments)}function C(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,F(e,t)}function F(e,t){return(F=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function D(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return T(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?T(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}e({D:void 0,H:function(e){return function(t){var n="";n="string"==typeof e?e:v.getClassName(e),t.prototype.constructor[fe.ESSENTIAL_GAME_MODULE]=n}},I:function(e,t){return function(n,r,o){n.constructor[fe.INJECTS_KEY]||(n.constructor[fe.INJECTS_KEY]=[]),n.constructor[fe.INJECTS_KEY].push({module:e,model:t,prop:r})}},V:function(e,t){return function(n){var r="";if(r="string"==typeof e?e:v.getClassName(e),n.prototype.constructor[fe.MODULE_KEY]=r,t){var o="";o="string"==typeof t?t:v.getClassName(t),n.prototype.constructor[fe.VIEWMODEL_KEY]=o}}},_:function(e,t,n,r,o){var i={};Object.keys(r).forEach((function(e){i[e]=r[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0);i=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0);void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null);return i},a:C,b:function(e,t,n,r){if(!n)return;Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})},c:function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},d:R,e:k,g:O,h:A,j:D,k:function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o},m:void 0,o:function(e){return function(t){var n="";n="string"==typeof e?e:v.getClassName(e),t.prototype.constructor[fe.MODEL_KEY]=n}},q:void 0}),t._RF.push({},"d700cOCTrBA472dbuilCKsT","ConfigManager",void 0);var N=e("C",function(){function e(){this.isLoading=!1,this._data=null}var t=e.prototype;return t.initialized=function(){var e=R(k().mark((function e(){var t=this;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(R(k().mark((function e(n,r){var o,i;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t._data){e.next=2;break}return e.abrupt("return",n());case 2:if(!t.isLoading){e.next=5;break}return o=setInterval((function(){!t._data&&t.isLoading||(clearInterval(o),n())}),1),e.abrupt("return");case 5:t.isLoading=!0,i=null,e.prev=7,e.next=14;break;case 11:i=e.sent,e.next=23;break;case 14:e.next=20;break;case 17:i=e.sent,e.next=23;break;case 20:return e.next=22,t.loadBrowser();case 22:i=e.sent;case 23:i&&(t._data=i,t.isLoading=!1,n()),e.next=30;break;case 26:e.prev=26,e.t0=e.catch(7),r(e.t0),t.isLoading=!1;case 30:case"end":return e.stop()}}),e,null,[[7,26]])})))));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t.loadBrowser=function(){return new Promise((function(e,t){n.load("game",r,(function(n,r){if(n)return t(n);e(r.json)}))}))},t.loadNative=function(){return new Promise((function(e,t){var n="./game.json";if(!o.fileUtils.isFileExist(n))return t("找不到原始 "+n+" 配置文件");var r=o.fileUtils.getStringFromFile(n);e(JSON.parse(r))}))},t.loadEditor=function(){return new Promise(R(k().mark((function e(t,n){var o;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"db://assets/resources/game.json",e.next=3,globalThis.Editor.Message.request("asset-db","query-uuid","db://assets/resources/game.json");case 3:if(o=e.sent){e.next=6;break}return e.abrupt("return",n("加载game出错 game.json"));case 6:i.loadAny({uuid:o},{type:r},(function(e,n){if(e)return console.error(e);t(n.json)}));case 7:case"end":return e.stop()}}),e)}))))},t.clear=function(){this._data=null,this.isLoading=!1},O(e,[{key:"data",get:function(){return this._data}}],[{key:"instance",get:function(){return this._instance||(this._instance=new e),this._instance}}]),e}());N._instance=void 0,cc.ConfigManager=N,t._RF.pop(),t._RF.push({},"2ec3046qgJKj6ZI5e2gkacz","Enum",void 0);var I,j=e("l",function(e){return e[e.Lowest=0]="Lowest",e[e.Medium=1]="Medium",e[e.Highest=2]="Highest",e[e.Topmost=3]="Topmost",e}({}));t._RF.pop(),t._RF.push({},"69652+zlvVFsLF/TDWuIfC7","DesignAdapter",void 0);var B,Y=a.ccclass,U=(a.property,Y("DesignAdapter")(I=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this).originDesignSize=void 0,t.designWidthRatio=void 0,t}C(t,e);var n=t.prototype;return n.onLoad=function(){s.on("canvas-resize",this.onResize,this),this.onResize()},n.onResize=function(){this.originDesignSize=s.getDesignResolutionSize(),this.designWidthRatio=this.originDesignSize.width/this.originDesignSize.height;var e=s.getVisibleSizeInPixel(),t=e.x/e.y,n=c.FIXED_HEIGHT;switch(!0){case t>this.designWidthRatio:n=c.FIXED_HEIGHT;break;case t<this.designWidthRatio:n=c.FIXED_WIDTH}s.setDesignResolutionSize(this.originDesignSize.width,this.originDesignSize.height,n)},t}(u))||I);t._RF.pop(),t._RF.push({},"6427csnzOJHuqv4UGe3OVyP","LayerRoot",void 0);var z=a.ccclass,V=(a.property,z("LayerRoot")(B=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this).canvas=null,t}C(t,e);var n=t.prototype;return n.onLoad=function(){this.canvas=this.addComponent(l),this.canvas.alignCanvasWithScreen=!0;var e=this.node.addComponent(h);e.isAlignRight=e.isAlignLeft=e.isAlignTop=e.isAlignBottom=!0,e.left=e.right=e.top=e.bottom=0,f.on(p.EVENT_BEFORE_SCENE_LAUNCH,this.onEventBeforeSceneLaunch,this),f.on(p.EVENT_AFTER_SCENE_LAUNCH,this.onEventAfterSceneLaunch,this)},n.onEventBeforeSceneLaunch=function(){this.canvas.cameraComponent=null},n.onEventAfterSceneLaunch=function(e){this.canvas.cameraComponent=e.getComponentInChildren(d)},t}(u))||B);t._RF.pop(),t._RF.push({},"996bbwL7/VE855WLOyVu9Ch","LayerManager",void 0);var K=e("L",function(){function e(){this._layerRoot=null,this._layerMap=new Map}var t=e.prototype;return t.initLayer=function(){this._layerRoot||(this._layerRoot=new _("LayerRoot"),f.addPersistRootNode(this._layerRoot),this._layerRoot.addComponent(U),this._layerRoot.addComponent(V),this.createLayer(j.Lowest),this.createLayer(j.Medium),this.createLayer(j.Highest),this.createLayer(j.Topmost))},t.getLayer=function(e){return this._layerMap.get(e)},t.createLayer=function(e){var t=new _(j[e]);this._layerRoot.addChild(t);var n=t.addComponent(h);n.isAlignRight=n.isAlignLeft=n.isAlignTop=n.isAlignBottom=!0,n.left=n.right=n.top=n.bottom=0,this._layerMap.set(e,t)},O(e,null,[{key:"instance",get:function(){return null==e._instance&&(e._instance=new e),e._instance}}]),e}());K._instance=null,cc.LayerManager=K,t._RF.pop(),t._RF.push({},"7ba5ex0/xtE8bQJE8e9+Ih8","Logger",void 0);var W=function(e){return e.Blue="color:#007CC7",e.Green="color:#9DC88D",e.Orange="color:#FF5A09",e.PinkSand="color:#ffa8B6",e.DarkSand="color:#a28089",e.Areyayellow="color:#feda6a",e.LightOrange="color:#ec7f37 ",e.OrangeYellow="color:#be4f0c ",e.YassQueen="color:#ff1d58",e.SisterSister="color:#f75990",e}({}),G=cc,H=function(){function e(e){this.name=void 0,this.name=e}var t=e.prototype;return t.group_log=function(e){console.groupCollapsed("%c"+this.getTitle()+" "+e,W.Green);for(var t=0;t<(arguments.length<=1?0:arguments.length-1);t++)console.log(t+1<1||arguments.length<=t+1?void 0:arguments[t+1]);console.groupEnd()},t.log=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this._log.apply(this,[this.getTitle()+" "+e].concat(n))},t.log_green=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this._log.apply(this,["%c"+this.getTitle()+" "+e,W.Green].concat(n))},t.log_blue=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this._log.apply(this,["%c"+this.getTitle()+" "+e,W.Blue].concat(n))},t.log_orange=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this._log.apply(this,["%c"+this.getTitle()+" "+e,W.Orange].concat(n))},t.log_areyayellow=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this._log.apply(this,["%c"+this.getTitle()+" "+e,W.Areyayellow].concat(n))},t.log_yassQueen=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this._log.apply(this,["%c"+this.getTitle()+" "+e,W.YassQueen].concat(n))},t.log_sisterSister=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this._log.apply(this,["%c"+this.getTitle()+" "+e,W.SisterSister].concat(n))},t.log_pinkSand=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this._log.apply(this,["%c"+this.getTitle()+" "+e,W.PinkSand].concat(n))},t.log_orangeYellow=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this._log.apply(this,["%c"+this.getTitle()+" "+e,W.OrangeYellow].concat(n))},t.log_lightOrange=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this._log.apply(this,["%c"+this.getTitle()+" "+e,W.LightOrange].concat(n))},t.log_darkSand=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this._log.apply(this,["%c"+this.getTitle()+" "+e,W.DarkSand].concat(n))},t.warn=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this._warn.apply(this,[this.getTitle()+" "+e].concat(n))},t.error=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this._error.apply(this,[this.getTitle()+" "+e].concat(n))},t.getTitle=function(){if(!G.LogManager.showTime)return"["+this.name+"]"},t._log=function(e){if(G.LogManager.level===G.LogManager.LogLevel.All||G.LogManager.level===G.LogManager.LogLevel.Log){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];(t=console).log.apply(t,[e].concat(r))}},t._warn=function(e){if(G.LogManager.level===G.LogManager.LogLevel.All||G.LogManager.level===G.LogManager.LogLevel.Warn){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];(t=console).warn.apply(t,[e].concat(r))}},t._error=function(e){if(G.LogManager.level===G.LogManager.LogLevel.All||G.LogManager.level===G.LogManager.LogLevel.Error){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];(t=console).error.apply(t,[e].concat(r))}},e}();t._RF.pop(),t._RF.push({},"c095cmKDNhFHZJkxutMEI1V","LogManager",void 0);var J=function(e){return e[e.None=0]="None",e[e.All=1]="All",e[e.Log=2]="Log",e[e.Warn=3]="Warn",e[e.Error=4]="Error",e}({}),q=console.log,$=console.warn,Q=console.error,X=console.groupCollapsed,Z=console.groupEnd,ee=e("f",function(){function e(){}return e.setLevel=function(e){this._level=e,e===J.None?(console.log=function(){},console.warn=function(){},console.error=function(){},console.groupCollapsed=function(){},console.groupEnd=function(){}):(console.log=q,console.warn=$,console.error=Q,console.groupCollapsed=X,console.groupEnd=Z)},O(e,null,[{key:"instance",get:function(){return this._logger}},{key:"level",get:function(){return this._level}},{key:"showTime",get:function(){return this._showTime}},{key:"setShowTime",set:function(e){this._showTime=e}}]),e}());ee._logger=new H("Sandbox"),ee._showTime=!1,ee._level=J.All,ee.LogLevel=J,cc.LogManager=ee,ee.setLevel(J.None),t._RF.pop(),t._RF.push({},"a6a122QH7dA15y8I4kpgY6P","Tools",void 0);var te=e("T",function(){function e(){}return e.firstUpperCase=function(e){return e.replace(/^\S/,(function(e){return e.toUpperCase()}))},e.firstLowerCase=function(e){return e.replace(/^\S/,(function(e){return e.toLowerCase()}))},e.allLowerCase=function(e){return e.toLowerCase()},e.formatAmount=function(e,t){var n=new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}).format(t?Math.abs(e):e);return t&&(n=(e<0?"-":"")+t+n),n},e.getDescriptor=function(e,t){var n;do{if(n=Object.getOwnPropertyDescriptor(e,t),e=Object.getPrototypeOf(e),n)return n.get||n.set?n:null}while(e);return null},e.parseUrl=function(){var e=location.search,t=new URLSearchParams(e.split("?")[1]),n=Object.create(null);return t.forEach((function(e,t){n[t]=decodeURIComponent(e)})),n},e.buildUrl=function(e,t){return e.endsWith("/")&&(e=e.slice(0,-1)),t.startsWith("/")||(t="/"+t),(e+t).replace(/\/+/g,"/").replace(/^(http:|https:)\//,"$1//")},e.buildGetUrl=function(e,t){var n=Object.keys(t).map((function(e){return encodeURIComponent(e)+"="+encodeURIComponent(t[e])})).join("&"),r=e.includes("?")?"&":"?";return(e=(e=e.replace(/\/+/g,"/")).replace(/^(http:|https:)\//,"$1//"))+r+n},e.isNumber=function(e){return"number"==typeof e&&!isNaN(e)},e.isFunction=function(e){return e&&"function"==typeof e},e}());cc.Utility=te,t._RF.pop(),t._RF.push({},"bcbd8RY76BG/5eHhA6L4o1r","ModuleManager",void 0);var ne=e("M",function(){function e(){this._moduleMap=new Map}var t=e.prototype;return t.get=function(e){return this._moduleMap.get(te.allLowerCase(e))},t.startup=function(e){for(var t=this,n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return new Promise(R(k().mark((function n(o,i){var a,s,c,u,l,h,p;return k().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e){n.next=2;break}return n.abrupt("return",o());case 2:if(!t.get(e)){n.next=5;break}return n.abrupt("return",o());case 5:return n.prev=5,c=[],(null==(a=N.instance.data.modules[e])?void 0:a.isLocalized)&&(u=[N.instance.data.localized.package,e,N.instance.data.localized.language].join("_"),c.push(t._loadBundle(u))),c.push(t._loadBundle(e)),n.next=12,Promise.all(c);case 12:return l=n.sent,ee.instance.group_log("启动"+e+"模块",l),h=new _(e),f.addPersistRootNode(h),p=h.addComponent(e),t._register(e,p),n.next=20,(s=p)._internal_created.apply(s,r);case 20:o(),n.next=26;break;case 23:n.prev=23,n.t0=n.catch(5),console.error(n.t0);case 26:case"end":return n.stop()}}),n,null,[[5,23]])}))))},t._loadBundle=function(e){return new Promise((function(t,n){var r=i.getBundle(e);if(r)return t(r);i.loadBundle(e,(function(e,r){if(e)return n(e);t(r)}))}))},t._register=function(e,t){e=te.allLowerCase(e),this._moduleMap.has(e)?console.error("module "+e+" has been registered!"):this._moduleMap.set(e,t)},O(e,null,[{key:"instance",get:function(){return null==e._instance&&(e._instance=new e),e._instance}}]),e}());ne._instance=null,cc.ModuleManager=ne,t._RF.pop(),t._RF.push({},"65879DMhONACqZ0MrSFSroo","Notify",void 0);var re=function(){function e(){this._eventMap=void 0,this._eventMap=new Map}var t=e.prototype;return t._parseMessage=function(e){return"string"==typeof e?e:e.key},t._parseUnique=function(e,t){return"string"!=typeof e?t||e.unique:t},t._processListeners=function(){var e=R(k().mark((function e(t){var n,r,o,i,a,s,c,u,l=arguments;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n=l.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=l[o];if(i=this._parseMessage(t),this._eventMap.has(i)){e.next=4;break}return e.abrupt("return",[]);case 4:a=this._eventMap.get(i),s=[],c=k().mark((function e(){var t,n,o;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=a[u],n=t.fn,o=t.context,t.once&&a.splice(u,1),s.push((function(){return n.call.apply(n,[o].concat(r))}));case 3:case"end":return e.stop()}}),e)})),u=a.length-1;case 8:if(!(u>=0)){e.next=13;break}return e.delegateYield(c(),"t0",10);case 10:u--,e.next=8;break;case 13:return e.abrupt("return",s);case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.on=function(e,t,n,r,o){void 0===r&&(r=!1),void 0===o&&(o=!1);var i=this._parseMessage(e);this._parseUnique(e,o)&&this._eventMap.has(i)||(this._eventMap.has(i)||this._eventMap.set(i,[]),this._eventMap.get(i).unshift({fn:t,context:n,once:r}))},t.off=function(e,t,n){var r=this._parseMessage(e);if(this._eventMap.has(r))for(var o=this._eventMap.get(r),i=o.length-1;i>=0;i--){var a=o[i],s=a.fn,c=a.context;t===s&&n===c&&o.splice(i,1)}},t.offContext=function(e){for(var t,n=D(this._eventMap);!(t=n()).done;)for(var r=t.value,o=(r[0],r[1]),i=o.length-1;i>=0;i--){e===o[i].context&&o.splice(i,1)}},t.emitContext=function(e,t){var n=this._parseMessage(e);if(this._eventMap.has(n)){var r=this._eventMap.get(n);Array.isArray(t)||(t=[t]);for(var o=arguments.length,i=new Array(o>2?o-2:0),a=2;a<o;a++)i[a-2]=arguments[a];for(var s,c=D(t);!(s=c()).done;)for(var u=s.value,l=r.length-1;l>=0;l--){var h=r[l],f=h.context,p=h.fn,d=h.once;u===f&&(d&&r.splice(l,1),p.call.apply(p,[u].concat(i)))}}},t.emit=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this._processListeners.apply(this,[e].concat(n)).then((function(e){Promise.allSettled(e.map((function(e){return e()}))).then((function(e){e.forEach((function(e,t){"rejected"===e.status&&console.error("Error in listener "+t+": "+e.reason)}))}))}))},t.wait=function(){var e=R(k().mark((function e(t){var n,r,o,i,a,s=arguments;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(e.prev=0,n=s.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=s[o];return e.next=4,this._processListeners.apply(this,[t].concat(r));case 4:return i=e.sent,a=i.map((function(e){return e()})),e.next=8,Promise.all(a);case 8:return e.abrupt("return",e.sent);case 11:e.prev=11,e.t0=e.catch(0),console.error(e.t0);case 14:case"end":return e.stop()}}),e,this,[[0,11]])})));return function(t){return e.apply(this,arguments)}}(),t.waitQueue=function(){var e=R(k().mark((function e(t){var n,r,o,i,a,s,c,u,l=arguments;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(e.prev=0,n=l.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=l[o];return e.next=4,this._processListeners.apply(this,[t].concat(r));case 4:i=e.sent,a=[],s=D(i);case 7:if((c=s()).done){e.next=16;break}return u=c.value,e.t0=a,e.next=12,u();case 12:e.t1=e.sent,e.t0.push.call(e.t0,e.t1);case 14:e.next=7;break;case 16:return e.abrupt("return",a);case 19:e.prev=19,e.t2=e.catch(0),console.error(e.t2);case 22:case"end":return e.stop()}}),e,this,[[0,19]])})));return function(t){return e.apply(this,arguments)}}(),e}();t._RF.pop(),t._RF.push({},"4d911EqHBNMxa32SuhRisRE","NotifyManager",void 0);var oe,ie=e("N",function(){function e(){this._notify=void 0,this._notify=new re}var t=e.prototype;return t.on=function(e,t,n,r,o){void 0===r&&(r=!1),void 0===o&&(o=!1),this._notify.on(e,t,n,r,o)},t.off=function(e,t,n){this._notify.off(e,t,n)},t.offContext=function(e){this._notify.offContext(e)},t.emitContext=function(e,t){for(var n,r=arguments.length,o=new Array(r>2?r-2:0),i=2;i<r;i++)o[i-2]=arguments[i];(n=this._notify).emitContext.apply(n,[e,t].concat(o))},t.emit=function(e){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];(t=this._notify).emit.apply(t,[e].concat(r))},t.wait=function(){var e=R(k().mark((function e(t){var n,r,o,i,a=arguments;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r=a.length,o=new Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=a[i];return e.abrupt("return",(n=this._notify).wait.apply(n,[t].concat(o)));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.waitQueue=function(){var e=R(k().mark((function e(t){var n,r,o,i,a=arguments;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r=a.length,o=new Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=a[i];return e.abrupt("return",(n=this._notify).waitQueue.apply(n,[t].concat(o)));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),O(e,null,[{key:"instance",get:function(){return null==e._instance&&(e._instance=new e),e._instance}}]),e}());ie._instance=null,cc.NotifyManager=ie,t._RF.pop(),t._RF.push({},"69cddusk3BAnKSxck1OHwCE","PromiseCoordinator",void 0),oe=Symbol.toStringTag;var ae,se=function(){function e(e,t){var n=this;this[oe]=void 0,this._promise=void 0,this._children=[],this._reject=void 0,this._isCanceled=!1,this._onRejected=null,this._try=!1,this.cleanup=t,this._promise=new Promise((function(t,r){n._reject=r,e(t,r)})).catch((function(e){if(n._onRejected&&"function"==typeof n._onRejected)return n._onRejected(e);if(n._isCanceled&&!n._try)return new Promise((function(){}));throw e})).finally((function(){n.cleanup&&"function"==typeof n.cleanup&&n.cleanup()})),this[Symbol.toStringTag]=this._promise[Symbol.toStringTag]}var t=e.prototype;return t._handleResult=function(e,t,n){e instanceof Promise?e.then(t,n):t(e)},t.try=function(){return this._try=!0,this},t.then=function(t,n){var r=this,o=new e((function(e,i){r._promise.then((function(n){t?r._handleResult(t(n),e,i):e(n)}),(function(t){n?r._handleResult(n(t),e,i):i(t)})).catch((function(e){i(e)})).finally((function(){var e=r._children.indexOf(o);-1!==e&&r._children.splice(e,1)}))}));return this._children.push(o),o},t.catch=function(e){return this._onRejected=e,this},t.cancel=function(){this._isCanceled||(this._isCanceled=!0,this._reject(new Error("承诺被手动取消")),this._children.forEach((function(e){return e.cancel()})))},e}(),ce=e("P",function(){function e(){}return e.new=function(e,t){var n=this;this.promises.has(t)||this.promises.set(t,new Set);var r=new se(e,(function(){var e=n.promises.get(t);e&&(e.delete(r),0===e.size&&n.promises.delete(t))}));return this.promises.get(t).add(r),r},e.cancel=function(e){this.promises.has(e)&&this.promises.get(e).forEach((function(e){return e.cancel()}))},e}());ce.promises=new Map,t._RF.pop(),t._RF.push({},"a2c77c/Y7dFYbe8KzPNhMpW","Base",void 0);var ue=a.ccclass,le=(a.property,e("B",ue("Base")(ae=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this)._transform=null,t}C(t,e);var n=t.prototype;return n.callFuncIsExist=function(e){e&&"function"==typeof e&&e.call(this)},n.wait=function(e){var t=this;if(!(e<=0))return ce.new((function(n,r){t.scheduleOnce(n,e)}),this)},O(t,[{key:"transform",get:function(){return this._transform||(this._transform=this.node.getComponent(g)||this.node.addComponent(g)),this._transform}}]),t}(u))||ae));t._RF.pop(),t._RF.push({},"5e5c5JyhO9AGYr0GaSVPmMp","Config",void 0);var he=function(){};he.OnPreloadProgress={key:"Framework:Event:OnPreloadProgress"},he.OnButtonPressed={key:"Framework:Event:OnButtonPressed"},he.OnButtonReleased={key:"Framework:Event:OnButtonReleased"},he.OnButtonClicked={key:"Framework:Event:OnButtonClicked"},he.OnMusicVolumeChanged={key:"Framework:Event:OnMusicVolumeChanged"},he.OnSoundVolumeChanged={key:"Framework:Event:OnSoundVolumeChanged"},he.OnMusicSwitched={key:"Framework:Event:OnMusicSwitched"},he.OnSoundSwitched={key:"Framework:Event:OnSoundSwitched"},he.ReadyModule={key:"Framework:Event:ReadyModule"},he.EnterModule={key:"Framework:Event:EnterModule"};var fe,pe,de,_e,ge,ve=e("F",(function(){}));function ye(e,t,n){t.constructor.hasOwnProperty(e)||(t.constructor[e]=[].concat(Object.getPrototypeOf(t).constructor[e]||[])),-1===t.constructor[e].indexOf(n)&&t.constructor[e].push(n)}function me(e){return function(t,n){return void 0===n&&(n=!1),function(r,o,i){return t?(r.constructor[e]||(r.constructor[e]=[]),r.constructor[e].push({event:t,key:o,once:n}),i):console.error("handler event is null",r)}}}function we(e){return function(t,n,r){return Ee(e,!1)(t,n,r)}}function be(e,t){return void 0===t&&(t=!1),function(n,r,o){return Ee(e,t)(n,r,o)}}function Ee(e,t){return function(n,r,o){var i={$_path:null,$_fromRoot:!1,$_autoCreate:t};function a(n,r,o){var a=function(e,t){return"string"==typeof t&&(t={$_path:t}),A({},e,t)}({type:e,$_path:null,$_fromRoot:!1,$_autoCreate:t},i);n.constructor[fe.BIND_PROPS_KEY]||(n.constructor[fe.BIND_PROPS_KEY]={}),n.constructor[fe.BIND_PROPS_KEY][r]=a}return void 0===n?Ee(e):"string"==typeof n&&"boolean"==typeof r?(i={$_path:n,$_fromRoot:r,$_autoCreate:t},a):void 0===r?(i=n,a):void a(n,r)}}ve.Event=he,t._RF.pop(),t._RF.push({},"8465crbb8NFp5es6UkWDlvU","Decorator",void 0),(pe=fe||(fe=e("D",{}))).MUTABLES_KEY="__mutables__",pe.BINDINGS_KEY="__bindings__",pe.BINDABLES_KEY="__bindables__",pe.COMMANDS_KEY="__commands__",pe.GLOBAL_LISTENERS_KEY="__global_listeners__",pe.MODULE_LISTENERS_KEY="__module_listeners__",pe.MODEL_KEY="__model__",pe.VIEWMODEL_KEY="__viewModel__",pe.MODULE_KEY="__module__",pe.INJECTS_KEY="__injects__",pe.BIND_PROPS_KEY="__bind_props__",pe.ESSENTIAL_GAME_MODULE="__essential_game_module__",function(e){e.Type=function(e,t,n,r){return void 0===t&&(t=!1),void 0===n?be(v.getClassName(e),t):be(v.getClassName(e),t)(n,r)};e.Node=be("cc.Node"),e.Button=we("cc.Button"),e.EditBox=we("cc.EditBox"),e.Slider=we("cc.Slider"),e.PageView=we("cc.PageView"),e.ScrollView=we("cc.ScrollView"),e.Toggle=we("cc.Toggle"),e.ToggleContainer=we("cc.ToggleContainer"),e.VideoPlayer=we("cc.VideoPlayer"),e.WebView=we("cc.WebView"),e.Label=we("cc.Label"),e.Sprite=we("cc.Sprite"),e.ProgressBar=we("cc.ProgressBar"),e.RichText=we("cc.RichText"),e.Layout=we("cc.Layout"),e.Widget=we("cc.Widget"),e.Graphics=we("cc.Graphics"),e.Spine=we("sp.Skeleton"),e.Animation=we("cc.Animation"),e.UITransform=we("cc.UITransform"),e.UIOpacity=we("cc.UIOpacity"),e.Mask=we("cc.Mask"),e.UIRenderer=we("cc.UIRenderer"),e.ParticleSystem=we("cc.ParticleSystem"),e.ParticleSystem2D=we("cc.ParticleSystem2D")}(de||(de=e("q",{}))),(ge=_e||(_e=e("m",{}))).Global=me(fe.GLOBAL_LISTENERS_KEY),ge.Module=me(fe.MODULE_LISTENERS_KEY);e("n",ye.bind(null,fe.MUTABLES_KEY)),e("r",ye.bind(null,fe.BINDABLES_KEY)),e("p",ye.bind(null,fe.BINDINGS_KEY));t._RF.pop(),t._RF.push({},"c43e7k4JShKebKXFDmU4WJZ","Bundle",void 0);var Le=function(){function e(e){this._preloadProgressMap=new Map,this._preloadFinish={total:0,finish:0},this._module=e}var t=e.prototype;return t.loadRemoteSpriteFrame=function(e,t){return void 0===t&&(t=null),new Promise((function(n,r){i.loadRemote(e,t,(function(e,t){if(e)return r(e);var o=new y,i=new m;i.image=t,o.texture=i,n(o)}))}))},t.loadRemoteAudio=function(e,t){return void 0===t&&(t=!1),new Promise((function(n,r){i.loadRemote(e,t?{audioLoadMode:w.AudioType.DOM_AUDIO}:null,(function(e,t){if(e)return r(e);n(t)}))}))},t.loadRemoteTxt=function(e){return new Promise((function(t,n){i.loadRemote(e,(function(e,r){if(e)return n(e);t(r)}))}))},t.loadRemoteBinarySpine=function(e){return new Promise((function(t,n){i.loadAny([{url:e.atlas,ext:".txt"},{url:e.ske,ext:".bin"}],(function(r,o){if(r)return n(r);i.loadRemote(e.image,(function(r,i){if(r)return n(r);var a=new b.SkeletonData;a.atlasText=o[0],a._nativeAsset=o[1],a.textures=[i],a._uuid=e.ske,a._nativeUrl=e.ske,t(a)}))}))}))},t.loadRemoteTextSpine=function(e){return new Promise((function(t,n){i.loadAny([{url:e.atlas,ext:".txt"},{url:e.ske,ext:".txt"}],(function(r,o){if(r)return n(r);i.loadRemote(e.image,(function(e,r){if(e)return n(e);var i=new b.SkeletonData;i.atlasText=o[0],i.skeletonJson=o[1],i.textures=[r],t(i)}))}))}))},t.load=function(e,t,n){var r=this;return new Promise(R(k().mark((function o(i,a){return k().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:r.bundle.load(e,t,n,(function(e,t){if(e)return a(e);i(t)}));case 1:case"end":return o.stop()}}),o)}))))},t.preload=function(e,t,n){var r=this;return new Promise(R(k().mark((function o(i,a){return k().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:r.bundle.preload(e,t,n,(function(e,t){i()}));case 1:case"end":return o.stop()}}),o)}))))},t.preloadDir=function(e,t){var n=this;return new Promise(R(k().mark((function r(o,i){var a,s,c;return k().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:n._preloadProgressMap.has(e)||n._preloadProgressMap.set(e,{total:0,finish:0}),a=n._preloadProgressMap.get(e),s=function(){var e=0,t=0;n._preloadProgressMap.forEach((function(n){e+=n.total,t+=n.finish})),e+=n._preloadFinish.total,t+=n._preloadFinish.finish,ie.instance.emit(ve.Event.OnPreloadProgress,t,e)},c=function(e,n,r){a.total=n,a.finish=e,t&&t(e,n),s()},n.bundle.preloadDir(e,c,(function(t,r){if(t&&console.error(t),n._preloadProgressMap.has(e)){var i=n._preloadProgressMap.get(e);n._preloadProgressMap.delete(e),0===n._preloadProgressMap.size?(n._preloadFinish={total:0,finish:0},console.error("清理进度")):(n._preloadFinish.total+=i.total,n._preloadFinish.finish+=i.finish,console.warn("累积进度"))}o()}));case 5:case"end":return r.stop()}}),r)}))))},t.clear=function(){var e=this;this.bundle&&(this.bundle.getDirWithPath("layout").forEach((function(t){t.path.startsWith("layout/skin/spines")?e.bundle.release(t.path,b.SkeletonData):e.bundle.release(t.path)})),i.removeBundle(this.bundle))},O(e,[{key:"bundle",get:function(){return i.getBundle(this._module.name)}}]),e}(),xe=i.presets.preload;xe.maxConcurrency=8,xe.maxRequestsPerFrame=8,t._RF.pop(),t._RF.push({},"5f2dchK3+JPYKeBiXo0fotq","I18n",void 0);var Me=function(){function e(e){this.data=null,this.name="",this.bundle=null,this.isLoading=!1,this.isLocalized=!1,this._module=e,this.isLocalized=N.instance.data.modules[e.name].isLocalized,this.isLocalized&&(this.name=N.instance.data.localized.package+"_"+e.name+"_"+N.instance.data.localized.language,this.bundle=i.getBundle(this.name),this.initLocal().catch((function(e){console.error(e)})))}var t=e.prototype;return t.initLocal=function(){var e=this;return new Promise((function(t,n){if(!e.isLocalized)return n("没有语言包可使用");if(e.data)return t();if(!e.bundle)return n("初始化 i18n 时：找不到 "+e.name);if(e.isLoading)var r=setInterval((function(){if(e.data||!e.isLoading)return clearInterval(r),t(e.data)}),1);else e.isLoading=!0,e.bundle.load("local",(function(r,o){if(r)return e.isLoading=!1,n(r);e.data=o.json,e.isLoading=!1,t()}))}))},t.loadRes=function(e,t){var n=this;return new Promise((function(r,o){var i;return[null==(i=n.bundle)?void 0:i.load(e,t,(function(e,t){if(e)return o(e);r(t)}))]}))},t.preloadDir=function(e,t){var n=this;if(this.bundle)return new Promise(R(k().mark((function r(o,i){return k().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:n.bundle.preloadDir(e,t,(function(e,t){e&&console.error(e),o()}));case 1:case"end":return r.stop()}}),r)}))))},t.preload=function(e,t){var n=this;if(this.bundle)return new Promise(R(k().mark((function r(o){return k().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:n.bundle.preload(e,t,(function(e,t){e&&console.error(e),o()}));case 1:case"end":return r.stop()}}),r)}))))},t.getString=function(){var e=R(k().mark((function e(t){var n;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initLocal().catch(console.error);case 2:return e.abrupt("return",(null==(n=this.data)||null==(n=n.texts)?void 0:n[t])||"");case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.getFont=function(){var e=R(k().mark((function e(t){var n,r,o;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initLocal().catch(console.error);case 2:if(r=null==(n=this.data)||null==(n=n.fonts)?void 0:n[t]){e.next=5;break}return e.abrupt("return",null);case 5:return o=E.join("fonts",r.replace(E.extname(r),"")),e.next=8,this.loadRes(o,L).catch(console.error);case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.getSpriteFrame=function(){var e=R(k().mark((function e(t){var n,r,o;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initLocal().catch(console.error);case 2:if(r=null==(n=this.data)||null==(n=n.textures)?void 0:n[t]){e.next=5;break}return e.abrupt("return",null);case 5:return o=E.join("textures",r.replace(E.extname(E.dirname(r)),"")),e.next=8,this.loadRes(o,y).catch(console.error);case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.getSkeletonData=function(){var e=R(k().mark((function e(t){var n,r,o;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initLocal().catch(console.error);case 2:if(r=null==(n=this.data)||null==(n=n.spines)?void 0:n[t]){e.next=5;break}return e.abrupt("return",null);case 5:return o=E.join("spines",r.replace(E.extname(r),"")),e.next=8,this.loadRes(o,b.SkeletonData).catch(console.error);case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.getAudioClip=function(){var e=R(k().mark((function e(t){var n,r,o;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initLocal().catch(console.error);case 2:if(r=null==(n=this.data)||null==(n=n.audios)?void 0:n[t]){e.next=5;break}return e.abrupt("return",null);case 5:return o=E.join("audios",r.replace(E.extname(r),"")),e.next=8,this.loadRes(o,w).catch(console.error);case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.clear=function(){var e=this;this.bundle&&(this.bundle.getDirWithPath("textures").forEach((function(t){return e.bundle.release(t.path)})),this.bundle.getDirWithPath("spines").forEach((function(t){return e.bundle.release(t.path,b.SkeletonData)})),this.bundle.getDirWithPath("fonts").forEach((function(t){return e.bundle.release(t.path)})),this.bundle.getDirWithPath("audios").forEach((function(t){return e.bundle.release(t.path)})),this.bundle.getDirWithPath("local").forEach((function(t){return e.bundle.release(t.path)})),i.removeBundle(this.bundle))},e}();t._RF.pop(),t._RF.push({},"0509bq46S5N2rMrmoMlwjBl","Panel",void 0);var ke,Se=function(){function e(e,t){this._node=null,this._parent=null,this._panel=e,this._options=t,this._options.parent?this._parent=this._options.parent:(this._parent=this._panel.parent,te.isNumber(this._options.layer)&&(this._parent=K.instance.getLayer(this._options.layer)));var n=[].concat(this._options.showEvent||[]),r=[].concat(this._options.hideEvent||[]),o="global"===this._options.listenType?ie.instance:this._panel.module.notify;this._registerEvents(n,this._onShow,o),this._registerEvents(r,this._onHide,o)}var t=e.prototype;return t._registerEvents=function(e,t,n){for(var r,o=D(e);!(r=o()).done;){var i=r.value;n.on(i,t,this)}},t._onShow=function(){var e=R(k().mark((function e(){var t,n,r,o,i,a,s,c=this,u=arguments;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r=u.length,o=new Array(r),i=0;i<r;i++)o[i]=u[i];if(!this._options.shouldShowPanel||(t=this._options).shouldShowPanel.apply(t,o)){e.next=3;break}return e.abrupt("return");case 3:if(this._node){e.next=6;break}return e.next=6,this._loadPrefab();case 6:if(this._node){e.next=8;break}return e.abrupt("return");case 8:if(a=this._parent.children.length-1,this._node.getSiblingIndex()!==a&&this._node.setSiblingIndex(a),this._node.active=!0,s=[],null==(n=this._options.components)||n.forEach((function(e){var t=c._node.getComponent(e);t.__onShow&&"function"==typeof t.__onShow&&s.push(t.__onShow.apply(t,o))})),!(s.length>0)){e.next=15;break}return e.abrupt("return",Promise.all(s).catch((function(e){console.error("面板显示时出现错误: "+c._options.prefabPath,e)})));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t._onHide=function(){var e=R(k().mark((function e(){var t,n=arguments;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._options.shouldHidePanel||(t=this._options).shouldHidePanel.apply(t,n)){e.next=2;break}return e.abrupt("return");case 2:this._options.shouldDestroyOnHide?this._destroy():this._node.active=!1;case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t._destroy=function(){this._node&&(this._node.destroy(),this._node=null)},t._loadPrefab=function(){var e=R(k().mark((function e(){var t,n,r,o,i,a=this;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=E.join("layout/prefabs/"+this._options.prefabPath),console.log("加载与质疑",t),e.prev=2,n=this._panel.module,this._options.module&&(n=ne.instance.get(this._options.module)),e.next=7,n.bundle.load(t,M,this._options.loadProgress);case 7:if(!(r=e.sent)){e.next=19;break}return this._node=x(r),this._node.active=!0,this._parent.addChild(this._node),o=[].concat(this._options.components||[]),i=[],o.forEach((function(e){var t=a._node.addComponent(e);t.__wait&&"function"==typeof t.__wait&&i.push(t.__wait())})),e.next=17,Promise.all(i);case 17:this._node.on(_.EventType.NODE_DESTROYED,this._onDestroy,this),this._node.on(_.EventType.ACTIVE_IN_HIERARCHY_CHANGED,this._onActive,this);case 19:e.next=24;break;case 21:e.prev=21,e.t0=e.catch(2),console.error("加载prefab时出现错误: "+t,e.t0);case 24:case"end":return e.stop()}}),e,this,[[2,21]])})));return function(){return e.apply(this,arguments)}}(),t._onActive=function(){!this._node.active&&this._options.shouldDestroyOnHide&&this._destroy()},t._onDestroy=function(){this._panel.destroy(this._options.prefabPath)},t.destroy=function(){var e,t;ie.instance.offContext(this),null==(e=this._panel.module)||e.notify.offContext(this),null==(t=this._node)||t.destroy(),this._node=null},O(e,[{key:"node",get:function(){return this._node}}]),e}(),Re=function(){function e(e){this._panelMap=new Map,this._layer=void 0,this._parent=null,this._module=e,this.setLayer(j.Lowest)}var t=e.prototype;return t.setLayer=function(e){return e instanceof _?this._parent=e:this._layer!=e&&(this._layer=e,this._parent=K.instance.getLayer(e)),this},t.register=function(e){if(this._panelMap.has(e.prefabPath))return console.error("已经注册过了: "+e.prefabPath),this;var t=new Se(this,e);return this._panelMap.set(e.prefabPath,t),this},t.destroy=function(e){if(!this._panelMap.has(e))return console.log("被销毁过: "+e);var t=this._panelMap.get(e);this._panelMap.delete(e),t.destroy()},t.clear=function(){for(;this._panelMap.size;){var e=this._panelMap.keys()[0];this.destroy(e)}},O(e,[{key:"layer",get:function(){return this._layer}},{key:"parent",get:function(){return this._parent}},{key:"module",get:function(){return this._module}}]),e}();t._RF.pop(),t._RF.push({},"71e0dMl+8JOtIijFvl1d1Ut","BaseModule",void 0);var Pe=a.ccclass;a.property,e("i",Pe("BaseModule")(ke=function(e){C(n,e);var t=n.prototype;function n(){var t;return(t=e.call(this)||this)._notify=void 0,t._bundle=void 0,t._logger=void 0,t._panel=void 0,t._i18n=void 0,t._viewModelMap=void 0,t._modelMap=void 0,t._onLoad(),t}return t.onCreated=function(){},t._onLoad=function(){var e=this,t=this.onLoad;this.onLoad=function(){e._notify=new re,e._bundle=new Le(e),e._panel=new Re(e),e._i18n=new Me(e),e._viewModelMap=new Map,e._modelMap=new Map,e._logger=new H(e.name),e.callFuncIsExist(t),e._listener()}},t._internal_created=function(){return this.onCreated.apply(this,arguments)},t.getViewModel=function(e){return this._getVM(e,this._viewModelMap)},t.getModel=function(e){return this._getVM(e,this._modelMap)},t.destroyViewModel=function(e){this._destroyVM(e,this._viewModelMap)},t.destroyModel=function(e){this._destroyVM(e,this._modelMap)},t.destroyAllVM=function(){this._clearVM(this._viewModelMap),this._clearVM(this._modelMap)},t._clearVM=function(e){for(var t=0,n=Array.from(e.keys());t<n.length;t++){var r=n[t];this._destroyVM(r,e)}},t._getVM=function(e,t){try{var n=this._getClassName(e);if(!n)return null;if(!t.has(n)){var r=new _(n);r.module=this,r.parent=this.node;var o=r.addComponent(n);t.set(n,o)}return t.get(n)}catch(e){console.error(e)}},t._destroyVM=function(e,t){try{var n=this._getClassName(e);if(!n)return;if(t.has(n))t.get(n).node.destroy(),t.delete(n)}catch(e){console.error(e)}},t._listener=function(){var e=this,t=this.constructor[fe.GLOBAL_LISTENERS_KEY]||[];t.forEach((function(t){var n=e[t.key];"function"==typeof n&&ie.instance.on(t.event,n,e,t.once)})),(t=this.constructor[fe.MODULE_LISTENERS_KEY]||[]).forEach((function(t){var n=e[t.key];"function"==typeof n&&e.notify.on(t.event,n,e,t.once)}))},t._getClassName=function(e){return"string"==typeof e?e:v.getClassName(e)},O(n,[{key:"name",get:function(){return this.__classname__}},{key:"notify",get:function(){return this._notify}},{key:"bundle",get:function(){return this._bundle}},{key:"panel",get:function(){return this._panel}},{key:"i18n",get:function(){return this._i18n}},{key:"logger",get:function(){return this._logger}}]),n}(le))||ke);t._RF.pop()}}}));

System.register("chunks:///http_config-34069bdb.js",["cc"],(function(t){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"030cflhxwhMLLZsBJ4blNS5","http_config",void 0);var n=function(){};n.Request={key:"Http:Event:Request",unique:!0},n.Post={key:"Http:Event:Post",unique:!0},n.Get={key:"Http:Event:Get",unique:!0},n.OnError={key:"Http:Event:OnError"};var u=function(){};u.TimeOut=1e4;var c=t("H",(function(){}));c.Event=n,c.Config=u,e._RF.pop()}}}));

System.register("chunks:///Linkage-3b787fc6.js",["./BaseModule-8a96da91.js","cc","./NodeHelper-50e02d60.js"],(function(t){var n,i,e,o,r,a,s,u,c,l,h,p,d,f,_,m,g,y,b,w,v,O,I,A,S,N,E,T,R,L,F,H,z;return{setters:[function(t){n=t.a,i=t.g,e=t.i,o=t.D,r=t.M,a=t.N,s=t._,u=t.b,c=t.c,l=t.T},function(t){h=t.cclegacy,p=t._decorator,d=t.js,f=t.Label,_=t.tween,m=t.Component,g=t.SpriteAtlas,y=t.Enum,b=t.HorizontalTextAlignment,w=t.Node,v=t.Sprite,O=t.UITransform,I=t.Layout,A=t.Tween,S=t.Vec3,N=t.Widget,E=t.AnimationClip,T=t.Animation,R=t.UIOpacity,L=t.sp},function(t){F=t.N,H=t.B,z=t.S}],execute:function(){var C;h._RF.push({},"2623cZcp7JFR7rIqAPaV5W3","BaseHelpModule",void 0);var k,P=p.ccclass;p.property,t("B",P("BaseHelpModule")(C=function(t){function e(){for(var n,i=arguments.length,e=new Array(i),o=0;o<i;o++)e[o]=arguments[o];return(n=t.call.apply(t,[this].concat(e))||this)._game=void 0,n}return n(e,t),i(e,[{key:"game",get:function(){return this._game},set:function(t){this._game=t}}]),e}(e))||C);h._RF.pop(),h._RF.push({},"8fd596kd/5KF6UkAJfaX0e2","BaseHelpView",void 0);var x,M=p.ccclass;p.property,t("a",M("BaseHelpView")(k=function(t){function e(){var n;return(n=t.call(this)||this)._module=null,n._viewModel=null,n._onLoad(),n._onDestroy(),n}n(e,t);var s=e.prototype;return s._onLoad=function(){var t=this,n=this.onLoad;this.onLoad=function(){var i=t.constructor[o.ESSENTIAL_GAME_MODULE];if(!i)throw new Error(d.getClassName(t)+":  essentialGameModule 未定义");if(t._module=r.instance.get(i),!t._module)throw new Error(d.getClassName(t)+": 未找到 "+i+" 模块");if(!t.game)throw new Error(d.getClassName(t)+": 未找到游戏模块");t._viewModel=t.game.getViewModel(t.module.game.name+"_view_model"),F.findBindingNodes(t),t.callFuncIsExist(n),t._initBindings(t.viewModel),t._listener()}},s._onDestroy=function(){var t=this,n=this.onDestroy;this.onDestroy=function(){var i;a.instance.offContext(t),null==(i=t.module.game)||i.notify.offContext(t),t.callFuncIsExist(n)}},s._listener=function(){var t=this,n=this.constructor[o.GLOBAL_LISTENERS_KEY]||[];n.forEach((function(n){var i=t[n.key];"function"==typeof i&&a.instance.on(n.event,i,t,n.once)})),this.module.game&&(n=this.constructor[o.MODULE_LISTENERS_KEY]||[]).forEach((function(n){var i=t[n.key];"function"==typeof i&&t.module.game.notify.on(n.event,i,t,n.once)}))},s._initBindings=function(t){var n=this;t&&(this.constructor[o.BINDINGS_KEY]||[]).forEach((function(i){t.bind(i,(function(t,i){"function"==typeof n[t]?n[t](i):n[t]=i}),n)}))},i(e,[{key:"module",get:function(){return this._module}},{key:"game",get:function(){return this.module.game}},{key:"viewModel",get:function(){return this._viewModel}}]),e}(H))||k);h._RF.pop(),h._RF.push({},"b9786xecO5E7rflRkQpSq66","ScoreCounter",void 0);var q,B,X,Y,D,Z,G,W,V,U,K,J,j,Q,$,tt,nt,it,et,ot,rt,at,st=p.ccclass,ut=(p.property,p.menu),ct=p.requireComponent,lt=p.disallowMultiple;t("S",st("ScoreCounter")(x=ut("自定义扩展/ScoreCounter")(x=ct(f)(x=lt(x=function(t){function e(){for(var n,i=arguments.length,e=new Array(i),o=0;o<i;o++)e[o]=arguments[o];return(n=t.call.apply(t,[this].concat(e))||this)._label=null,n._duration=.5,n._format=null,n._finish=null,n._easing="smooth",n._tween=null,n._options={from:0,to:0,current:0},n}n(e,t);var o=e.prototype;return o.__preload=function(){this._label=this.getComponent(f)},o.duration=function(t){return this._duration=t,this},o.easing=function(t){return this._easing=t,this},o.format=function(t){return this._format=t||this._defaultFormat,this},o.finish=function(t){return this._finish=t,this},o.counter=function(t){var n=this;return t!=this._options.to?(this.stop(),this._options.from=this._options.current,this._options.to=t,this._tween=_().target(this._options).to(this._duration,{current:{value:t,progress:function(t,i,e,o){return n._options?(t=n._options.from,i=n._options.to,n._options.current=t+(i-t)*o,n._label.string=n._format(n._options.current),n._options.current):(n.stop(),console.log("this._options is null"))}}},{easing:this._easing}).call((function(){n._options.current=n._options.to,n._label.string=n._format(n._options.to),n._finish&&n._finish()})).start()):this._finish&&this._finish(),this.node.active||(this.node.active=!0),this},o.stop=function(){return this._tween&&this._tween.stop(),this},o.set=function(t){return this.stop(),this._options.to=t,this._options.current=t,this._label.string=this._format(this._options.current),this._finish&&this._finish(),this},o.reset=function(){return this._options.from=0,this._options.to=0,this._options.current=0,this._label.string=this._format&&this._format(this._options.current),console.log("reset",this._label.string),this},o._defaultFormat=function(t){return t.toString()},o.onDestroy=function(){this.stop()},i(e,[{key:"label",get:function(){return this._label}},{key:"current",get:function(){return this._options.current}}]),e}(m))||x)||x)||x)||x);h._RF.pop(),h._RF.push({},"94583ELlUFGZ4egvCqSxPX1","ScoreRoller",void 0);var ht=p.ccclass,pt=p.property,dt=p.menu,ft=p.disallowMultiple;t("b",(q=ht("ScoreRoller"),B=dt("自定义扩展/ScoreRoller"),X=pt(g),Y=pt({type:g,displayName:"数字图集"}),D=pt({type:y(b),displayName:"横向对齐"}),Z=pt({displayName:"字号缩放"}),G=pt({displayName:"数字匹配符"}),W=pt({displayName:"逗号名"}),V=pt({displayName:"点号名"}),U=pt({displayName:"最大宽度"}),K=pt({displayName:"距间"}),q(J=B(J=ft((Q=s((j=function(t){function e(){for(var n,i=arguments.length,e=new Array(i),o=0;o<i;o++)e[o]=arguments[o];return n=t.call.apply(t,[this].concat(e))||this,u(n,"_",Q,c(n)),u(n,"numberAtlas",$,c(n)),u(n,"horizontalAlign",tt,c(n)),u(n,"fontScale",nt,c(n)),u(n,"numberMatch",it,c(n)),u(n,"commaMatch",et,c(n)),u(n,"dotMatch",ot,c(n)),u(n,"maxWidth",rt,c(n)),u(n,"space",at,c(n)),n._runtime={from:0,to:0,current:0,commaIndex:0,dotIndex:0},n._transform=null,n._duration=1,n._pool=[],n._visibles=[],n._format=null,n._layout=null,n._tween=null,n}n(e,t);var o=e.prototype;return o.format=function(t){return this._format=t,this},o.duration=function(t){return this._duration=Math.max(.1,t),this},o.set=function(t){this.node.active||(this.node.active=!0);var n=this.toString(t).split("");return this.calcLayoutScale(n),this._runtime.current=t,this._runtime.from=t,this._runtime.to=t,this.updateRuntime(n,!0),this},o.play=function(t){var n=this;return this.node.active||(this.node.active=!0),new Promise((function(i){n.stop();var e=n.toString(t).split("");n.calcLayoutScale(e),n.rollHandler(t,i)}))},o.stop=function(){return this._tween&&this._tween.stop(),this},o.calcLayoutScale=function(t){for(var n=0,i=0;i<t.length;i++){var e=t[i],o=this.getFrameName(e),r=this.numberAtlas.getSpriteFrame(o);r&&(n+=r.originalSize.width*this.fontScale+this.space)}var a=1;n>this.maxWidth&&(a=this.maxWidth/n),this.layout.node.setScale(a,a,1)},o.toString=function(t){return this._format&&"function"==typeof this._format?this._format(t):l.formatAmount(t)},o.getSprite=function(){if(this._pool.length>0)return this._pool.pop();var t=new w("SCORE_ROLLER_SPRITE");t.layer=this.node.layer;var n=t.addComponent(v);return n.sizeMode=v.SizeMode.TRIMMED,n.type=v.Type.SIMPLE,n.trim=!0,n},o.rollHandler=function(t,n){var i=this;this._runtime.from=this._runtime.current,this._runtime.to=t,this._tween=_().target(this._runtime).to(this._duration,{current:{value:t,progress:function(t,n,e,o){t=i._runtime.from,n=i._runtime.to,i._runtime.current=t+(n-t)*o;var r=i.toString(i._runtime.current).split("");return i.updateRuntime(r),i._runtime.current}}},{easing:"smooth"}).call(n).start()},o.updateRuntime=function(t,n){if(void 0===n&&(n=!1),t){for(var i=this._runtime.commaIndex,e=this._runtime.dotIndex,o=0;o<t.length;o++){var r=t[o],a=this._visibles[o];a||((a=this.getSprite()).node.parent=this.layout.node,a.node.active=!0,a.node.setScale(this.fontScale,this.fontScale,1),this._visibles.push(a));var s=1;","==r?i=o:"."==r?e=o:s=.5,a.node.getComponent(O).anchorY=s;var u=this.getFrameName(r),c=this.numberAtlas.getSpriteFrame(u);a.spriteFrame=c}for(;this._visibles.length>t.length;){var l=this._visibles.pop();l.node.active=!1,l.node.parent=this.node,this._pool.push(l)}(n||i!=this._runtime.commaIndex||e!=this._runtime.dotIndex||t.length!=this._visibles.length)&&(this.layout.enabled=!0,this.layout.updateLayout(),this.layout.enabled=!1),this.transform.setContentSize(this.layout.getComponent(O).contentSize),this._runtime.commaIndex=i,this._runtime.dotIndex=e}},o.getFrameName=function(t){var n="";switch(t){case",":n=this.commaMatch;break;case".":n=this.dotMatch;break;default:n=z.format(this.numberMatch,t)}return n},i(e,[{key:"transform",get:function(){return this._transform||(this._transform=this.getComponent(O)||this.addComponent(O),this.transform.anchorX=.5,this.transform.anchorY=.5),this._transform}},{key:"layout",get:function(){if(!this._layout){var t=new w("SCORE_ROLLER_SCALE_NODE");t.layer=this.node.layer,t.parent=this.node,t.setPosition(0,0),this._layout=t.addComponent(I),this._layout.type=I.Type.HORIZONTAL,this._layout.resizeMode=I.ResizeMode.CONTAINER,this._layout.spacingX=this.space,this._layout.affectedByScale=!0;var n=.5;this.horizontalAlign===b.LEFT?n=0:this.horizontalAlign===b.RIGHT&&(n=1),this._layout.getComponent(O).anchorX=n,this._layout.enabled=!1}return this._layout}},{key:"score",get:function(){return this._runtime.current}}]),e}(m)).prototype,"_",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$=s(j.prototype,"numberAtlas",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),tt=s(j.prototype,"horizontalAlign",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return b.CENTER}}),nt=s(j.prototype,"fontScale",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),it=s(j.prototype,"numberMatch",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"number_{0}"}}),et=s(j.prototype,"commaMatch",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"comma"}}),ot=s(j.prototype,"dotMatch",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"dot"}}),rt=s(j.prototype,"maxWidth",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),at=s(j.prototype,"space",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),J=j))||J)||J)||J));h._RF.pop(),h._RF.push({},"05846rqTT5BKr7P1yzmrcRv","UIMove",void 0);var _t,mt,gt,yt,bt,wt,vt=function(t){return t[t.Center=0]="Center",t[t.Center_X=1]="Center_X",t[t.Center_Y=2]="Center_Y",t[t.Outside_Top=3]="Outside_Top",t[t.Outside_Bottom=4]="Outside_Bottom",t[t.Outside_Left=5]="Outside_Left",t[t.Outside_Right=6]="Outside_Right",t[t.Inside_Top=7]="Inside_Top",t[t.Inside_Bottom=8]="Inside_Bottom",t[t.Inside_Left=9]="Inside_Left",t[t.Inside_Right=10]="Inside_Right",t}(vt||{});t("U",function(){function t(){}return t.getOptions=function(t){var n=t.parent.getComponent(O),i=t.getComponent(O);return{position:t.getPosition(),parent:n,transform:i}},t.moveHandler=function(t,n,i,e){return new Promise((function(o,r){if(A.stopAllByTarget(n),!t)return o();_(n).to(i,{position:t},{easing:e}).call((function(){o()})).start()}))},t.getParentOutsideBottom=function(t){if(!t||!t.parent)return new S;var n=this.getOptions(t),i=n.parent,e=n.transform,o=n.position;return o.y=-(i.height*i.anchorY+e.height*(1-e.anchorY)),o},t.getParentOutsideRight=function(t){if(!t||!t.parent)return new S;var n=this.getOptions(t),i=n.parent,e=n.transform,o=n.position;return o.x=i.width*(1-i.anchorX)+e.width*e.anchorX,o},t.getParentOutsideLeft=function(t){if(!t||!t.parent)return new S;var n=this.getOptions(t),i=n.parent,e=n.transform,o=n.position;return o.x=-(i.width*i.anchorX+e.width*(1-e.anchorX)),o},t.getParentOutsideTop=function(t){if(!t||!t.parent)return new S;var n=this.getOptions(t),i=n.parent,e=n.transform,o=n.position;return o.y=i.height*(1-i.anchorY)+e.height*e.anchorY,o},t.getParentInsideTop=function(t){if(!t||!t.parent)return new S;var n=this.getOptions(t),i=n.parent,e=n.transform,o=n.position;return o.y=i.height*(1-i.anchorY)-e.height*(1-e.anchorY),o},t.getParentInsideBottom=function(t){if(!t||!t.parent)return new S;var n=this.getOptions(t),i=n.parent,e=n.transform,o=n.position;return o.y=-i.height*i.anchorY+e.height*e.anchorY,o},t.getParentInsideLeft=function(t){if(!t||!t.parent)return new S;var n=this.getOptions(t),i=n.parent,e=n.transform,o=n.position;return o.x=-i.width*i.anchorX+e.width*e.anchorX,o},t.getParentInsideRight=function(t){if(!t||!t.parent)return new S;var n=this.getOptions(t),i=n.parent,e=n.transform,o=n.position;return o.x=i.width*(1-i.anchorX)-e.width*(1-e.anchorX),o},t.getParentCenter=function(t){if(!t||!t.parent)return new S;var n=this.getOptions(t),i=n.parent,e=n.transform,o=n.position;return o.x=(.5-i.anchorX)*i.width+(e.anchorX-.5)*e.width,o.y=(.5-i.anchorY)*i.height+(e.anchorY-.5)*e.height,o},t.getPositionByType=function(t,n){switch(n){case vt.Center_X:var i=this.getParentCenter(t);return i.y=t.position.y,i;case vt.Center_Y:var e=this.getParentCenter(t);return e.x=t.position.x,e;case vt.Center:return this.getParentCenter(t);case vt.Outside_Bottom:return this.getParentOutsideBottom(t);case vt.Outside_Left:return this.getParentOutsideLeft(t);case vt.Outside_Right:return this.getParentOutsideRight(t);case vt.Outside_Top:return this.getParentOutsideTop(t);case vt.Inside_Top:return this.getParentInsideTop(t);case vt.Inside_Bottom:return this.getParentInsideBottom(t);case vt.Inside_Left:return this.getParentInsideLeft(t);case vt.Inside_Right:return this.getParentInsideRight(t)}},t.target=function(t){var n,i=this,e=.5,o="linear",r=0,a=t.getComponent(N);a&&(a.updateAlignment(),a.enabled=!1);var s={from:function(n){var e=i.getPositionByType(t,n);return t.setPosition(e),s},to:function(e){return n=i.getPositionByType(t,e),s},delay:function(t){return r=t,s},duration:function(t){return e=t,s},easing:function(t){return o=t,s},start:function(){return new Promise((function(i){if(A.stopAllByTarget(t),!n)return i();_(t).delay(r).to(e,{position:n},{easing:o}).call((function(){a&&(a.enabled=!0),i()})).start()}))}};return s},t.from=function(t,n){var i=this.getPositionByType(t,n);t.setPosition(i)},t.to=function(t,n,i,e){var o=this.getPositionByType(n,t);return this.moveHandler(o,n,i,e)},t}()).Type=vt,h._RF.pop(),h._RF.push({},"02adfz2gYtJ6Lgwef0LoDdP","index",void 0),function(t){var n=function(t){return t[t.Active=0]="Active",t[t.Animation=1]="Animation",t[t.Scale=2]="Scale",t[t.Position=3]="Position",t[t.Spine=4]="Spine",t[t.Opacity=5]="Opacity",t}({});t.Type=n;var i=function(t){return t[t.to=0]="to",t[t.by=1]="by",t}({});t.TweenAction=i;var e=function(t){return t[t.linear=0]="linear",t[t.smooth=1]="smooth",t[t.fade=2]="fade",t[t.constant=3]="constant",t[t.quadIn=4]="quadIn",t[t.quadOut=5]="quadOut",t[t.quadInOut=6]="quadInOut",t[t.quadOutIn=7]="quadOutIn",t[t.cubicIn=8]="cubicIn",t[t.cubicOut=9]="cubicOut",t[t.cubicInOut=10]="cubicInOut",t[t.cubicOutIn=11]="cubicOutIn",t[t.quartIn=12]="quartIn",t[t.quartOut=13]="quartOut",t[t.quartInOut=14]="quartInOut",t[t.quartOutIn=15]="quartOutIn",t[t.quintIn=16]="quintIn",t[t.quintOut=17]="quintOut",t[t.quintInOut=18]="quintInOut",t[t.quintOutIn=19]="quintOutIn",t[t.sineIn=20]="sineIn",t[t.sineOut=21]="sineOut",t[t.sineInOut=22]="sineInOut",t[t.sineOutIn=23]="sineOutIn",t[t.expoIn=24]="expoIn",t[t.expoOut=25]="expoOut",t[t.expoInOut=26]="expoInOut",t[t.expoOutIn=27]="expoOutIn",t[t.circIn=28]="circIn",t[t.circOut=29]="circOut",t[t.circInOut=30]="circInOut",t[t.circOutIn=31]="circOutIn",t[t.elasticIn=32]="elasticIn",t[t.elasticOut=33]="elasticOut",t[t.elasticInOut=34]="elasticInOut",t[t.elasticOutIn=35]="elasticOutIn",t[t.backIn=36]="backIn",t[t.backOut=37]="backOut",t[t.backInOut=38]="backInOut",t[t.backOutIn=39]="backOutIn",t[t.bounceIn=40]="bounceIn",t[t.bounceOut=41]="bounceOut",t[t.bounceInOut=42]="bounceInOut",t[t.bounceOutIn=43]="bounceOutIn",t}({});t.Easing=e;t.ILinkHandler=function(){this._node=null}}(_t||(_t={})),h._RF.pop(),h._RF.push({},"d7d60dguaZEyZIMg1FY9FaC","ActiveHandler",void 0);var Ot,It,At,St,Nt,Et,Tt,Rt,Lt,Ft=p.ccclass,Ht=p.property,zt=(mt=Ft("ActiveHandler"),gt=Ht({displayName:"激活状态"}),mt((bt=function(t){function i(){for(var n,i=arguments.length,e=new Array(i),o=0;o<i;o++)e[o]=arguments[o];return n=t.call.apply(t,[this].concat(e))||this,u(n,"active",wt,c(n)),n}n(i,t);var e=i.prototype;return e.init=function(t){this._node=t},e.execute=function(){this._node.active=this.active},e.reset=function(){this._node.active=!this.active},i}(_t.ILinkHandler),wt=s(bt.prototype,"active",[gt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),yt=bt))||yt);h._RF.pop(),h._RF.push({},"c959bN80E9DwoZE7fryJ1Nw","AnimationHandler",void 0);var Ct,kt,Pt,xt,Mt,qt,Bt,Xt,Yt,Dt,Zt,Gt=p.ccclass,Wt=p.property,Vt=(Ot=Gt("AnimationHandler"),It=Wt({displayName:"动画名"}),At=Wt({type:E.WrapMode,displayName:"循环模式"}),St=Wt({displayName:"播放完成后是否隐藏"}),Ot((Et=function(t){function i(){for(var n,i=arguments.length,e=new Array(i),o=0;o<i;o++)e[o]=arguments[o];return n=t.call.apply(t,[this].concat(e))||this,u(n,"anim",Tt,c(n)),u(n,"wrapMode",Rt,c(n)),u(n,"hideOnFinish",Lt,c(n)),n._animation=null,n}n(i,t);var e=i.prototype;return e.init=function(t){var n;this._node=t,this._animation=this._node.getComponent(T),null==(n=this._animation)||n.on(T.EventType.FINISHED,this._onFinished,this)},e.execute=function(){if(!this._animation)return console.warn("Animation component not found");this._node.active||(this._node.active=!0);var t=this.anim||this._animation.defaultClip.name,n=this._animation.getState(t);n&&(n.wrapMode=this.wrapMode),this._animation.play(this.anim)},e.reset=function(){this._animation&&this._animation.stop(),this._onFinished()},e._onFinished=function(){this.hideOnFinish&&(this._node.active=!1)},i}(_t.ILinkHandler),Tt=s(Et.prototype,"anim",[It],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Rt=s(Et.prototype,"wrapMode",[At],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return E.WrapMode.Default}}),Lt=s(Et.prototype,"hideOnFinish",[St],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Nt=Et))||Nt);h._RF.pop(),h._RF.push({},"113d7VaEYhG5p0Z3eaOcAqS","OpacityHandler",void 0);var Ut,Kt,Jt,jt,Qt,$t,tn,nn,en,on,rn,an=p.ccclass,sn=p.property,un=(Ct=an("OpacityHandler"),kt=sn({displayName:"透明度"}),Pt=sn({displayName:"缓动时间"}),xt=sn({type:y(_t.Easing)}),Mt=sn({type:y(_t.TweenAction),displayName:"Tween动作",radioGroup:!0}),Ct((Bt=function(t){function i(){for(var n,i=arguments.length,e=new Array(i),o=0;o<i;o++)e[o]=arguments[o];return n=t.call.apply(t,[this].concat(e))||this,u(n,"opacity",Xt,c(n)),u(n,"duration",Yt,c(n)),u(n,"easing",Dt,c(n)),u(n,"tweenAction",Zt,c(n)),n._originOpacity=255,n._uiOpacity=null,n._tween=null,n}n(i,t);var e=i.prototype;return e.init=function(t){var n;this._node=t,this._uiOpacity=this._node.getComponent(R),this._originOpacity=null==(n=this._uiOpacity)?void 0:n.opacity},e.execute=function(){var t;this._uiOpacity&&(null==(t=this._tween)||t.stop(),this._tween=new A(this._uiOpacity),this.tweenAction===_t.TweenAction.to?this._tween.to(this.duration,{opacity:this.opacity},{easing:this._getEasing()}):this._tween.by(this.duration,{opacity:this.opacity},{easing:this._getEasing()}),this._tween.start())},e.reset=function(){var t;this._uiOpacity&&(null==(t=this._tween)||t.stop(),this._uiOpacity.opacity!==this._originOpacity&&(this._tween=new A(this._uiOpacity),this._tween.to(this.duration,{opacity:this._originOpacity},{easing:this._getEasing()}).start()))},e._getEasing=function(){return _t.Easing[this.easing]},i}(_t.ILinkHandler),Xt=s(Bt.prototype,"opacity",[kt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 255}}),Yt=s(Bt.prototype,"duration",[Pt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.3}}),Dt=s(Bt.prototype,"easing",[xt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return _t.Easing.fade}}),Zt=s(Bt.prototype,"tweenAction",[Mt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return _t.TweenAction.to}}),qt=Bt))||qt);h._RF.pop(),h._RF.push({},"48207o+IkFKsr1yO7gtKmMg","PositionHandler",void 0);var cn,ln,hn,pn,dn,fn,_n,mn,gn,yn,bn,wn=p.ccclass,vn=p.property,On=(Ut=wn("PositionHandler"),Kt=vn({displayName:"位置"}),Jt=vn({displayName:"缓动时间"}),jt=vn({type:y(_t.Easing)}),Qt=vn({type:y(_t.TweenAction),displayName:"Tween动作",radioGroup:!0}),Ut((tn=function(t){function i(){for(var n,i=arguments.length,e=new Array(i),o=0;o<i;o++)e[o]=arguments[o];return n=t.call.apply(t,[this].concat(e))||this,u(n,"position",nn,c(n)),u(n,"duration",en,c(n)),u(n,"easing",on,c(n)),u(n,"tweenAction",rn,c(n)),n._originPosition=new S,n._tween=null,n}n(i,t);var e=i.prototype;return e.init=function(t){this._node=t,this._node.getPosition(this._originPosition)},e.execute=function(){var t;null==(t=this._tween)||t.stop(),this._tween=new A(this._node),this.tweenAction===_t.TweenAction.to?this._tween.to(this.duration,{position:this.position},{easing:this._getEasing()}):this._tween.by(this.duration,{position:this.position},{easing:this._getEasing()}),this._tween.start()},e.reset=function(){var t;null==(t=this._tween)||t.stop(),this._node.position.equals(this._originPosition)||(this._tween=new A(this._node),this._tween.to(this.duration,{position:this._originPosition},{easing:this._getEasing()}).start())},e._getEasing=function(){return _t.Easing[this.easing]},i}(_t.ILinkHandler),nn=s(tn.prototype,"position",[Kt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new S(1,1,1)}}),en=s(tn.prototype,"duration",[Jt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.3}}),on=s(tn.prototype,"easing",[jt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return _t.Easing.smooth}}),rn=s(tn.prototype,"tweenAction",[Qt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return _t.TweenAction.to}}),$t=tn))||$t);h._RF.pop(),h._RF.push({},"8497dO4oeJJXZnmNdyNDR0V","ScaleHandler",void 0);var In,An,Sn,Nn,En,Tn,Rn,Ln,Fn,Hn=p.ccclass,zn=p.property,Cn=(cn=Hn("ScaleHandler"),ln=zn({displayName:"缩放"}),hn=zn({displayName:"缓动时间"}),pn=zn({type:y(_t.Easing)}),dn=zn({type:y(_t.TweenAction),displayName:"Tween动作",radioGroup:!0}),cn((_n=function(t){function i(){for(var n,i=arguments.length,e=new Array(i),o=0;o<i;o++)e[o]=arguments[o];return n=t.call.apply(t,[this].concat(e))||this,u(n,"scale",mn,c(n)),u(n,"duration",gn,c(n)),u(n,"easing",yn,c(n)),u(n,"tweenAction",bn,c(n)),n._originScale=new S,n._tween=null,n}n(i,t);var e=i.prototype;return e.init=function(t){this._node=t,this._node.getScale(this._originScale)},e.execute=function(){var t;null==(t=this._tween)||t.stop(),this._tween=new A(this._node),this.tweenAction===_t.TweenAction.to?this._tween.to(this.duration,{scale:this.scale},{easing:this._getEasing()}):this._tween.by(this.duration,{scale:this.scale},{easing:this._getEasing()}),this._tween.start()},e.reset=function(){var t;null==(t=this._tween)||t.stop(),this._node.scale.equals(this._originScale)||(this._tween=new A(this._node),this._tween.to(this.duration,{scale:this._originScale},{easing:this._getEasing()}).start())},e._getEasing=function(){return _t.Easing[this.easing]},i}(_t.ILinkHandler),mn=s(_n.prototype,"scale",[ln],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new S(1,1,1)}}),gn=s(_n.prototype,"duration",[hn],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.3}}),yn=s(_n.prototype,"easing",[pn],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return _t.Easing.smooth}}),bn=s(_n.prototype,"tweenAction",[dn],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return _t.TweenAction.to}}),fn=_n))||fn);h._RF.pop(),h._RF.push({},"eac7c0WoQhA+ZqxXCVpuaLS","SpineHandler",void 0);var kn,Pn,xn,Mn,qn,Bn,Xn,Yn,Dn,Zn,Gn,Wn,Vn,Un,Kn,Jn,jn,Qn,$n,ti=p.ccclass,ni=p.property,ii=(In=ti("SpineHandler"),An=ni({displayName:"动画名"}),Sn=ni({displayName:"循环"}),Nn=ni({displayName:"播放完成后是否隐藏"}),In((Tn=function(t){function i(){for(var n,i=arguments.length,e=new Array(i),o=0;o<i;o++)e[o]=arguments[o];return n=t.call.apply(t,[this].concat(e))||this,u(n,"anim",Rn,c(n)),u(n,"loop",Ln,c(n)),u(n,"hideOnFinish",Fn,c(n)),n._spine=null,n._originAnim="",n._originLoop=!1,n}n(i,t);var e=i.prototype;return e.init=function(t){var n,i;this._node=t,this._spine=this._node.getComponent(L.Skeleton),this._originAnim=null==(n=this._spine)?void 0:n.animation,this._originLoop=null==(i=this._spine)?void 0:i.loop},e.execute=function(){if(this._spine){var t;if(this._node.active||(this._node.active=!0),!this.loop)null==(t=this._spine)||t.setCompleteListener(this._onFinished.bind(this));var n=this.anim||this._originAnim,i=this.loop||this._originLoop;this._spine.setAnimation(0,n,i)}},e.reset=function(){},e._onFinished=function(){var t;null==(t=this._spine)||t.setCompleteListener(null),this.hideOnFinish?this._node.active=!1:this._spine.setAnimation(0,this._originAnim,this._originLoop)},i}(_t.ILinkHandler),Rn=s(Tn.prototype,"anim",[An],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Ln=s(Tn.prototype,"loop",[Sn],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Fn=s(Tn.prototype,"hideOnFinish",[Nn],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),En=Tn))||En);h._RF.pop(),h._RF.push({},"239abV4ZbZDs4996aHotXtL","LinkNode",void 0);var ei,oi,ri,ai,si,ui=p.ccclass,ci=p.property,li=(kn=ui("LinkNode"),Pn=ci({type:w,displayName:"联动节点"}),xn=ci({type:y(_t.Type),displayName:"联动类型"}),Mn=ci({type:zt,displayName:"动作",visible:function(){return this.type==_t.Type.Active}}),qn=ci({type:Vt,displayName:"动作",visible:function(){return this.type==_t.Type.Animation}}),Bn=ci({type:ii,displayName:"动作",visible:function(){return this.type==_t.Type.Spine}}),Xn=ci({type:Cn,displayName:"动作",visible:function(){return this.type==_t.Type.Scale}}),Yn=ci({type:On,displayName:"动作",visible:function(){return this.type==_t.Type.Position}}),Dn=ci({type:un,displayName:"动作",visible:function(){return this.type==_t.Type.Opacity}}),kn((Wn=s((Gn=function(){function t(){u(this,"node",Wn,this),u(this,"type",Vn,this),u(this,"activeHandler",Un,this),u(this,"animationHandler",Kn,this),u(this,"spineHandler",Jn,this),u(this,"scaleHandler",jn,this),u(this,"positionHandler",Qn,this),u(this,"opacityHandler",$n,this),this._handler=null,this._inited=!1}var n=t.prototype;return n.init=function(){this._inited||this.node&&(this._handler=this._getHandler(),this._handler.init(this.node),this._inited=!0)},n.execute=function(){if(!this._inited)return console.warn("LinkNode not init");this._handler.execute()},n.reset=function(){if(!this._inited)return console.warn("LinkNode not init");this._handler.reset()},n._getHandler=function(){switch(this.type){case _t.Type.Active:return this.activeHandler;case _t.Type.Animation:return this.animationHandler;case _t.Type.Spine:return this.spineHandler;case _t.Type.Scale:return this.scaleHandler;case _t.Type.Position:return this.positionHandler;case _t.Type.Opacity:return this.opacityHandler}},t}()).prototype,"node",[Pn],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Vn=s(Gn.prototype,"type",[xn],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return _t.Type.Active}}),Un=s(Gn.prototype,"activeHandler",[Mn],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new zt}}),Kn=s(Gn.prototype,"animationHandler",[qn],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Vt}}),Jn=s(Gn.prototype,"spineHandler",[Bn],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new ii}}),jn=s(Gn.prototype,"scaleHandler",[Xn],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Cn}}),Qn=s(Gn.prototype,"positionHandler",[Yn],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new On}}),$n=s(Gn.prototype,"opacityHandler",[Dn],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new un}}),Zn=Gn))||Zn);h._RF.pop(),h._RF.push({},"700f1h2t3RITa8B2yIWkslc","Linkage",void 0);var hi=p.ccclass,pi=p.property;t("L",(ei=hi("Linkage"),oi=pi({type:li,displayName:"联动节点"}),ei((si=s((ai=function(){function t(){u(this,"linkNodes",si,this),this._inited=!1}var n=t.prototype;return n.init=function(){this._inited||(this.linkNodes.forEach((function(t){t.init()})),this._inited=!0)},n.execute=function(){if(!this._inited)return console.warn("Linkage not init");this.linkNodes.forEach((function(t){t.execute()}))},n.reset=function(){if(!this._inited)return console.warn("Linkage not init");this.linkNodes.forEach((function(t){t.reset()}))},t}()).prototype,"linkNodes",[oi],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ri=ai))||ri));h._RF.pop()}}}));

System.register("chunks:///NodeHelper-50e02d60.js",["./BaseModule-8a96da91.js","cc"],(function(t){var n,e,r,i,o,a,s,u,c,h,l,f,d,p,g,v,y,_,m,w,E,b,k,x,C,N;return{setters:[function(t){n=t.a,e=t.N,r=t.F,i=t.g,o=t.P,a=t.B,s=t.d,u=t.e,c=t.D,h=t.M},function(t){l=t.cclegacy,f=t._decorator,d=t.Button,p=t.Node,g=t.Component,v=t.js,y=t.Animation,_=t.director,m=t.Widget,w=t.tween,E=t.Vec3,b=t.Color,k=t.UIRenderer,x=t.UIOpacity,C=t.bezier,N=t.SpriteAtlas}],execute:function(){var A;l._RF.push({},"0d80ePwRs9FkbA9qhYsvB9K","ButtonProxy",void 0);var M,V=f.ccclass,S=(f.property,f.menu),T=f.requireComponent,B=t("d",V("ButtonProxy")(A=T(d)(A=S("自定义扩展/ButtonProxy")(A=function(t){function o(){for(var n,e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return(n=t.call.apply(t,[this].concat(r))||this)._button=void 0,n._tag=void 0,n}n(o,t);var a=o.prototype;return a.bind=function(t,n){this._tag=n,this.button.clickEvents.push(t)},a.onLoad=function(){this.button.node.on(d.EventType.CLICK,this.onButtonClicked,this),this.button.node.on(p.EventType.TOUCH_START,this.onButtonPressed,this),this.button.node.on(p.EventType.TOUCH_END,this.onButtonReleased,this)},a.onButtonClicked=function(t){e.instance.emit(r.Event.OnButtonClicked,this,this._tag)},a.onButtonPressed=function(t){e.instance.emit(r.Event.OnButtonPressed,this,this._tag)},a.onButtonReleased=function(t){e.instance.emit(r.Event.OnButtonReleased,this,this._tag)},i(o,[{key:"button",get:function(){return this._button||(this._button=this.getComponent(d)||this.addComponent(d)),this._button}}]),o}(g))||A)||A)||A);l._RF.pop(),l._RF.push({},"817e9ufmX9LiKrZEdMfdmBe","BaseComponent",void 0);var I=f.ccclass,O=(f.property,t("B",I("BaseComponent")(M=function(t){function e(){return t.apply(this,arguments)||this}n(e,t);var r=e.prototype;return r.waitForResourcesToLoad=function(){var t=s(u().mark((function t(n,e){var r,i=this;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.map((function(t){return new Promise((function(n){i.schedule((function r(){e(t)&&(i.unschedule(r),n(null))}))}))})),t.next=4,Promise.all(r);case 4:case"end":return t.stop()}}),t)})));return function(n,e){return t.apply(this,arguments)}}(),r.playSpine=function(t,n,e){if(t)return o.new((function(r){var i;if(n=Array.isArray(n)?n:[n],t.node.active||(t.node.active=!0),t.clearAnimations(),i=t.setAnimation(0,n[0],!(n.length>1)&&e),n.length>1)for(var o=1;o<n.length;o++){var a=t.addAnimation(0,n[o],!(o<n.length-2)&&e);o<n.length-1&&(i=a)}t.setTrackCompleteListener(i,(function(t){i.listener.complete=null,r()}))}),this)},r.bindButtonProxy=function(t,n,e,r){if(t){var i=t.getComponent(B)||t.addComponent(B),o=new g.EventHandler;return o.target=this.node,o.component=v.getClassName(this),r&&(o.customEventData=r),o.handler=n,i.bind(o,e),i}},r.createEvent=function(t,n,e,r){void 0===e&&(e=!1);var i=new g.EventHandler;i.target=this.node,i.component=v.getClassName(this),i.handler=n,i.customEventData=r,e&&(t.length=0),t.push(i)},r.playParticleSystem2D=function(t){t&&(t.node.activeInHierarchy||(t.node.active=!0),t.resetSystem())},r.playParticleSystem=function(t){t&&(t.node.activeInHierarchy||(t.node.active=!0),t.play())},r.playAnimation=function(t,n){var e=this;if(t)return t.node.activeInHierarchy||(t.node.active=!0),n=n||t.defaultClip.name,new Promise((function(r){t.once(y.EventType.FINISHED,(function(){t.targetOff(e),r()}),e),t.play(n)}))},r.initStateToFirstFrame=function(t,n){if(t){t.stop(),n=n||t.defaultClip.name;var e=t.getState(n);e.setTime(0),e.sample()}},e}(a))||M));l._RF.pop(),l._RF.push({},"57ec6KuWdxGx7p+rg5fQfXu","NodeFinder",void 0);var P,R=t("N",function(){function t(){}return t.findBindingNodes=function(t){var n=t.constructor[c.BIND_PROPS_KEY];if(n){var e=_.getScene();for(var r in n){var i=n[r],o=i.type,a=i.$_fromRoot?e:t.node,s=null;(s=i.$_path?t.node.name==i.$_path?t.node:a.getChildByPath(i.$_path):t.node.name==r?t.node:this.findNodeByName(a,r))?"cc.Node"!==o?(t[r]=s.getComponent(o),!t[r]&&i.$_autoCreate&&(t[r]=s.addComponent(o)),t[r]?this._processEvent(t,r,o,i):console.warn(v.getClassName(t)+" 节点: "+(i.$_path||r)+" 找不到组件: "+o)):t[r]=s:console.warn(v.getClassName(t)+" 无法从父节点 "+a.name+" 中找到: "+(i.$_path||r))}}},t.findNodeByName=function(t,n){var e=null;if(t.name===n)e=t;else for(var r=0;r<t.children.length&&!(e=this.findNodeByName(t.children[r],n));r++);return e},t._processEvent=function(t,n,e,r){switch(e){case"cc.Button":var i=r;this._handleEvents(t,n,i.$_clickEvents,(function(t){return t.clickEvents}),i.$_customData);break;case"cc.EditBox":var o=r;this._handleEvents(t,n,o.$_editingDidBeganEvents,(function(t){return t.editingDidBegan})),this._handleEvents(t,n,o.$_textChangedEvents,(function(t){return t.textChanged})),this._handleEvents(t,n,o.$_editingDidEndedEvents,(function(t){return t.editingDidEnded})),this._handleEvents(t,n,o.$_editingReturnEvents,(function(t){return t.editingReturn}));break;case"cc.PageView":var a=r;this._handleEvents(t,n,a.$_pageEvents,(function(t){return t.pageEvents}));break;case"cc.ScrollView":var s=r;this._handleEvents(t,n,s.$_scrollEvents,(function(t){return t.scrollEvents}));break;case"cc.Toggle":var u=r;this._handleEvents(t,n,u.$_clickEvents,(function(t){return t.clickEvents})),this._handleEvents(t,n,u.$_checkEvents,(function(t){return t.checkEvents}));break;case"cc.ToggleContainer":var c=r;this._handleEvents(t,n,c.$_checkEvents,(function(t){return t.checkEvents}));break;case"cc.Slider":var h=r;this._handleEvents(t,n,h.$_slideEvents,(function(t){return t.slideEvents}));break;case"cc.VideoPlayer":var l=r;this._handleEvents(t,n,l.$_videoPlayerEvents,(function(t){return t.videoPlayerEvent}));break;case"cc.WebView":var f=r;this._handleEvents(t,n,f.$_webviewEvents,(function(t){return t.webviewEvents}))}},t._handleEvents=function(t,n,e,r,i){for(var o=[].concat(e||[]),a=0;a<o.length;a++){var s=o[a],u=new g.EventHandler;u.target=t.node,u.component=v.getClassName(t),u.handler=s,u.customEventData=i,r(t[n]).push(u)}},t}());l._RF.pop(),l._RF.push({},"906b1NJCZhBB52ZS5K50Ml/","BaseView",void 0);var F=f.ccclass;f.property,t("b",F("BaseView")(P=function(t){function r(){var n;return(n=t.call(this)||this)._module=void 0,n._viewModel=void 0,n._onLoad(),n._onDestroy(),n}n(r,t);var o=r.prototype;return o._initModule=function(){var t=this.constructor[c.MODULE_KEY];t&&(this._module=h.instance.get(t))},o._initViewModel=function(){var t=this.constructor[c.VIEWMODEL_KEY];t&&this._module&&(this._viewModel=this._module.getViewModel(t))},o._onLoad=function(){var t=this,n=this.onLoad;this.onLoad=function(){t._initModule(),t._initViewModel(),R.findBindingNodes(t),t.callFuncIsExist(n),t._initBindings(t.viewModel),t._listener()}},o._onDestroy=function(){var t=this,n=this.onDestroy;this.onDestroy=function(){var r;e.instance.offContext(t),null==(r=t.module)||r.notify.offContext(t),t.callFuncIsExist(n)}},o._listener=function(){var t=this,n=this.constructor[c.GLOBAL_LISTENERS_KEY]||[];n.forEach((function(n){var r=t[n.key];"function"==typeof r&&e.instance.on(n.event,r,t,n.once)})),this.module&&(n=this.constructor[c.MODULE_LISTENERS_KEY]||[]).forEach((function(n){var e=t[n.key];"function"==typeof e&&t.module.notify.on(n.event,e,t,n.once)}))},o.bind=function(t){var n=this;this.viewModel.bind(t,(function(t,e){"function"==typeof n[t]?n[t](e):n[t]=e}),this)},o._initBindings=function(t){var n=this;t&&(this.constructor[c.BINDINGS_KEY]||[]).forEach((function(t){n.bind(t)}))},o.autoAlignWidget=function(){this.node.setPosition(0,0,0);var t=this.node.getComponent(m)||this.node.addComponent(m);t.left=t.right=t.top=t.bottom=0,t.isAlignLeft=t.isAlignRight=t.isAlignTop=t.isAlignBottom=!0,t.updateAlignment()},i(r,[{key:"module",get:function(){return this._module}},{key:"viewModel",get:function(){return this._viewModel}}]),r}(O))||P);l._RF.pop(),l._RF.push({},"7eff4t6yZ9Ifqk4L4B3bANG","TweenManager",void 0);var L,D=function(){function t(t){this.tween=null,this.actions=[],this.node=t}var n=t.prototype;return n.getVec3=function(t){return"number"==typeof t?new E(t,t,t):new E(t.x,t.y,t.z)},n.getColor=function(t){return"number"==typeof t?new b(t,t,t,t):new b(t.r,t.g,t.b,t.a)},n.stop=function(){var t;return null==(t=this.tween)||t.stop(),this.tween=null,this},n.union=function(){return this.actions.push({union:!0}),this},n.repeatForever=function(){return this.actions.push({repeat:-1}),this},n.repeat=function(t){return this.actions.push({repeat:t}),this},n.delay=function(t){return this.actions.push({delay:t}),this},n.call=function(t){return this.actions.push({callback:t}),this},n.clear=function(){return this.stop(),this.actions=[],this},n.start=function(){var t=this;this.stop(),this.tween=this.getTween(),this.node.active||(this.node.active=!0);var n=!1;return this.actions.forEach((function(e){var r,i;if(e.from&&"function"==typeof e.from&&e.from(),null!=(r=e.to)&&null!=(r=r.update)&&r.easing&&"string"!=typeof e.to.update.easing&&"function"!=typeof e.to.update.easing){var o=e.to.update.easing;e.to.update.easing=function(t){return o.easing(t)}}if(null!=(i=e.by)&&null!=(i=i.update)&&i.easing&&"string"!=typeof e.by.update.easing&&"function"!=typeof e.by.update.easing){var a=e.by.update.easing;e.by.update.easing=function(t){return a.easing(t)}}e.to&&t.tween.to(e.duration,e.to.value,e.to.update),e.by&&t.tween.by(e.duration,e.by.value,e.by.update),e.delay&&t.tween.delay(e.delay),e.callback&&t.tween.call(e.callback),e.union&&t.tween.union(),e.repeat&&(-1===e.repeat?(t.tween.repeatForever(),n=!0):t.tween.repeat(e.repeat))})),new Promise((function(e){if(n)return t.tween.start(),e();t.tween.call(e).start()}))},t}(),H=function(t){function e(n){var e;return(e=t.call(this,n)||this)._key="_TWEEN_SCALE_ORIGINAL_VALUE_",e.setOriginalValue(),e}n(e,t);var r=e.prototype;return r.getTween=function(){return w(this.node.scale)},r.setOriginalValue=function(){null==this.originalValue&&(this.node[this._key]=new E(this.node.scale.x,this.node.scale.y,this.node.scale.z))},r.reset=function(){return this.stop(),null!=this.originalValue&&this.node.setScale(this.originalValue.x,this.originalValue.y,this.originalValue.z),this},r.from=function(t,n){var e=this;void 0===n&&(n=!0);var r=null;return r="number"==typeof t?{x:t,y:t,z:1}:{x:t.x,y:t.y,z:1},this.actions.push({from:function(){e.node.setScale(r.x,r.y,1)}}),n&&this.node.setScale(r.x,r.y,1),this},r.push=function(t,n,e,r){var i,o=this;n=this.getVec3(n),this.actions.push(((i={duration:t})[r]={value:{x:n.x,y:n.y,z:1},update:{easing:e,onUpdate:function(t){o.node.setScale(t)}}},i))},r.to=function(t,n,e){return void 0===e&&(e="linear"),this.push(t,n,e,"to"),this},r.by=function(t,n,e){return void 0===e&&(e="linear"),this.push(t,n,e,"by"),this},i(e,[{key:"originalValue",get:function(){return this.node[this._key]}}]),e}(D),$=function(t){function e(n){var e;return(e=t.call(this,n)||this)._key="_TWEEN_COLOR_ORIGINAL_VALUE_",e._fromColor=new b(b.WHITE),e._target=null,null==e.originalValue&&(e.node[e._key]=new b(e.target.color.r,e.target.color.g,e.target.color.b,e.target.color.a)),e}n(e,t);var r=e.prototype;return r.getTween=function(){return w(new b(this._fromColor))},r.reset=function(){return this.stop(),null!=this.originalValue&&(this.target.color=new b(this.originalValue.r,this.originalValue.g,this.originalValue.b,this.originalValue.a)),this},r.from=function(t,n){var e=this;void 0===n&&(n=!0);var r=null;return r="number"==typeof t?{r:t,g:t,b:t,a:t}:{r:t.r,g:t.g,b:t.b,a:t.a},this._fromColor.set(r.r,r.g,r.b,r.a),this.actions.push({from:function(){e.target.color=new b(r.r,r.g,r.b,r.a)}}),n&&(this.target.color=new b(r.r,r.g,r.b,r.a)),this},r.to=function(t,n,e){var r=this;return void 0===e&&(e="linear"),n=this.getColor(n),this.actions.push({duration:t,to:{value:{r:n.r,g:n.g,b:n.b,a:n.a},update:{easing:e,onUpdate:function(t){r.target.color=t}}}}),this},i(e,[{key:"originalValue",get:function(){return this.node[this._key]}},{key:"target",get:function(){return this._target||(this._target=this.node.getComponent(k)||this.node.addComponent(k)),this._target}}]),e}(D),z=function(t){function e(n){var e;return(e=t.call(this,n)||this)._key="_TWEEN_OPACITY_ORIGINAL_VALUE_",e._target=null,null==e.originalValue&&(e.node[e._key]=e.target.opacity),e}n(e,t);var r=e.prototype;return r.getTween=function(){return w(this.target)},r.reset=function(){return this.stop(),null!=this.originalValue&&(this.target.opacity=this.originalValue),this},r.from=function(t,n){var e=this;return void 0===n&&(n=!0),this.actions.push({from:function(){e.target.opacity=t}}),n&&(this.target.opacity=t),this},r.to=function(t,n,e){return void 0===e&&(e="linear"),this.actions.push({duration:t,to:{value:{opacity:n},update:{easing:e}}}),this},r.in=function(t,n){return void 0===n&&(n="linear"),this.to(t,255,n)},r.out=function(t,n){return void 0===n&&(n="linear"),this.to(t,0,n)},i(e,[{key:"originalValue",get:function(){return this.node[this._key]}},{key:"target",get:function(){return this._target||(this._target=this.node.getComponent(x)||this.node.addComponent(x)),this._target}}]),e}(D),U=function(t){function e(n){var e;return(e=t.call(this,n)||this)._key="_TWEEN_POSITION_ORIGINAL_VALUE_",null==e.originalValue&&(n[e._key]=new E(n.position.x,n.position.y,n.position.z)),e}n(e,t);var r=e.prototype;return r.getTween=function(){return w(this.node.position)},r.push=function(t,n,e,r){var i,o=this;n=this.getVec3(n),this.actions.push(((i={duration:t})[r]={value:{x:n.x,y:n.y,z:n.z},update:{easing:e,onUpdate:function(t){o.node.setPosition(t)}}},i))},r.reset=function(){return this.stop(),null!=this.originalValue&&this.node.setPosition(this.originalValue.x,this.originalValue.y,this.originalValue.z),this},r.from=function(t,n){var e=this;void 0===n&&(n=!0);var r=null;return r="number"==typeof t?{x:t,y:t,z:t}:{x:t.x,y:t.y,z:t.z},this.actions.push({from:function(){e.node.setPosition(r.x,r.y,r.z)}}),n&&this.node.setPosition(r.x,r.y,r.z),this},r.to=function(t,n,e){return void 0===e&&(e="linear"),this.push(t,n,e,"to"),this},r.by=function(t,n,e){return void 0===e&&(e="linear"),this.push(t,n,e,"by"),this},r.bezierTo=function(t,n,e,r,i){var o=this;void 0===i&&(i="linear");var a=function(t,n,e,r,i){var o=1-i;return o*(o*(t+(3*n-t)*i)+3*e*i*i)+r*i*i*i},s=this.getVec3(n),u=this.getVec3(e),c=this.getVec3(r),h=new E;return this.actions.push({duration:t,to:{value:r,update:{easing:i,onUpdate:function(t,n){h.x=a(s.x,s.x,u.x,c.x,n),h.y=a(s.y,s.y,u.y,c.y,n),o.node.setPosition(h)}}}}),this},r.bezierTo2=function(t,n,e,r,i,o){var a=this;void 0===o&&(o="linear");var s=this.getVec3(n),u=this.getVec3(e),c=this.getVec3(r),h=this.getVec3(i),l=new E;return this.actions.push({duration:t,to:{value:i,update:{easing:o,onUpdate:function(t,n){!function(t,n,e,r,i,o){o.x=C(n.x,e.x,r.x,i.x,t),o.y=C(n.y,e.y,r.y,i.y,t),o.z=0}(n,s,u,c,h,l),a.node.setPosition(l)}}}}),this},i(e,[{key:"originalValue",get:function(){return this.node[this._key]}}]),e}(D),W=function(t){function e(n){var e;return(e=t.call(this,n)||this)._key="_TWEEN_ANGLE_ORIGINAL_VALUE_",null==e.originalValue&&(n[e._key]=n.angle),e}n(e,t);var r=e.prototype;return r.getTween=function(){return w(this.node)},r.push=function(t,n,e,r){var i;this.actions.push(((i={duration:t})[r]={value:{angle:n},update:{easing:e}},i))},r.reset=function(){return this.stop(),null!=this.originalValue&&(this.node.angle=this.originalValue),this},r.from=function(t,n){var e=this;return void 0===n&&(n=!0),this.actions.push({from:function(){e.node.angle=t}}),n&&(this.node.angle=t),this},r.to=function(t,n,e){return void 0===e&&(e="linear"),this.push(t,n,e,"to"),this},r.by=function(t,n,e){return void 0===e&&(e="linear"),this.push(t,n,e,"by"),this},i(e,[{key:"originalValue",get:function(){return this.node[this._key]}}]),e}(D),j=function(){function t(t){this._handlerMap=void 0,this._node=t,this._handlerMap=new Map}var n=t.prototype;return n.clear=function(){return this._handlerMap.forEach((function(t){t.clear()})),this._handlerMap.clear(),this},n.stop=function(){return this._handlerMap.forEach((function(t){t.stop()})),this},n.reset=function(){return this._handlerMap.forEach((function(t){t&&t.reset&&t.reset()})),this},n.start=function(){var t=s(u().mark((function t(){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Promise.all([].concat(this._handlerMap.values()).map((function(t){if(t&&t.start)return t.start()}))));case 1:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),i(t,[{key:"color",get:function(){if(this._handlerMap.has("color"))return this._handlerMap.get("color");var t=new $(this._node);return this._handlerMap.set("color",t),t}},{key:"scale",get:function(){if(this._handlerMap.has("scale"))return this._handlerMap.get("scale");var t=new H(this._node);return this._handlerMap.set("scale",t),t}},{key:"opacity",get:function(){if(this._handlerMap.has("opacity"))return this._handlerMap.get("opacity");var t=new z(this._node);return this._handlerMap.set("opacity",t),t}},{key:"position",get:function(){if(this._handlerMap.has("position"))return this._handlerMap.get("position");var t=new U(this._node);return this._handlerMap.set("position",t),t}},{key:"angle",get:function(){if(this._handlerMap.has("angle"))return this._handlerMap.get("angle");var t=new W(this._node);return this._handlerMap.set("angle",t),t}}]),t}(),Y=function(){function t(t){this._handlers=t}var n=t.prototype;return n.add=function(t){return this._handlers.push(t),this},n.start=function(){return Promise.all(this._handlers.map((function(t){t&&t.start&&t.start()})))},t}(),K=function(){function t(t){this._handlers=t}var n=t.prototype;return n.add=function(t){return this._handlers.push(t),this},n.start=function(){return this._handlers.reduce((function(t,n){return t.then((function(){return n.start()}))}),Promise.resolve())},t}(),G=function(){function t(){}return t.target=function(t){return new j(t)},t.parallel=function(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];return new Y(n)},t.sequence=function(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];return new K(n)},t}();t("a",function(){function t(){}return t.easeIn=function(n){return{_rate:n,easing:function(t){return Math.pow(t,this._rate)},reverse:function(){return t.easeIn(1/this._rate)}}},t.easeOut=function(n){return{_rate:n,easing:function(t){return Math.pow(t,1/this._rate)},reverse:function(){return t.easeOut(1/this._rate)}}},t.easeInOut=function(n){return{_rate:n,easing:function(t){return(t*=2)<1?.5*Math.pow(t,this._rate):1-.5*Math.pow(2-t,this._rate)},reverse:function(){return t.easeInOut(this._rate)}}},t.easeQuadraticActionIn=function(){return{easing:function(t){return Math.pow(t,2)},reverse:function(){return t.easeQuadraticActionIn()}}},t.easeQuadraticActionOut=function(){return{easing:function(t){return-t*(t-2)},reverse:function(){return t.easeQuadraticActionOut()}}},t}());l._RF.pop(),l._RF.push({},"4733dA8+f9N34SjD3LtWfCI","TweenProxy",void 0);var X=f.ccclass,q=(f.property,f.menu);t("T",X("TweenProxy")(L=q("自定义扩展/TweenProxy")(L=function(t){function e(){for(var n,e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return(n=t.call.apply(t,[this].concat(r))||this)._holder=null,n}n(e,t);var r=e.prototype;return r.reset=function(){return this.target.reset()},r.stop=function(){return this.target.stop()},r.startAllTweens=function(){return this.target.start()},r.clear=function(){return this.target.clear()},r.parallel=function(){return G.parallel.apply(G,arguments)},r.sequence=function(){return G.sequence.apply(G,arguments)},i(e,[{key:"target",get:function(){return this._holder||(this._holder=G.target(this.node)),this._holder}},{key:"color",get:function(){return this.target.color}},{key:"opacity",get:function(){return this.target.opacity}},{key:"position",get:function(){return this.target.position}},{key:"scale",get:function(){return this.target.scale}},{key:"angle",get:function(){return this.target.angle}}]),e}(g))||L)||L);l._RF.pop(),l._RF.push({},"984edhhr11AtIBxXcaMks2d","String",void 0);var Q=t("S",function(){function t(){}return t.join=function(t){for(var n=arguments.length,e=new Array(n>1?n-1:0),r=1;r<n;r++)e[r-1]=arguments[r];for(var i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];try{var a=i[0];if(Array.isArray(a)||a instanceof Array){var s=this.empty;for(o=0;o<a.length;o++){var u=a[o];o<a.length-1?s+=u+t:s+=u}return s}if("object"==typeof a){var c=this.empty,h=a,l=Object.keys(a);return l.forEach((function(n){c+=h[n]+t})),c=c.slice(0,c.length-t.length)}var f=i;return this.joinHandler(this.spreadArrays([t],f))}catch(t){return console.log(t),this.empty}},t.isNullOrWhiteSpace=function(t){try{return null==t||"undefined"==t||t.toString().replace(/\s/g,"").length<1}catch(t){return console.error(t),!1}},t.spreadArrays=function(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];for(var r=0,i=0,o=arguments.length;i<o;i++)r+=arguments[i].length;var a=Array(r),s=0;for(i=0;i<o;i++)for(var u=arguments[i],c=0,h=u.length;c<h;c++,s++)a[s]=u[c];return a},t.format=function(t){for(var n=arguments.length,e=new Array(n>1?n-1:0),r=1;r<n;r++)e[r-1]=arguments[r];for(var i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];try{return t.match(this.regexNumber)?this.formatHandler(this.regexNumber,t,i):t.match(this.regexObject)?this.formatHandler(this.regexObject,t,i,!0):t}catch(t){return console.error(t),this.empty}},t.formatHandler=function(t,n,e,r){var i=this;return void 0===r&&(r=!1),n.replace(t,(function(t,n){var o,a=t.split(":");return a.length>1&&(n=a[0].replace("{",""),t=a[1].replace("}","")),null==(o=r?e[0][n]:e[n])||null==o||t.match(/{\d+}/)||void 0!==(o=i.parsePattern(t,o))&&null!=o?o:i.empty}))},t.parsePattern=function(n,e){switch(n){case"L":return e=e.toLocaleLowerCase();case"U":return e=e.toLocaleUpperCase();case"d":if("string"==typeof e)return t.getDisplayDateFromString(e);if(e instanceof Date)return this.format("{0:00}.{1:00}.{2:0000}",e.getDate(),e.getMonth(),e.getFullYear());break;case"s":if("string"==typeof e)return this.getSortableDateFromString(e);if(e instanceof Date)return this.format("{0:0000}-{1:00}-{2:00}",e.getFullYear(),e.getMonth(),e.getDate());break;case"n":"string"!=typeof e&&(e=e.toString());var r=e.replace(/,/g,".");if(isNaN(parseFloat(r))||r.length<=3)break;var i=r.split(/[^0-9]+/g),o=i;i.length>1&&(o=[this.joinHandler(this.spreadArrays([""],i.splice(0,i.length-1))),i[i.length-1]]);var a=o[0],s=a.length%3,u=s>0?a.substring(0,s):this.empty,c=a.substring(s).match(/.{3}/g);return e=(u=u+"."+this.join(".",c))+(o.length>1?","+o[1]:"");case"x":return this.decimalToHexString(e);case"X":return this.decimalToHexString(e,!0)}return"number"!=typeof e&&isNaN(e)||isNaN(+n)||this.isNullOrWhiteSpace(e)?e:this.formatNumber(e,n)},t.decimalToHexString=function(t,n){void 0===n&&(n=!1);var e=parseFloat(t).toString(16);return n?e.toLocaleUpperCase():e},t.getDisplayDateFromString=function(t){var n;if((n=t.split("-")).length<=1)return t;var e=n[n.length-1],r=n[n.length-2],i=n[n.length-3];return(e=(e=e.split("T")[0]).split(" ")[0])+"."+r+"."+i},t.getSortableDateFromString=function(t){var n=t.replace(",","").split(".");if(n.length<=1)return t;var e=n[n.length-1].split(" "),r=this.empty;e.length>1&&(r=e[e.length-1]);var i=n[n.length-1].split(" ")[0]+"-"+n[n.length-2]+"-"+n[n.length-3];return!this.isNullOrWhiteSpace(r)&&r.length>1?i+="T"+r:i+="T00:00:00",i},t.formatNumber=function(t,n){var e=n.length,r=t.toString();if(e<=r.length)return r;var i=e-r.length;return new Array(i+=1).join("0")+r},t.joinHandler=function(t){for(var n=[],e=1;e<arguments.length;e++)n[e-1]=arguments[e];for(var r=this.empty,i=0;i<n.length;i++)if(!("string"==typeof n[i]&&this.isNullOrWhiteSpace(n[i])||"number"!=typeof n[i]&&"string"!=typeof n[i])){var o=""+n[i];r+=o;for(var a=i+1;a<n.length;a++)if(!this.isNullOrWhiteSpace(n[a])){r+=t,i=a-1;break}}return r},t}());Q.empty="",Q.regexNumber=/{(\d+(:\w*)?)}/g,Q.regexObject=/{(\w+(:\w*)?)}/g,l._RF.pop(),l._RF.push({},"a8bcahMt4ZCBIO6XvNQlqW2","NodeHelper",void 0);t("c",function(){function t(){}return t.setDark=function(t,n,e){if(void 0===e&&(e=.5),n)for(var r=n.getComponentsInChildren(k),i=0;i<r.length;i++){var o=r[i];o.node._originColor||(o.node._originColor=o.color.clone());var a=t?e:1,s=o.node._originColor.clone(),u=new b(s.r*a,s.g*a,s.b*a);o.color=u}},t.setAlpha=function(t,n){if(n)for(var e=n.getComponentsInChildren(k),r=0;r<e.length;r++){var i=e[r];i.node._originColor||(i.node._originColor=i.color.clone());var o=i.node._originColor.clone(),a=new b(o.r,o.g,o.b,255*t);i.color=a}},t.isRectWithinAnother=function(t,n,e){var r=t.node==n.node.parent?n.node.position:t.convertToNodeSpaceAR(n.node.worldPosition),i=!0;if("vertical"==e||"both"==e){var o=t.height*(1-t.anchorY),a=-t.height*t.anchorY,s=r.y+n.height*(1-n.anchorY),u=r.y-n.height*n.anchorY;o=Math.round(o),a=Math.round(a),s=Math.round(s),u=Math.round(u),i=i&&o>=s&&a<=u}if("horizontal"==e||"both"==e){var c=t.width*(1-t.anchorX),h=-t.width*t.anchorX,l=r.x+n.width*(1-n.anchorX),f=r.x-n.width*n.anchorX;c=Math.round(c),h=Math.round(h),l=Math.round(l),f=Math.round(f),i=i&&c>=l&&h<=f}return i},t.changeSprite=function(){var t=s(u().mark((function t(n,e,r,i){var o;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n&&e&&r){t.next=2;break}return t.abrupt("return");case 2:if(e.spriteAtlas){t.next=7;break}return t.next=5,n.load(r,N);case 5:o=t.sent,e.isValid&&(e.spriteAtlas=o);case 7:e.isValid&&e.changeSpriteFrameFromAtlas(i);case 8:case"end":return t.stop()}}),t)})));return function(n,e,r,i){return t.apply(this,arguments)}}(),t}());l._RF.pop()}}}));

System.register("chunks:///Pool-b92e663e.js",["./BaseModule-8a96da91.js","cc","./NodeHelper-50e02d60.js"],(function(e){var t,n,r,i,a,o,s,u,l,c,h,p,f,d,m,g,b,y,_,v,w,S,x,k,z,R,A,C,P,F,E,M,V,T,N,D,L,I;return{setters:[function(e){t=e.a,n=e.g,r=e._,i=e.b,a=e.c,o=e.T,s=e.d,u=e.e,l=e.C,c=e.M},function(e){h=e.cclegacy,p=e._decorator,f=e.Animation,d=e.Component,m=e.Prefab,g=e.Enum,b=e.instantiate,y=e.Color,_=e.NodePool,v=e.Vec2,w=e.SpriteAtlas,S=e.VerticalTextAlignment,x=e.Node,k=e.Layout,z=e.UITransform,R=e.Sprite,A=e.tween,C=e.assetManager,P=e.JsonAsset,F=e.path,E=e.Font,M=e.SpriteFrame,V=e.sp,T=e.AudioClip,N=e.Label,D=e.director},function(e){L=e.T,I=e.S}],execute:function(){var O;h._RF.push({},"9b9d95dh0JKQJzQrzxctJQ+","AnimationParticle",void 0);var j,W,q,G,H,B,K,J,Q,Y,U,X,Z,$,ee,te,ne,re,ie,ae,oe,se,ue,le,ce,he,pe,fe,de,me,ge,be,ye,_e,ve,we,Se,xe,ke,ze,Re,Ae,Ce,Pe,Fe,Ee,Me,Ve,Te,Ne,De,Le,Ie,Oe,je=p.ccclass,We=(p.property,je("AnimationParticle")(O=function(e){function r(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this)._anim=null,t._tween=null,t}t(r,e);var i=r.prototype;return i.onLoad=function(){this._anim=this.getComponent(f)},i.reuse=function(e){var t;this.node.active=!0,null==(t=this._anim)||t.play()},i.unuse=function(){var e;this.node.active=!1,this.tween.clear(),null==(e=this._anim)||e.stop()},i.move=function(e,t,n,r){this.tween.position.clear().from(e).to(n,t,r)},i.bezier=function(e,t,n,r){this.tween.position.clear().from(e).bezierTo(n,t[0],t[1],t[2],r)},i.scale=function(e,t,n,r,i){this.tween.scale.clear().from(e),0===r?this.tween.scale.to(n,t,i):this.tween.scale.delay(n*r).to(n-r*n,t,i)},i.angle=function(e,t,n,r,i){this.tween.angle.clear().from(e),0===r?this.tween.angle.to(n,-t,i):this.tween.angle.delay(n*r).to(n-r*n,t,i)},i.opacity=function(e,t,n,r,i){this.tween.opacity.clear().from(e),0===r?this.tween.opacity.to(n,t,i):this.tween.opacity.delay(n*r).to(n-r*n,t,i)},i.color=function(e,t,n,r,i){this.tween.color.clear().from(e),0===r?this.tween.color.to(n,t,i):this.tween.color.delay(n*r).to(n-r*n,t,i)},i.startAllTweens=function(e){this.tween.startAllTweens().then((function(){e()}))},i.clearAllTweens=function(){this.tween.clear()},n(r,[{key:"tween",get:function(){return this._tween||(this._tween=this.node.addComponent(L)),this._tween}}]),r}(d))||O);h._RF.pop(),h._RF.push({},"472309Ug+ZMjJQ1imjJ2ePT","AnimationParticleSystem",void 0);var qe,Ge,He,Be,Ke,Je,Qe,Ye,Ue,Xe,Ze,$e,et,tt,nt,rt,it,at,ot,st,ut=p.ccclass,lt=p.property,ct=function(e){return e[e.LINEAR=0]="LINEAR",e[e.GRAVITY=1]="GRAVITY",e}({});e("A",(j=ut("AnimationParticleSystem"),W=lt(m),q=lt({displayName:"自动播放"}),G=lt({type:g(ct)}),j(((Oe=function(e){function r(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,i(t,"prefab",K,a(t)),i(t,"autoPlay",J,a(t)),i(t,"duration",Q,a(t)),i(t,"emissionRate",Y,a(t)),i(t,"life",U,a(t)),i(t,"lifeVar",X,a(t)),i(t,"particleCount",Z,a(t)),i(t,"particleMovementEasing",$,a(t)),i(t,"particleMovementEasingParam",ee,a(t)),i(t,"startColor",te,a(t)),i(t,"startColorVar",ne,a(t)),i(t,"endColor",re,a(t)),i(t,"endColorVar",ie,a(t)),i(t,"colorDelayRatio",ae,a(t)),i(t,"colorEasing",oe,a(t)),i(t,"colorEasingParam",se,a(t)),i(t,"startAlpha",ue,a(t)),i(t,"startAlphaVar",le,a(t)),i(t,"endAlpha",ce,a(t)),i(t,"endAlphaVar",he,a(t)),i(t,"alphaDelayRatio",pe,a(t)),i(t,"alphaEasing",fe,a(t)),i(t,"alphaEasingParam",de,a(t)),i(t,"speed",me,a(t)),i(t,"speedVar",ge,a(t)),i(t,"angle",be,a(t)),i(t,"angleVar",ye,a(t)),i(t,"startScale",_e,a(t)),i(t,"startScaleVar",ve,a(t)),i(t,"endScale",we,a(t)),i(t,"endScaleVar",Se,a(t)),i(t,"endScaleIsFactor",xe,a(t)),i(t,"scaleDelayRatio",ke,a(t)),i(t,"scaleEasing",ze,a(t)),i(t,"scaleEasingParam",Re,a(t)),i(t,"startSpin",Ae,a(t)),i(t,"startSpinVar",Ce,a(t)),i(t,"endSpin",Pe,a(t)),i(t,"endSpinVar",Fe,a(t)),i(t,"spinDelayRatio",Ee,a(t)),i(t,"spinEasing",Me,a(t)),i(t,"spinEasingParam",Ve,a(t)),i(t,"sourcePos",Te,a(t)),i(t,"sourcePosVar",Ne,a(t)),i(t,"emitterMode",De,a(t)),i(t,"gravityVec",Le,a(t)),i(t,"gravityVecVar",Ie,a(t)),t._nodePool=null,t.activeParticles=[],t}t(r,e);var o=r.prototype;return o.onEnable=function(){this.autoPlay&&this.resetSystem()},o.onDisable=function(){this.stopSystem()},o.resetSystem=function(e){void 0===e&&(e=!0),e&&this.stopSystem(!0);var t=1/this.emissionRate;this.unschedule(this.createHandler),0!==this.duration&&(this.schedule(this.createHandler,t),this.duration>0&&(this.unschedule(this.stopSystem),this.scheduleOnce(this.stopSystem,this.duration)))},o.stopSystem=function(e){var t=this;this.unschedule(this.createHandler),this.unschedule(this.stopSystem),e&&(this.activeParticles.forEach((function(e){e.clearAllTweens(),t.nodePool.put(e.node)})),this.activeParticles.length=0)},o.createHandler=function(){if(this.activeParticles.length<this.particleCount){if(0==this.nodePool.size()){var e=b(this.prefab);e.addComponent(We),this.nodePool.put(e)}var t=this.nodePool.get().getComponent(We);this.updateHandler(t)}},o.updateHandler=function(e){var t=this,n=this.getRandomFromRange(this.life,this.lifeVar),r=this.getSourceStartPosition(),i=this.getRandomFromRange(this.speed,this.speedVar),a=this.getRandomFromRange(this.angle,this.angleVar);if(this.emitterMode===ct.LINEAR){var o=this.getSourceEndPositionLinear(r,i,a,n);e.move(r,o,n,this.particleMovementEasing)}else if(this.emitterMode===ct.GRAVITY){var s=this.getSourceEndPositionGravity(r,i,a,n);e.bezier(r,s,n,this.particleMovementEasing)}var u=this.getSourceStartScale(),l=this.getSourceEndScale(u);u!==l&&this.scaleDelayRatio<1&&e.scale(u,l,n,this.scaleDelayRatio,this.scaleEasing);var c=this.getSourceStartSpinAngle(),h=this.getSourceEndSpinAngle();c!==h&&this.spinDelayRatio<1&&e.angle(c,h,n,this.spinDelayRatio,this.spinEasing);var p=this.getSourceStartAlpha(),f=this.getSourceEndAlpha();p!==f&&this.alphaDelayRatio<1&&e.opacity(p,f,n,this.alphaDelayRatio,this.alphaEasing);if(!(t.startColor.equals(y.WHITE)&&t.startColorVar.equals(y.BLACK)&&t.endColor.equals(y.WHITE)&&t.endColorVar.equals(y.BLACK))){var d=this.getSourceStartColor(),m=this.getSourceEndColor();!d.equals(m)&&this.colorDelayRatio<1&&e.color(d,m,n,this.colorDelayRatio,this.colorEasing)}this.activeParticles.push(e),this.node.addChild(e.node),e.startAllTweens((function(){t.recycleParticle(e)}))},o.getSourceStartPosition=function(){return{x:this.getRandomFromRange(this.sourcePos.x,this.sourcePosVar.x),y:this.getRandomFromRange(this.sourcePos.y,this.sourcePosVar.y),z:0}},o.getSourceStartScale=function(){return this.getRandomFromRange(this.startScale,this.startScaleVar)},o.getSourceEndScale=function(e){var t=this.getRandomFromRange(this.endScale,this.endScaleVar);return this.endScaleIsFactor?e*t:t},o.getSourceStartSpinAngle=function(){return-this.getRandomFromRange(this.startSpin,this.startSpinVar)},o.getSourceEndSpinAngle=function(){return-this.getRandomFromRange(this.endSpin,this.endSpinVar)},o.getSourceStartAlpha=function(){return this.getRandomFromRange(this.startAlpha,this.startAlphaVar)},o.getSourceEndAlpha=function(){return this.getRandomFromRange(this.endAlpha,this.endAlphaVar)},o.getSourceStartColor=function(){return this.startColorVar.equals(y.BLACK)?new y(this.getRandomFromRange(this.startColor.r,this.startColorVar.r),this.getRandomFromRange(this.startColor.g,this.startColorVar.g),this.getRandomFromRange(this.startColor.b,this.startColorVar.b)):this.startColor},o.getSourceEndColor=function(){return this.endColorVar.equals(y.BLACK)?new y(this.getRandomFromRange(this.endColor.r,this.endColorVar.r),this.getRandomFromRange(this.endColor.g,this.endColorVar.g),this.getRandomFromRange(this.endColor.b,this.endColorVar.b)):this.endColor},o.getSourceEndPositionLinear=function(e,t,n,r){var i=Math.cos(n/180*Math.PI)*t*r,a=Math.sin(n/180*Math.PI)*t*r;return{x:e.x+i,y:e.y+a,z:0}},o.getSourceEndPositionGravity=function(e,t,n,r){var i=Math.cos(n/180*Math.PI)*t*r,a=Math.sin(n/180*Math.PI)*t*r,o=this.gravityVec,s=this.gravityVecVar,u=this.getRandomFromRange(o.x,s.x),l=this.getRandomFromRange(o.y,s.y),c=e.x+i/3,h=e.y+a/3,p=e.x+i/3*2,f=e.y+a/3*2,d=e.x+i,m=e.y+a,g=60*r/3,b=2*g,y=3*g,_=d>0?1:-1;return[{x:c-this.getAccelerationDistance(u,g)*_,y:h-this.getAccelerationDistance(l,g),z:0},{x:p-this.getAccelerationDistance(u,b)*_,y:f-this.getAccelerationDistance(l,b),z:0},{x:d-this.getAccelerationDistance(u,y)*_,y:m-this.getAccelerationDistance(l,y),z:0}]},o.recycleParticle=function(e){var t=this.activeParticles,n=t.indexOf(e);n>-1&&t.splice(n,1),this.nodePool.put(e.node)},o.calculateEaseInQuad=function(e,t){return.5*e*t*t},o.getRandomFromRange=function(e,t){return e+t*(Math.random()-.5)*2},o.getAccelerationDistance=function(e,t){return.5*e*t*t},n(r,[{key:"nodePool",get:function(){return this._nodePool||(this._nodePool=new _("AnimationParticle")),this._nodePool}}]),r}(d)).EmitterMode=ct,K=r((B=Oe).prototype,"prefab",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=r(B.prototype,"autoPlay",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Q=r(B.prototype,"duration",[lt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),Y=r(B.prototype,"emissionRate",[lt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1.5}}),U=r(B.prototype,"life",[lt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 8}}),X=r(B.prototype,"lifeVar",[lt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),Z=r(B.prototype,"particleCount",[lt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 15}}),$=r(B.prototype,"particleMovementEasing",[lt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"linear"}}),ee=r(B.prototype,"particleMovementEasingParam",[lt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),te=r(B.prototype,"startColor",[lt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new y(255,255,255,255)}}),ne=r(B.prototype,"startColorVar",[lt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new y(0,0,0,255)}}),re=r(B.prototype,"endColor",[lt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new y(255,255,255,255)}}),ie=r(B.prototype,"endColorVar",[lt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new y(0,0,0,255)}}),ae=r(B.prototype,"colorDelayRatio",[lt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),oe=r(B.prototype,"colorEasing",[lt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"linear"}}),se=r(B.prototype,"colorEasingParam",[lt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),ue=r(B.prototype,"startAlpha",[lt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 255}}),le=r(B.prototype,"startAlphaVar",[lt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),ce=r(B.prototype,"endAlpha",[lt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 255}}),he=r(B.prototype,"endAlphaVar",[lt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),pe=r(B.prototype,"alphaDelayRatio",[lt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),fe=r(B.prototype,"alphaEasing",[lt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"linear"}}),de=r(B.prototype,"alphaEasingParam",[lt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),me=r(B.prototype,"speed",[lt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),ge=r(B.prototype,"speedVar",[lt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),be=r(B.prototype,"angle",[lt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),ye=r(B.prototype,"angleVar",[lt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 360}}),_e=r(B.prototype,"startScale",[lt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.7}}),ve=r(B.prototype,"startScaleVar",[lt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.3}}),we=r(B.prototype,"endScale",[lt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.7}}),Se=r(B.prototype,"endScaleVar",[lt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.3}}),xe=r(B.prototype,"endScaleIsFactor",[lt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ke=r(B.prototype,"scaleDelayRatio",[lt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),ze=r(B.prototype,"scaleEasing",[lt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"linear"}}),Re=r(B.prototype,"scaleEasingParam",[lt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Ae=r(B.prototype,"startSpin",[lt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Ce=r(B.prototype,"startSpinVar",[lt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 50}}),Pe=r(B.prototype,"endSpin",[lt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Fe=r(B.prototype,"endSpinVar",[lt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 360}}),Ee=r(B.prototype,"spinDelayRatio",[lt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Me=r(B.prototype,"spinEasing",[lt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"linear"}}),Ve=r(B.prototype,"spinEasingParam",[lt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Te=r(B.prototype,"sourcePos",[lt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new v(-756,0)}}),Ne=r(B.prototype,"sourcePosVar",[lt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new v(540,20)}}),De=r(B.prototype,"emitterMode",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return ct.GRAVITY}}),Le=r(B.prototype,"gravityVec",[lt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new v(.01,.01)}}),Ie=r(B.prototype,"gravityVecVar",[lt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new v}}),H=B))||H));h._RF.pop(),h._RF.push({},"f2687UGQchKhJlt0iQVxJW/","FontAtlas",void 0);var ht,pt,ft,dt,mt,gt,bt,yt,_t,vt,wt,St=p.ccclass,xt=p.property,kt=p.menu,zt=e("a",(qe=St("FontAtlas"),Ge=kt("自定义扩展/FontAtlas"),He=xt(w),Be=xt({type:w,displayName:"字体图集"}),Ke=xt({type:g(S),displayName:"纵向对齐"}),Je=xt({displayName:"字号缩放"}),Qe=xt({displayName:"字符间隔"}),Ye=xt({displayName:"最大宽度"}),Ue=xt({displayName:"是否优先最大字符宽度"}),Xe=xt({displayName:"排除",type:[String],visible:function(){return 1==this.preferMaxWidth}}),qe(Ze=Ge((et=r(($e=function(e){function n(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,i(t,"_",et,a(t)),i(t,"textAtlas",tt,a(t)),i(t,"verticalAlign",nt,a(t)),i(t,"fontScale",rt,a(t)),i(t,"spacing",it,a(t)),i(t,"maxWidth",at,a(t)),i(t,"preferMaxWidth",ot,a(t)),i(t,"exclude",st,a(t)),t._visibles=[],t._disables=[],t._layout=null,t._poolNode=null,t._isInited=!1,t._maxCharWidth=0,t._isKeepMaxScale=!1,t._keepMaxScale=1,t._mTransform=null,t._lTransform=null,t}t(n,e);var r=n.prototype;return r._init=function(){var e=this;if(!this._isInited){this._poolNode=new x("FONT_POOL"),this._poolNode.layer=this.node.layer,this._poolNode.active=!1,this.node.addChild(this._poolNode);var t=new x("FONT_LAYOUT");t.layer=this.node.layer,this._layout=t.addComponent(k),this._layout.type=k.Type.HORIZONTAL,this._layout.resizeMode=k.ResizeMode.CONTAINER,this._layout.spacingX=this.spacing,this._layout.horizontalDirection=k.HorizontalDirection.LEFT_TO_RIGHT,this._layout.affectedByScale=!0,this._mTransform=this.node.getComponent(z),this._lTransform=t.getComponent(z),this._lTransform.setAnchorPoint(this._mTransform.anchorX,this._mTransform.anchorY),t.setPosition(0,0,0),this.node.addChild(t),this._isInited=!0,this.textAtlas.getSpriteFrames().forEach((function(t){e._maxCharWidth=Math.max(t.originalSize.width,e._maxCharWidth)})),this._layout.node.on(x.EventType.SIZE_CHANGED,this.onSizeChanged,this)}},r.keepMaxScale=function(e){this._isKeepMaxScale=e,this._keepMaxScale=1},r.set=function(e){this._init(),this._resetSprites();for(var t=0,n=0,r=0;r<e.length;r++){var i=e[r],a=this.textAtlas.getSpriteFrame(i);if(a){var o=this._getSpriteNode();o.box.node.setScale(this.fontScale,this.fontScale,1),o.box.node.active=!0,o.sprite.spriteFrame=a,this.preferMaxWidth&&!this.exclude.includes(i)?o.box.setContentSize(this._maxCharWidth,a.originalSize.height):o.box.setContentSize(a.originalSize.width,a.originalSize.height),this._setAlign(o.sprite.node.__TR__),this._visibles.push(o),t+=a.originalSize.width*this.fontScale+this.spacing,n=Math.max(n,a.originalSize.height),o.box.node.parent=this._layout.node}}n*=.5;var s=1;switch(t>this.maxWidth&&(s=this.maxWidth/t),this._isKeepMaxScale&&(s=Math.min(s,this._keepMaxScale),this._keepMaxScale=s),this.verticalAlign){case S.TOP:this._layout.node.setPosition(0,s*n-n);break;case S.BOTTOM:this._layout.node.setPosition(0,n-s*n)}this._layout.node.setScale(s,s,1)},r._resetSprites=function(){var e=this;this._visibles.forEach((function(t){t.box.node.active=!1,t.box.node.parent=e._poolNode,e._disables.push(t)})),this._visibles.length=0},r._getSpriteNode=function(){if(this._disables.length>0)return this._disables.pop();var e=new x("FONT_SPRITE_BOX");e.layer=this.node.layer;var t=e.addComponent(z),n=new x("FONT_SPRITE");n.layer=this.node.layer;var r=n.addComponent(R);return r.node.__TR__=n.getComponent(z)||n.addComponent(z),n.parent=e,{box:t,sprite:r}},r._setAlign=function(e){switch(this.verticalAlign){case S.TOP:e.setAnchorPoint(.5,1);break;case S.CENTER:e.setAnchorPoint(.5,.5);break;case S.BOTTOM:e.setAnchorPoint(.5,0)}},r.onSizeChanged=function(){this._mTransform.setContentSize(this._lTransform.contentSize)},n}(d)).prototype,"_",[He],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),tt=r($e.prototype,"textAtlas",[Be],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),nt=r($e.prototype,"verticalAlign",[Ke],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return S.CENTER}}),rt=r($e.prototype,"fontScale",[Je],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),it=r($e.prototype,"spacing",[Qe],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),at=r($e.prototype,"maxWidth",[Ye],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 100}}),ot=r($e.prototype,"preferMaxWidth",[Ue],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),st=r($e.prototype,"exclude",[Xe],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Ze=$e))||Ze)||Ze));h._RF.pop(),h._RF.push({},"cb3e9FRgchA6qJEAZ+fYeVW","FontScore",void 0);var Rt=p.ccclass,At=p.property,Ct=p.menu,Pt=p.requireComponent;e("F",(ht=Rt("FontScore"),pt=Pt(zt),ft=Ct("自定义扩展/FontScore"),dt=At({displayName:"数字匹配符"}),mt=At({displayName:"点号名"}),gt=At({displayName:"逗号名"}),ht(bt=pt(bt=ft((_t=r((yt=function(e){function r(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,i(t,"numberMatch",_t,a(t)),i(t,"dotMatch",vt,a(t)),i(t,"commaMatch",wt,a(t)),t._tween=null,t._duration=1,t._format=null,t._fontAtlas=null,t._callback=null,t._runtime={from:0,to:0,current:0,commaIndex:0,dotIndex:0},t}t(r,e);var s=r.prototype;return s.duration=function(e){return this._duration=Math.max(.1,e),this},s.format=function(e){return this._format=e,this},s.set=function(e){this.node.active||(this.node.active=!0),this.fontAtlas.keepMaxScale(!1);var t=this.toString(e).split("");return this._runtime.current=e,this._runtime.from=e,this._runtime.to=e,this.updateRuntime(t),this},s.call=function(e){return this._callback=e,this},s.play=function(e){this.node.active||(this.node.active=!0),this.fontAtlas.keepMaxScale(!0),this.stop(),this.rollHandler(e,this._callback)},s.stop=function(){return this._tween&&this._tween.stop(),this},s.arrive=function(e){this.stop(),this.set(e),this._callback&&this._callback()},s.rollHandler=function(e,t){var n=this;this._runtime.from=this._runtime.current,this._runtime.to=e,this._tween=A().target(this._runtime).to(this._duration,{current:{value:e,progress:function(e,t,r,i){e=n._runtime.from,t=n._runtime.to,n._runtime.current=e+(t-e)*i;var a=n.toString(n._runtime.current).split("");return n.updateRuntime(a),n._runtime.current}}},{easing:"smooth"}).call(t).start()},s.updateRuntime=function(e){if(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];t.push(this.getFrameName(r))}this.fontAtlas.set(t)}},s.getFrameName=function(e){var t="";switch(e){case",":t=this.commaMatch;break;case".":t=this.dotMatch;break;default:t=I.format(this.numberMatch,e)}return t},s.toString=function(e){return this._format&&"function"==typeof this._format?this._format(e):o.formatAmount(e)},n(r,[{key:"fontAtlas",get:function(){return this._fontAtlas||(this._fontAtlas=this.getComponent(zt)),this._fontAtlas}},{key:"score",get:function(){return this._runtime.current}}]),r}(d)).prototype,"numberMatch",[dt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"xxx_{0}"}}),vt=r(yt.prototype,"dotMatch",[mt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"xxx"}}),wt=r(yt.prototype,"commaMatch",[gt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"xxx"}}),bt=yt))||bt)||bt)||bt));h._RF.pop(),h._RF.push({},"301b3qslixL1IhflrkiXmsb","LocalizedEditor",void 0);var Ft,Et,Mt,Vt,Tt,Nt,Dt,Lt,It,Ot,jt,Wt,qt,Gt=function(){function e(){}return e.getModule=function(){var e=s(u().mark((function e(){var t,n,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=globalThis.cce.SceneFacadeManager.queryCurrentSceneUuid(),e.next=3,globalThis.Editor.Message.request("asset-db","query-url",t);case 3:if(n=e.sent){e.next=6;break}return e.abrupt("return","");case 6:if(r=n.split("layout")[0],/modules/g.test(r)){e.next=9;break}return e.abrupt("return","");case 9:return e.abrupt("return",F.basename(r));case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.clear=function(){this.caches={},this.loading={}},e.getString=function(){var e=s(u().mark((function e(t,n){var r,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getLocal(t).catch(console.error);case 2:return i=e.sent,e.abrupt("return",(null==i||null==(r=i.texts)?void 0:r[n])||"");case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),e.getFont=function(){var e=s(u().mark((function e(t,n){var r,i,a,o;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getLocal(t).catch(console.error);case 2:if(i=e.sent,a=null==i||null==(r=i.fonts)?void 0:r[n]){e.next=6;break}return e.abrupt("return",null);case 6:return o=F.join("fonts",a),e.next=9,this.loadRes(t,o,E);case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),e.getSpriteFrame=function(){var e=s(u().mark((function e(t,n){var r,i,a,o;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getLocal(t).catch(console.error);case 2:if(i=e.sent,a=null==i||null==(r=i.textures)?void 0:r[n]){e.next=6;break}return e.abrupt("return",null);case 6:return o=F.join("textures",a),e.next=9,this.loadRes(t,o,M);case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),e.getSkeletonData=function(){var e=s(u().mark((function e(t,n){var r,i,a,o;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getLocal(t).catch(console.error);case 2:if(i=e.sent,a=null==i||null==(r=i.spines)?void 0:r[n]){e.next=6;break}return e.abrupt("return",null);case 6:return o=F.join("spines",a),e.next=9,this.loadRes(t,o,V.SkeletonData);case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),e.getAudioClip=function(){var e=s(u().mark((function e(t,n){var r,i,a,o;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getLocal(t).catch(console.error);case 2:if(i=e.sent,a=null==i||null==(r=i.audios)?void 0:r[n]){e.next=6;break}return e.abrupt("return",null);case 6:return o=F.join("audios",a),e.next=9,this.loadRes(t,o,T);case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),e.loadRes=function(e,t,n){var r=this;return new Promise(s(u().mark((function i(a,o){var s,l;return u().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return s=r.getLangDB(e)+"/"+t,i.next=3,globalThis.Editor.Message.request("asset-db","query-uuid",s);case 3:l=i.sent,C.loadAny({uuid:l},{type:n},(function(e,t){if(e)return a(null);a(t)}));case 5:case"end":return i.stop()}}),i)}))))},e.getLocal=function(e){var t=this;return new Promise(s(u().mark((function n(r,i){var a,o,s,c;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(a=t.caches[e])){n.next=3;break}return n.abrupt("return",r(a));case 3:if(!t.loading[e]){n.next=6;break}return o=setInterval((function(){if(t.caches[e]||!t.loading[e])return clearInterval(o),r(t.caches[e])}),1),n.abrupt("return");case 6:return t.loading[e]=!0,n.next=9,l.instance.initialized();case 9:return s=t.getLangDB(e)+"/local.json",n.next=12,globalThis.Editor.Message.request("asset-db","query-uuid",s);case 12:if(c=n.sent){n.next=16;break}return t.loading[e]=!1,n.abrupt("return",i("找不到"+s));case 16:C.loadAny({uuid:c},{type:P},(function(n,o){if(t.loading[e]=!1,n)return i(n);a=o.json,t.caches[e]=a,r(a)}));case 17:case"end":return n.stop()}}),n)}))))},e.getLangDB=function(e){return"db://assets/localizeds/"+l.instance.data.localized.package+"/"+e+"/"+l.instance.data.localized.language},e}();Gt.caches={},Gt.loading={},window.LocalizedEditor=Gt,h._RF.pop(),h._RF.push({},"73af63gTrlG5KoWMg0mxMaw","LocalizedLabel",void 0);var Ht,Bt,Kt,Jt,Qt,Yt,Ut,Xt,Zt,$t,en=p.ccclass,tn=p.property,nn=p.menu;e("b",(Ft=en("LocalizedLabel"),Et=nn("多语言/Label"),Mt=tn({serializable:!0}),Vt=tn({displayOrder:-1}),Tt=tn({serializable:!0}),Nt=tn({displayOrder:-1}),Dt=tn({serializable:!0}),Lt=tn({displayOrder:-1}),Ft(It=Et((jt=r((Ot=function(e){function r(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,i(t,"_module",jt,a(t)),i(t,"_key",Wt,a(t)),i(t,"_fontkey",qt,a(t)),t}t(r,e);var o=r.prototype;return o.onLoad=function(){var e=s(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.setString(),this.setFont();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),o.onFocusInEditor=function(){this.initEditor()},o.onLostFocusInEditor=function(){this.initEditor()},o.initEditor=function(){var e=s(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=7;break;case 4:this._module=e.sent,this.setString(),this.setFont();case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),o.setString=function(){var e=s(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.module&&this.key){e.next=2;break}return e.abrupt("return");case 2:e.next=9;break;case 5:this.string=e.sent,this.updateRenderData(!0),e.next=12;break;case 9:return e.next=11,null==(t=c.instance.get(this._module))||null==(t=t.i18n)?void 0:t.getString(this._key);case 11:this.string=e.sent;case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),o.setFont=function(){var e=s(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.module&&this._fontkey){e.next=3;break}return this.font=null,e.abrupt("return");case 3:e.next=9;break;case 6:this.font=e.sent,e.next=12;break;case 9:return e.next=11,null==(t=c.instance.get(this._module))||null==(t=t.i18n)?void 0:t.getFont(this._fontkey);case 11:this.font=e.sent;case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),o.refreshByEditor=function(){this.setString(),this.setFont()},n(r,[{key:"module",get:function(){return this._module},set:function(e){this._module!==e&&(this._module=e)}},{key:"key",get:function(){return this._key},set:function(e){this._key!==e&&(this._key=e,this.setString())}},{key:"fontkey",get:function(){return this._fontkey},set:function(e){this._fontkey!==e&&(this._fontkey=e,this.setFont())}}]),r}(N)).prototype,"_module",[Mt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),r(Ot.prototype,"module",[Vt],Object.getOwnPropertyDescriptor(Ot.prototype,"module"),Ot.prototype),Wt=r(Ot.prototype,"_key",[Tt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),r(Ot.prototype,"key",[Nt],Object.getOwnPropertyDescriptor(Ot.prototype,"key"),Ot.prototype),qt=r(Ot.prototype,"_fontkey",[Dt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),r(Ot.prototype,"fontkey",[Lt],Object.getOwnPropertyDescriptor(Ot.prototype,"fontkey"),Ot.prototype),It=Ot))||It)||It));h._RF.pop(),h._RF.push({},"712f3WAXNxDfLzEiSRMCGhx","LocalizedSprite",void 0);var rn=p.ccclass,an=p.property,on=p.menu;e("L",(Ht=rn("LocalizedSprite"),Bt=on("多语言/Sprite"),Kt=an({serializable:!0}),Jt=an({displayOrder:-1}),Qt=an({serializable:!0}),Yt=an({displayOrder:-1}),Ht(Ut=Bt((Zt=r((Xt=function(e){function r(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,i(t,"_module",Zt,a(t)),i(t,"_key",$t,a(t)),t}t(r,e);var o=r.prototype;return o.onLoad=function(){var e=s(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.setSprite();case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),o.onFocusInEditor=function(){this.initEditor()},o.onLostFocusInEditor=function(){this.initEditor()},o.setKey=function(e){return this._key=e,this.setSprite()},o.initEditor=function(){var e=s(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=6;break;case 4:this._module=e.sent,this.setSprite();case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),o.setSprite=function(){var e=s(u().mark((function e(){var t,n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._module&&this._key){e.next=4;break}return console.error(this.module,this.key),this.spriteFrame=null,e.abrupt("return");case 4:e.next=12;break;case 7:t=e.sent,console.log(this.module,this.key,t),t instanceof M&&(this.spriteFrame=t),e.next=15;break;case 12:return e.next=14,null==(n=c.instance.get(this._module))||null==(n=n.i18n)?void 0:n.getSpriteFrame(this._key);case 14:this.spriteFrame=e.sent;case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),o.refreshByEditor=function(){this.setSprite()},n(r,[{key:"module",get:function(){return this._module},set:function(e){this._module!==e&&(this._module=e)}},{key:"key",get:function(){return this._key},set:function(e){this._key!==e&&(this._key=e,this.setSprite())}}]),r}(R)).prototype,"_module",[Kt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),r(Xt.prototype,"module",[Jt],Object.getOwnPropertyDescriptor(Xt.prototype,"module"),Xt.prototype),$t=r(Xt.prototype,"_key",[Qt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),r(Xt.prototype,"key",[Yt],Object.getOwnPropertyDescriptor(Xt.prototype,"key"),Xt.prototype),Ut=Xt))||Ut)||Ut));h._RF.pop(),h._RF.push({},"af2b2fEggdO1r4sJk88Ihnf","Pool",void 0);e("P",function(){function e(e,t,n){this.prefab=void 0,this.parent=void 0,this.component=void 0,this.gener=void 0,this._caches=void 0,this._uses=void 0,this.onCreateCallback=void 0,this.prefab=e,this.parent=t,this.component=n,this._caches=[],this._uses=[]}var t=e.prototype;return t.setCreateCallback=function(e){return this.onCreateCallback=e,this},t.total=function(e,t,n){var r=this;return void 0===n&&(n=10),new Promise(s(u().mark((function i(a,o){var s,l,c;return u().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(!(null==e||null==e||"number"==typeof e&&isNaN(e))){i.next=2;break}return i.abrupt("return",a());case 2:return null==(s=r.gener)||s.return(""),l=e instanceof Array?e.length:e,c=e instanceof Array?e:null,r.gener=r.getGenerator(l,r.task.bind(r),c,t),i.next=8,r.exeGenerator(r.gener,n);case 8:r.surplus(l),a();case 10:case"end":return i.stop()}}),i)}))))},t.get=function(e){var t,n=this.getNode();return n.isCreate&&(null==(t=this.onCreateCallback)||t.call(this,n.node)),e&&e(n.node,this._uses.length-1),n.node},t.put=function(e){if(!e)return!1;var t=e instanceof x?e:e.node,n=this._uses.findIndex((function(e){return e instanceof x?e.uuid==t.uuid:e.node.uuid==t.uuid}));if(-1==n)return!1;var r=this._uses.splice(n,1)[0];return r instanceof x?r.removeFromParent():r.node.removeFromParent(),this._caches.push(r),!0},t.recycle=function(){try{for(;this._uses.length>0;){var e=this._uses.pop();e instanceof x?e.removeFromParent():e.node.removeFromParent(),this._caches.push(e)}}catch(e){console.error(e)}return this},t.clear=function(){for(var e=[].concat(this._uses,this._caches),t=0;t<e.length;t++){var n=e[t];n instanceof x?n.destroy():n.node.destroy()}return this._caches=[],this._uses=[],this},t.task=function(e,t,n){var r,i=(null==t?void 0:t[e])||e,a=this.getNode();a.isCreate&&(null==(r=this.onCreateCallback)||r.call(this,a.node)),n(a.node,i,e)},t.surplus=function(e){try{for(;this._uses.length-e;){var t=this._uses.pop();t instanceof x?t.removeFromParent():t.node.removeFromParent(),this._caches.push(t)}}catch(e){console.error(e)}},t.getNode=function(){var e=!1;if(0==this._caches.length){var t=b(this.prefab),n=this.component?t.getComponent(this.component):t;this._caches.push(n),e=!0}var r=this._caches.pop();return r instanceof x?r.parent=this.parent:r.node.parent=this.parent,this._uses.push(r),{node:r,isCreate:e}},t.getGenerator=u().mark((function e(t,n){var r,i,a,o,s=arguments;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r=s.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=s[a];o=0;case 2:if(!(o<t)){e.next=8;break}return e.next=5,n.apply(void 0,[o].concat(i));case 5:o++,e.next=2;break;case 8:case"end":return e.stop()}}),e)})),t.exeGenerator=function(e,t){return new Promise((function(n,r){var i=e;!function e(){for(var r=(new Date).getTime(),a=i.next();;a=i.next()){if(null==a||a.done)return void n(null);if((new Date).getTime()-r>t)return void setTimeout((function(){e()}),1e3*D.getDeltaTime())}}()}))},n(e,[{key:"caches",get:function(){return Object.assign([],this._caches)}},{key:"uses",get:function(){return Object.assign([],this._uses)}}]),e}());h._RF.pop()}}}));

System.register("chunks:///SlotContainer-1a8d96d5.js",["./BaseModule-8a96da91.js","cc","./AudioManager-da424cd3.js","./http_config-34069bdb.js","./NodeHelper-50e02d60.js"],(function(e){var t,n,i,r,o,s,a,l,h,c,u,_,p,d,m,f,y,g,b,v,S,C,T,w,P,R,E,x,k,D,L,O,M,I,A,B,F,N,H,W,z,V,K,G,Z;return{setters:[function(e){t=e.a,n=e.i,i=e._,r=e.r,o=e.b,s=e.c,a=e.T,l=e.N,h=e.j,c=e.g,u=e.n,_=e.I,p=e.d,d=e.e,m=e.m,f=e.P,y=e.h},function(e){g=e.cclegacy,b=e._decorator,v=e.Button,S=e.input,C=e.Input,T=e.KeyCode,w=e.Vec3,P=e.UITransform,R=e.Node,E=e.Widget,x=e.Component,k=e.easing,D=e.Prefab,L=e.Size,O=e.TransformBit,M=e.instantiate,I=e.Color,A=e.Graphics,B=e.tween,F=e.Mask},function(e){N=e.M,H=e.a,W=e.B,z=e.A},function(e){V=e.H},function(e){K=e.b,G=e.T,Z=e.a}],execute:function(){g._RF.push({},"bef818/1HVCa5HB12k29Dn0","slot_config",void 0);var J=e("c",function(e){return e[e.None=0]="None",e[e.Base=1]="Base",e[e.Free=2]="Free",e}({})),j=e("S",function(e){return e[e.Idle=0]="Idle",e[e.Spin=1]="Spin",e[e.Stop=2]="Stop",e[e.AwaitingResult=2]="AwaitingResult",e[e.ProcessingResult=3]="ProcessingResult",e}({})),U=e("f",function(e){return e[e.None=0]="None",e[e.Big=1]="Big",e[e.Mega=2]="Mega",e[e.Ultra=3]="Ultra",e}({})),Y=function(){};Y.Background="Slot:Event:Panel:Background",Y.Launch="Slot:Event:Panel:Launch",Y.Game="Slot:Event:Game",Y.History="Slot:Event:Panel:History",Y.HistoryFirstPrompt="Slot:Event:Panel:HistoryFirstPrompt",Y.Bet="Slot:Event:Panel:Bet",Y.Wallet="Slot:Event:Panel:Wallet",Y.AutoSpin="Slot:Event:Panel:AutoSpin",Y.Reconnection={key:"Slot:Event:Panel:Reconnection"},Y.Prompt={key:"Slot:Event:Panel:Prompt"};var q=function(){};q.Panel=Y,q.Carousel={key:"Slot:Event:Carousel"},q.Odds={key:"Slot:Event:Odds"},q.OnOddsShow={key:"Slot:Event:OnOddsShow"},q.OnOddsHide={key:"Slot:Event:OnOddsHide"},q.Spin={key:"Slot:Event:Spin"},q.StopBefore={key:"Slot:Event:StopBefore"},q.Stop={key:"Slot:Event:Stop"},q.StopAfter={key:"Slot:Event:StopAfter"},q.Jackpot={key:"Slot:Event:Jackpot"},q.InterruptStop={key:"Slot:Event:InterruptStop"},q.UpdateStageWin={key:"Slot:Event:UpdateStageWin"},q.UpdateTotalWin={key:"Slot:Event:UpdateTotalWin"};var X=function(){};X.GameInfo="slot:game:info",X.Spin="slot:game:spin";var Q=function(){};Q.SlotGames=["tiger","mahjong"];var $=function(){};$.MenuIconClick={path:"layout/skin/audios/menu_icon_press",module:"slot"},$.ListItemClick={path:"layout/skin/audios/list_item_click",module:"slot"},$.SliderEffect={path:"layout/skin/audios/slider_effect",module:"slot"},$.WalletCountingAbove={path:"layout/skin/audios/wallet_counting_above",module:"slot"};var ee=e("b",(function(){}));ee.Event=q,ee.Const=Q,ee.Route=X,ee.Audio=$,g._RF.pop(),g._RF.push({},"3f7c8Smk0RJV5Qrs7bh8BvI","slot_base_module",void 0);var te,ne,ie,re,oe,se,ae,le,he,ce,ue,_e,pe,de,me,fe,ye;e("d",function(e){function n(){return e.apply(this,arguments)||this}return t(n,e),n}(n));g._RF.pop(),g._RF.push({},"1fb58fpMu5GEoMASK4HKdBr","slot_base_view_model",void 0);var ge,be,ve,Se,Ce,Te,we,Pe,Re,Ee,xe,ke=b.ccclass;b.property,e("a",(te=ke("slot_base_view_model"),ne=_("app","app_model"),ie=_("app","app_model"),te((se=i((oe=function(e){function n(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(t=e.call.apply(e,[this].concat(i))||this).isFake=!1,t._isDelayStop=!1,t._spinTime=void 0,o(t,"__currentBet",se,s(t)),o(t,"__token",ae,s(t)),o(t,"__port",le,s(t)),o(t,"__balance",he,s(t)),o(t,"__symbolTable",ce,s(t)),o(t,"__initCols",ue,s(t)),o(t,"__gameType",_e,s(t)),o(t,"__gameState",pe,s(t)),o(t,"__isTurbo",de,s(t)),o(t,"__currentBetOptions",me,s(t)),o(t,"__autoSpinTimes",fe,s(t)),o(t,"__isInterrupt",ye,s(t)),t}t(n,e);var i=n.prototype;return i.onLoad=function(){var e=a.parseUrl();this.isFake="true"==e.fake},i.ready=function(){this.__gameType=J.Base},i.requestGameInfo=function(e){this.isFake?this.model.fakeEntryResult():(this.__port&&(e.port=this.__port),l.instance.emit(V.Event.Request,e,null,ee.Route.GameInfo,this.__token))},i.spin=function(){var e=p(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.__gameState=j.Spin,this.__isInterrupt=!1,this.model.clearSpinResult(),this.__autoSpinTimes>0&&this.__autoSpinTimes--,e.next=6,this.module.notify.wait(ee.Event.Spin);case 6:if(this._spinTime=new Date,this.__gameState=j.AwaitingResult,!this.isFake){e.next=11;break}return this.model.fakeSpinResult(),e.abrupt("return");case 11:l.instance.emit(V.Event.Request,this.module.config.Route.Spin,{betSize:this.__currentBet.betSize,betLevel:this.__currentBet.betLevel,betLine:this.__currentBet.betLine},ee.Route.Spin,this.__token);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.getSpinInterval=function(){return this.isTurbo?0:this.module.config.Scroller.SpinInterval},i.getSpinConfig=function(){return this.isTurbo?this.module.config.Scroller.TurboSpinConfig:this.module.config.Scroller.SpinConfig},i.getStopInterval=function(){return this.isTurbo?0:this.module.config.Scroller.StopInterval},i.getStopConfig=function(){return this.isTurbo?this.module.config.Scroller.TurboStopConfig:this.module.config.Scroller.StopConfig},i.isStopImmediately=function(){return!this.isFreeGame&&(this.isTurbo||this.isInterrupt)},i.processGameResult=function(){var e=p(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._isDelayStop=!1,this.unschedule(this.processGameResult),e.next=4,this.handleSpinResults(this.__spinResult);case 4:this.model.updateBalance(),this.__autoSpinTimes>0&&this.spin();case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.calcDelayTime=function(){if(!this._spinTime)return 0;var e=new Date,t=this.getAutoStopDelay(),n=e.getTime()-this._spinTime.getTime();return Math.max(0,t-n/1e3)},i.getAutoStopDelay=function(){return this.isTurbo?this.module.config.Scroller.TurboAutoStopDelay:this.module.config.Scroller.AutoStopDelay},i.querySymbolOdds=function(e){var t=this.__entryResult.symbolTable.find((function(t){return t.id==e}));return null==t?void 0:t.odds},i.getSymbolNameByIcon=function(e){if(!this.module.config.SymbolIconNameTable)throw new Error("symbolNameTable未配置");return this.module.config.SymbolIconNameTable[e]},i.getSymbolByIcon=function(e){if(!this.__symbolTable)throw new Error("symbolTable未初始化");return this.__symbolTable.find((function(t){return t.id===e}))},i.switchTurbo=function(){this.__isTurbo=!this.__isTurbo;var e=this.__isTurbo?"turbo_enable_prompt":"turbo_disable_prompt";l.instance.emit(ee.Event.Panel.Prompt,2,e,this.__isTurbo)},i.increment=function(){var e=this;if(this.__betSettingTable){var t=this.__betSettingTable.amountList.findIndex((function(t){return t===e.__currentBetOptions.amount}));if(++t>=this.__betSettingTable.amountList.length)l.instance.emit(ee.Event.Panel.Prompt,1,"max_bet_prompt");else{var n=this.__betSettingTable.amountList[t];this.__currentBetOptions=this.calculateBetOptionByAmount(n)}}},i.decrement=function(){var e=this;if(this.__betSettingTable){var t=this.__betSettingTable.amountList.findIndex((function(t){return t===e.__currentBetOptions.amount}));if(--t<0)l.instance.emit(ee.Event.Panel.Prompt,1,"min_bet_prompt");else{var n=this.__betSettingTable.amountList[t];this.__currentBetOptions=this.calculateBetOptionByAmount(n)}}},i.setBetOptions=function(e){var t=this.__currentBetOptions,n=t.size,i=t.level,r=t.amount;n==e.size&&i==e.level&&r==e.amount||(this.__currentBetOptions=e)},i.calculateBetOptionByAmount=function(e){for(var t,n=this.__betSettingTable,i=h(n.sizeList);!(t=i()).done;)for(var r,o=t.value,s=h(n.levelList);!(r=s()).done;){var a=r.value,l=o*a*n.base;if((l=parseFloat(l.toFixed(2)))===e)return{size:o,level:a,amount:l}}return this.module.logger.error("无法计算出正确的投注",l,n),null},i.extractIdArray=function(e){return e.map((function(e){return e.symbols.map((function(e){return e.id}))}))},i.autoSpin=function(e){this.__autoSpinTimes=e,e>0&&this.__gameState==j.Idle&&this.spin()},i.calcWinTypeThreshold=function(){var e=this.__currentBet.betSize*this.__currentBet.betLevel*this.__currentBet.betLine,t=this.module.config.Jackpot;return{mediumThreshold:N.toDecimalWithPrecision(e*t.medium,2),bigThreshold:N.toDecimalWithPrecision(e*t.big,2),megaThreshold:N.toDecimalWithPrecision(e*t.mega,2),ultraThreshold:N.toDecimalWithPrecision(e*t.ultra,2)}},i.stop=function(){var e=p(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.__isInterrupt=!0,this.__gameState==j.Stop?this.interruptStop():this._isDelayStop&&this.processGameResult();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.interruptStop=function(){this.module.notify.emit(ee.Event.InterruptStop)},c(n,[{key:"__entryResult",get:function(){return this.model.__entryResult},set:function(e){e&&(this.__currentBet=e.betTable.default)}},{key:"__spinResult",get:function(){return this.model.__spinResult},set:function(e){if(e){var t=this.calcDelayTime();this.isInterrupt||0==t?this.processGameResult():(this._isDelayStop=!0,this.scheduleOnce(this.processGameResult,t))}}},{key:"isTurbo",get:function(){return!this.isFreeGame&&this.__isTurbo}},{key:"isInterrupt",get:function(){return!this.isFreeGame&&this.__isInterrupt}},{key:"__betSettingTable",get:function(){return this.model.__betSettingTable},set:function(e){e&&(this.__currentBetOptions=this.calculateBetOptionByAmount(e.amountList[0]))}},{key:"isFreeGame",get:function(){return this.__gameType===J.Free}}]),n}(H)).prototype,"__currentBet",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{betSize:.3,betLevel:2,betLine:20,amount:12}}}),ae=i(oe.prototype,"__token",[ne],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),le=i(oe.prototype,"__port",[ie],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),he=i(oe.prototype,"__balance",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),i(oe.prototype,"__entryResult",[r],Object.getOwnPropertyDescriptor(oe.prototype,"__entryResult"),oe.prototype),i(oe.prototype,"__spinResult",[r],Object.getOwnPropertyDescriptor(oe.prototype,"__spinResult"),oe.prototype),ce=i(oe.prototype,"__symbolTable",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ue=i(oe.prototype,"__initCols",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_e=i(oe.prototype,"__gameType",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return J.None}}),pe=i(oe.prototype,"__gameState",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return j.Idle}}),de=i(oe.prototype,"__isTurbo",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),me=i(oe.prototype,"__currentBetOptions",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),fe=i(oe.prototype,"__autoSpinTimes",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),ye=i(oe.prototype,"__isInterrupt",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),i(oe.prototype,"__betSettingTable",[r],Object.getOwnPropertyDescriptor(oe.prototype,"__betSettingTable"),oe.prototype),re=oe))||re));g._RF.pop(),g._RF.push({},"fd6d1MxADBMTqquPpgU3Yiq","slot_base_model",void 0);var De,Le,Oe,Me,Ie=b.ccclass;b.property,e("s",(ge=Ie("slot_base_model"),be=m.Global(ee.Route.GameInfo),ve=m.Global(ee.Route.Spin),ge((Te=i((Ce=function(e){function n(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return t=e.call.apply(e,[this].concat(i))||this,o(t,"__symbolTable",Te,s(t)),o(t,"__initCols",we,s(t)),o(t,"__betSettingTable",Pe,s(t)),o(t,"__entryResult",Re,s(t)),o(t,"__spinResult",Ee,s(t)),o(t,"__balance",xe,s(t)),t}t(n,e);var i=n.prototype;return i.onGameInfo=function(e){this.isError(e)?this.module.logger.error(e.msg):(this.__entryResult=e.response.data,this.__balance=this.__entryResult.balance)},i.onSpin=function(e){this.isError(e)?this.module.logger.error(e.status):(this.__spinResult=e.response.data,this.__balance=this.__spinResult.balanceAfterBet)},i.isError=function(e){return!e.ok||200!=e.response.code},i.clearSpinResult=function(){this.__spinResult=null},i.updateBalance=function(){this.__balance=this.__spinResult.balance},i.fakeEntryResult=function(){},i.fakeSpinResult=function(){},n}(W)).prototype,"__symbolTable",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),we=i(Ce.prototype,"__initCols",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Pe=i(Ce.prototype,"__betSettingTable",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Re=i(Ce.prototype,"__entryResult",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ee=i(Ce.prototype,"__spinResult",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),xe=i(Ce.prototype,"__balance",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),i(Ce.prototype,"onGameInfo",[be],Object.getOwnPropertyDescriptor(Ce.prototype,"onGameInfo"),Ce.prototype),i(Ce.prototype,"onSpin",[ve],Object.getOwnPropertyDescriptor(Ce.prototype,"onSpin"),Ce.prototype),Se=Ce))||Se));g._RF.pop(),g._RF.push({},"6213a3BbWNEbJNDUXixAlVP","slot_jackpot",void 0);var Ae=b.ccclass;b.property,e("e",(De=Ae("slot_jackpot"),Le=m.Module(ee.Event.Jackpot),De((i((Me=function(e){function n(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(t=e.call.apply(e,[this].concat(i))||this)._currentScore=0,t._currentType=U.None,t._stageType=U.None,t._currentConfig=null,t._isScrollToTargetScore=!1,t._panelButton=null,t._resolve=null,t}t(n,e);var i=n.prototype;return i.onLoad=function(){this.autoAlignWidget(),this._panelButton=this.node.getComponent(v)||this.node.addComponent(v),this.createEvent(this._panelButton.clickEvents,"click"),this.node.active=!1},i.onEnable=function(){S.on(C.EventType.KEY_DOWN,this.onKeyDown,this)},i.onDisable=function(){S.off(C.EventType.KEY_DOWN,this.onKeyDown,this),this.unscheduleAllCallbacks(),f.cancel(this)},i.onKeyDown=function(e){this.node.active&&this._panelButton.interactable&&e.keyCode==T.SPACE&&this.click()},i.__onShow=function(){var e=p(d().mark((function e(t){var n=this;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(p(d().mark((function e(i){var r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(f.cancel(n),n.unscheduleAllCallbacks(),(r=n.getJackpotType(t))!==U.None){e.next=6;break}return n.node.active=!1,e.abrupt("return",i(!1));case 6:return e.next=8,z.instance.fadeOutMusic();case 8:n.node.active=!0,n._resolve=i,n.handler(t,r);case 11:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),i.handler=function(e,t){var n=this;return f.new(p(d().mark((function i(r){var o;return d().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(o=n.parseConfig(t),console.error(o),n._currentType=t,n._currentScore=e,n._currentConfig=o,n._isScrollToTargetScore=!1,n._panelButton.interactable=!1,n.scheduleOnce(n.waitPlayEndJackpotAnimation,o.scoreDuration),t!==U.Ultra){i.next=32;break}return console.log("【超级巨奖 1】-> 大奖"),i.next=12,n.playBigJackpotAnimation(e,o);case 12:return n._stageType=U.Big,console.log("第一个动画播完了"),n._panelButton.interactable=!0,i.next=17,n.wait(o.bigTime);case 17:return console.log("【超级巨奖 2】-> 巨奖"),i.next=20,n.playMegaJackpotAnimation(e,o);case 20:return n._stageType=U.Mega,i.next=23,n.wait(o.megaTime);case 23:return console.log("【超级巨奖 3】-> 超级巨奖"),i.next=26,n.playUltraJackpotAnimation(e,o);case 26:return n._stageType=U.Ultra,console.log("【超级巨奖 4】-> 最后阶段"),i.next=30,n.wait(o.ultraTime);case 30:i.next=56;break;case 32:if(t!==U.Mega){i.next=48;break}return console.log("【巨奖 1】-> 大奖"),i.next=36,n.playBigJackpotAnimation(e,o);case 36:return n._stageType=U.Big,n._panelButton.interactable=!0,i.next=40,n.wait(o.bigTime);case 40:return console.log("【巨奖 2】-> 巨奖"),i.next=43,n.playMegaJackpotAnimation(e,o);case 43:return n._stageType=U.Mega,i.next=46,n.wait(o.megaTime);case 46:i.next=56;break;case 48:if(t!==U.Big){i.next=56;break}return console.log("【大奖】-> 大奖"),i.next=52,n.playBigJackpotAnimation(e,o);case 52:return n._stageType=U.Big,n._panelButton.interactable=!0,i.next=56,n.wait(o.bigTime);case 56:case"end":return i.stop()}}),i)}))),this)},i.getJackpotType=function(e){var t=this.viewModel.calcWinTypeThreshold();return e>=t.ultraThreshold?U.Ultra:e>=t.megaThreshold?U.Mega:e>=t.bigThreshold?U.Big:U.None},i.parseConfig=function(e){var t=this.module.config.Jackpot,n={bigTime:0,megaTime:0,ultraTime:0,scoreDuration:0,autoCloseTime:t.autoCloseTime,waitCloseTime:t.waitCloseTime};switch(e){case U.Big:n.bigTime=t.bigDuration[0],n.scoreDuration=n.bigTime;break;case U.Mega:n.bigTime=t.bigDuration[0]+t.bigDuration[1],n.megaTime=t.megaDuration[0],n.scoreDuration=n.bigTime+n.megaTime;break;case U.Ultra:n.bigTime=t.bigDuration[0]+t.bigDuration[1],n.megaTime=t.megaDuration[0]+t.megaDuration[1],n.ultraTime=t.ultraDuration[0],n.scoreDuration=n.bigTime+n.megaTime+n.ultraTime}return n},i.waitPlayEndJackpotAnimation=function(){var e=p(d().mark((function e(){var t=this;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.unschedule(this.waitPlayEndJackpotAnimation),this._panelButton.interactable=!1,this._isScrollToTargetScore=!0,e.next=5,this.playEndJackpotAnimation(this._currentScore,this._currentType,this._stageType);case 5:this.scheduleOnce(this.click,this._currentConfig.autoCloseTime),this.scheduleOnce((function(){t._panelButton.interactable=!0}),this._currentConfig.waitCloseTime);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),i.click=function(){var e=p(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(f.cancel(this),this._isScrollToTargetScore){e.next=5;break}this.waitPlayEndJackpotAnimation(),e.next=12;break;case 5:return this._panelButton.interactable=!1,this.unscheduleAllCallbacks(),e.next=9,this.playCloseJackpotAnimation();case 9:z.instance.fadeInMusic(),this.node.active=!1,this._resolve(!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n}(K)).prototype,"__onShow",[Le],Object.getOwnPropertyDescriptor(Me.prototype,"__onShow"),Me.prototype),Oe=Me))||Oe));g._RF.pop(),g._RF.push({},"4241ciWiotNZZrJsepjj9f1","SlotDefine",void 0);var Be="__SLOT_LAYER_INDEX__REEL__",Fe="__SLOT_RAW_INDEX__SYMBOL__",Ne="__SLOT_LAYER_INDEX__EXTEND__",He=e("h",function(e){return e[e.HORIZONTAL=0]="HORIZONTAL",e[e.VERTICAL=1]="VERTICAL",e}({})),We=e("j",function(e){return e[e.CLOCKWISE=0]="CLOCKWISE",e[e.COUNTER_CLOCKWISE=1]="COUNTER_CLOCKWISE",e}({})),ze=e("k",function(e){return e.Reel_Spin_Start="Reel_Spin_Start",e.Reel_Spin_End="Reel_Spin_End",e.Reel_Accelerate="Reel_Accelerate",e.Reel_Decelerate="Reel_Decelerate",e.Reel_DecelerateComplete="Reel_DecelerateComplete",e.Reel_ChangeSpeedStart="Reel_ChangeSpeedStart",e.Reel_changeSpeedComplete="Reel_changeSpeedComplete",e.Symbol_Visible="Symbol_Visible",e.Symbol_Disable="Symbol_Disable",e.Symbol_Clone="Symbol_Clone",e.Symbol_On_Reset_For_Layer="Symbol_On_Reset_For_Layer",e}({}));g._RF.pop(),g._RF.push({},"24666GqPi5AmJ1iBBpB2Bep","SlotHelper",void 0);var Ve,Ke,Ge=new w,Ze=e("n",function(){function e(){}return e.adjustPositionByLayout=function(e,t){e.reel.container.layoutType==He.HORIZONTAL?t.y+=e.transform.height:t.x+=e.transform.width},e.compareMaxDimension=function(e,t,n){return e.container.layoutType==He.HORIZONTAL?e.params.spinType==We.CLOCKWISE?Math.abs(t.y)>Math.abs(n.y)?t:n:Math.abs(t.y)>Math.abs(n.y)?n:t:e.params.spinType==We.CLOCKWISE?Math.abs(t.x)>Math.abs(n.x)?n:t:Math.abs(t.x)>Math.abs(n.x)?t:n},e.calcEdgePositionInNode=function(e,t){var n=e.reel.container;n.transform.convertToWorldSpaceAR(w.ZERO,Ge),e.reel.transform.getComponent(P).convertToNodeSpaceAR(Ge,Ge);var i=n.transform.height,r=n.transform.width;n.layoutType==He.HORIZONTAL?e.reel.params.spinType==We.CLOCKWISE?t.y=Ge.y-i/2+e.transform.height/2:t.y=Ge.y+i/2-e.transform.height/2:e.reel.params.spinType==We.CLOCKWISE?t.x=Ge.x+r/2-e.transform.width/2:t.x=Ge.x-r/2+e.transform.width/2},e.calcEdgePositionOutNode=function(e,t){var n=e.reel.container;n.transform.convertToWorldSpaceAR(w.ZERO,Ge),e.reel.transform.convertToNodeSpaceAR(Ge,Ge);var i=n.transform.height,r=n.transform.width;n.layoutType==He.HORIZONTAL?e.reel.params.spinType==We.CLOCKWISE?t.y=Ge.y+i/2+e.transform.height/2:t.y=Ge.y-i/2-e.transform.height/2:e.reel.params.spinType==We.CLOCKWISE?t.x=Ge.x-r/2-e.transform.width/2:t.x=Ge.x+r/2+e.transform.width/2},e.calcPositionRelativeToPrev=function(e,t,n){var i=e.reel.params.spacing;t.reel.container.layoutType==He.HORIZONTAL?t.reel.params.spinType==We.CLOCKWISE?n.y=e.virtualPosition.y+e.transform.height/2+i+t.transform.height/2:n.y=e.virtualPosition.y-e.transform.height/2-i-t.transform.height/2:t.reel.params.spinType==We.CLOCKWISE?n.x=e.virtualPosition.x-e.transform.width/2-i-t.transform.width/2:n.x=e.virtualPosition.x+e.transform.width/2+i+t.transform.width/2},e.isArrivedFillPosition=function(e){var t=e.reel.container;t.transform.convertToNodeSpaceAR(e.node.worldPosition,Ge);var n=.5*e.transform.height,i=.5*e.transform.width,r=.5*t.transform.height,o=.5*t.transform.width;return t.layoutType===He.HORIZONTAL?e.reel.params.spinType==We.CLOCKWISE?Ge.y+n<=r:Ge.y-n>=-r:e.reel.params.spinType==We.CLOCKWISE?Ge.x-i>=-o:Ge.x+i<=o},e.isArrivedRecyclePosition=function(e){var t=e.reel.container;t.transform.convertToNodeSpaceAR(e.node.worldPosition,Ge);var n=.5*e.transform.height,i=.5*e.transform.width,r=.5*t.transform.height,o=.5*t.transform.width;return t.layoutType===He.HORIZONTAL?e.reel.params.spinType==We.CLOCKWISE?Ge.y+n<-r:Ge.y-n>r:e.reel.params.spinType==We.CLOCKWISE?Ge.x-i>o:Ge.x+i<-o},e.calcToContainerEndDistance=function(e,t){var n=e.reel.container;n.transform.convertToNodeSpaceAR(e.node.worldPosition,Ge);var i=.5*e.transform.height,r=.5*e.transform.width,o=.5*n.transform.height,s=.5*n.transform.width,a=e.reel.params.spacing;return n.layoutType===He.HORIZONTAL?e.reel.params.spinType===We.CLOCKWISE?-o-Ge.y-i-t-a:o-Ge.y+i+t+a:e.reel.params.spinType===We.CLOCKWISE?s-Ge.x+r+t+a:-s-Ge.x-r-t-a},e.isRectWithinAnother=function(e,t,n){var i=e.node==t.node.parent?t.node.position:e.convertToNodeSpaceAR(t.node.worldPosition),r=!0;if("vertical"==n||"both"==n){var o=e.height*(1-e.anchorY),s=-e.height*e.anchorY,a=i.y+t.height*(1-t.anchorY),l=i.y-t.height*t.anchorY;o=Math.round(o),s=Math.round(s),a=Math.round(a),l=Math.round(l),r=r&&o>=a&&s<=l}if("horizontal"==n||"both"==n){var h=e.width*(1-e.anchorX),c=-e.width*e.anchorX,u=i.x+t.width*(1-t.anchorX),_=i.x-t.width*t.anchorX;h=Math.round(h),c=Math.round(c),u=Math.round(u),_=Math.round(_),r=r&&h>=u&&c<=_}return r},e.sortChildren=function(e,t){e.sort((function(e,n){return n[t]-e[t]}));for(var n=0;n<e.length;n++){e[n].setSiblingIndex(0)}},e}());g._RF.pop(),g._RF.push({},"c7061CtOt5NBrHlwdjwrDiO","SlotExtendLayer",void 0);var Je,je=b.ccclass,Ue=(b.property,e("i",function(e){return e[e.LOWER=0]="LOWER",e[e.MEDIUM=1]="MEDIUM",e[e.HIGHER=2]="HIGHER",e}({}))),Ye=je("SlotExtendLayer")(((Ke=function(e){function n(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(t=e.call.apply(e,[this].concat(i))||this)._container=null,t._lowerLayer=null,t._mediumLayer=null,t._higherLayer=null,t._layerMap=new Map,t}t(n,e);var i=n.prototype;return i._init=function(e){this._container=e,this._lowerLayer=new R("lowerLayer"),this._lowerLayer.addComponent(P),this._lowerLayer.layer=this.node.layer,this._lowerLayer.parent=this.node,this._mediumLayer=new R("mediumLayer"),this._mediumLayer.addComponent(P),this._mediumLayer.layer=this.node.layer,this._mediumLayer.parent=this.node,this._higherLayer=new R("higherLayer"),this._higherLayer.addComponent(P),this._higherLayer.layer=this.node.layer,this._higherLayer.parent=this.node},i.getLayer=function(e){switch(e){case Ue.LOWER:return this._lowerLayer;case Ue.MEDIUM:return this._mediumLayer;case Ue.HIGHER:return this._higherLayer}},i.clear=function(){this._layerMap.forEach((function(e){e.forEach((function(e){e.clear()}))})),this._layerMap.clear()},i.set=function(e,t,n,i){if(e.layerContent){var r=e.layerContent.getComponent(E);r&&(r.enabled=!1,console.warn("SlotExtendLayer: Widget is not supported in SlotExtendLayer"));var o=e.reel.index;if(this.has(e,t))console.log("已存在");else{this.removeSymbol(e),this._layerMap.has(t)||this._layerMap.set(t,new Map);var s=this._layerMap.get(t);s.has(o)||s.set(o,new qe(this,t,o)),s.get(o).addSymbol(e,n,i)}}},i.has=function(e,t){if(this._layerMap.has(t)){var n=this._layerMap.get(t);if(n.has(e.reel.index))return null!=n.get(e.reel.index).findSymbol(e)}return!1},i.removeSymbol=function(e){var t=e.reel.index;this._layerMap.forEach((function(n){if(n.has(t)){var i=n.get(t),r=i.findSymbol(e);r&&(r.targetOff(),r.reset(),i.removeSymbol(r))}}))},i._remove=function(e,t){if(this._layerMap.has(e)){var n=this._layerMap.get(e);n.has(t)&&n.delete(t),0==n.size&&this._layerMap.delete(e)}},i.update=function(e){this._layerMap.size>0&&this._layerMap.forEach((function(e){e.forEach((function(e){e.update()}))}))},c(n,[{key:"container",get:function(){return this._container}}]),n}(x)).Layer=Ue,Ve=Ke))||Ve,qe=function(){function e(e,t,n){this._virtualSymbols=[],this._layer=null,this.holder=e,this.layerType=t,this.index=n;var i=new R("virtualReel_"+n);this._layer=i.addComponent(P),this._layer.node[Be]=e.container.getReel(n).node.getSiblingIndex(),this._layer.node.layer=e.node.layer,this._layer.node.parent=e.getLayer(t),Ze.sortChildren(this._layer.node.parent.children,Be)}var t=e.prototype;return t.addSymbol=function(e,t,n){var i=new Xe(this,e,this._layer);i.setVisibleCallbackOnce(t),i.setDisableCallbackOnce(n),this._virtualSymbols.push(i)},t.removeSymbol=function(e){var t=this._virtualSymbols.indexOf(e);-1!=t&&this._virtualSymbols.splice(t,1),e.targetOff(),e.reset(),0==this._virtualSymbols.length&&this.destroySelf()},t.findSymbol=function(e){return this._virtualSymbols.find((function(t){return t.symbol==e}))},t.clear=function(){for(var e=0;e<this._virtualSymbols.length;e++){var t=this._virtualSymbols[e];t.targetOff(),t.reset()}this.destroySelf()},t.update=function(){var e=!1;this._virtualSymbols.forEach((function(t){t.update()&&(e=!0)})),e&&Ze.sortChildren(this._layer.node.children,Fe)},t.destroySelf=function(){this.holder._remove(this.layerType,this.index),this._layer.node.removeFromParent(),this._layer.node.destroy()},e}(),Xe=function(){function e(e,t,n){this._mode=void 0,this._tempVec3=void 0,this._onVisibleCallbackOnce=void 0,this._onDisableCallbackOnce=void 0,this._holder=e,this._symbol=t,this._layer=n,this._tempVec3=new w,this._mode=t.reel.container.layoutType==He.HORIZONTAL?"vertical":"horizontal",t.layerContent.__SLOT_RAW_INDEX__SYMBOL__=t.node.getSiblingIndex(),t.node.on(R.EventType.ACTIVE_IN_HIERARCHY_CHANGED,this._onSymbolActive,this),t.node.on(R.EventType.NODE_DESTROYED,this._onSymbolDestroy,this)}var t=e.prototype;return t.setVisibleCallbackOnce=function(e){this._onVisibleCallbackOnce=e},t.setDisableCallbackOnce=function(e){this._onDisableCallbackOnce=e},t._onSymbolActive=function(){this._symbol.node.active||(this.targetOff(),this.reset(),this._holder.removeSymbol(this))},t._onSymbolDestroy=function(){this.targetOff(),this.reset(),this._holder.removeSymbol(this)},t.targetOff=function(){var e;this._onVisibleCallbackOnce=null,this._onDisableCallbackOnce=null,null==(e=this._symbol)||null==(e=e.node)||e.targetOff(this)},t.update=function(){var e=this._symbol.reel.container.transform,t=this._symbol.transform,n=!1;return Ze.isRectWithinAnother(e,t,this._mode)?(this._symbol.layerContent.parent!=this._layer.node&&(this._symbol.layerContent.parent=this._layer.node,n=!0),this._tempVec3.set(0,0,0),this._layer.convertToNodeSpaceAR(this._symbol.node.worldPosition,this._tempVec3),this._symbol.layerContent.setPosition(this._tempVec3),this._onVisibleCallbackOnce&&(this._onVisibleCallbackOnce(),this._onVisibleCallbackOnce=null)):this.reset(),n},t.reset=function(){this._symbol.layerContent.parent!=this._symbol.node&&(this._symbol.layerContent.parent=this._symbol.node,this._symbol.layerContent.setPosition(0,0,0),this._symbol.node.emit(ze.Symbol_On_Reset_For_Layer),this._onDisableCallbackOnce&&(this._onDisableCallbackOnce(),this._onDisableCallbackOnce=null))},c(e,[{key:"symbol",get:function(){return this._symbol}}]),e}();g._RF.pop(),g._RF.push({},"71b75/HfblARqOyLig7w2Ic","ScrollHandler",void 0);var Qe,$e=b.ccclass,et=(b.property,$e("ScrollHandler")(Je=function(e){function n(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(t=e.call.apply(e,[this].concat(i))||this)._deltaTime=void 0,t._previous=void 0,t._scroller=void 0,t._setState=void 0,t}return t(n,e),n.prototype.init=function(e,t){this._scroller=e,this._setState=t},n}(x))||Je);g._RF.pop(),g._RF.push({},"05404V4kVlAuKADVx+Ob+cB","IdleHandler",void 0);var tt,nt=b.ccclass,it=(b.property,nt("IdleHandler")(Qe=function(e){function n(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(t=e.call.apply(e,[this].concat(i))||this)._params=void 0,t._onComplete=null,t}t(n,e);var i=n.prototype;return i.onComplete=function(e){return this._onComplete=e,this},i.initParams=function(e){return this._scroller.state!=pt.Idle?(this._onComplete&&(this._onComplete(),this._onComplete=null),this):(this._params=y({duration:0,speed:0,easing:k.linear,customEasing:this._defaultCustomEasing.bind(this)},e),this._params.speed=-Math.abs(this._params.speed),this._previous=this._scroller.speed,this._scroller.setSpeed(this._params.speed),this._deltaTime=0,this)},i.ease=function(e){if(this._params&&this._params.duration>0){var t=this._deltaTime+=e;if(!(this._deltaTime>=this._params.duration))return t=this._params.easing(this._deltaTime),this._params.customEasing(e,t,this._previous,this);this._onComplete&&(this._onComplete(),this._onComplete=null),this._params=null}return this._scroller.speed*e},i.run=function(){},i._defaultCustomEasing=function(e,t,n,i){return(n+(i.params.speed-n)*t/i.params.duration)*e},c(n,[{key:"params",get:function(){return this._params}}]),n}(et))||Qe);g._RF.pop(),g._RF.push({},"f8163IjIepIxrQlEugHueVC","SpinHandler",void 0);var rt,ot=b.ccclass,st=(b.property,ot("SpinHandler")(tt=function(e){function n(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(t=e.call.apply(e,[this].concat(i))||this)._params=void 0,t._onAccelerateProgress=void 0,t._onComplete=null,t}t(n,e);var i=n.prototype;return i.initParams=function(e){return this._params=y({accelerateDuration:.15,accelerateFactor:1.68,accelerateDistance:-378,bounceDistance:60,bounceDuration:.15,bounceFactor:1.84,bounceEasing:this._defaultBounceEasing,accelerateEasing:this._defaultAccelerateEasing},e||{}),this},i.onAccelerateProgress=function(e){return this._onAccelerateProgress=e,this},i.onComplete=function(e){return this._onComplete=e,this},i.run=function(e){return void 0===e&&(e=0),this._params?this._scroller.state!=pt.None?console.error("滚动时状态不对！需要状态为None才可以启动"):void(e>0?this.scheduleOnce(this._delayCall,e):this._delayCall()):console.error("没有初始化参数")},i._delayCall=function(){this._deltaTime=0,this._previous=0,this.unschedule(this._delayCall),this._setState(pt.Spin)},i._defaultBounceEasing=function(e,t,n){var i=1-Math.pow(1-e/n.bounceDuration,n.bounceFactor);return n.bounceDistance*i},i._defaultAccelerateEasing=function(e,t,n){var i=Math.pow(e/n.accelerateDuration,n.accelerateFactor);return n.accelerateDistance*i+n.bounceDistance},i.ease=function(e){var t=0,n=this._deltaTime+=e;if(this._deltaTime<=this._params.bounceDuration){var i=this._params.bounceEasing(n,this._scroller.speed,this._params);return t=i-this._previous,this._previous=i,t}if((n-=this._params.bounceDuration)<this._params.accelerateDuration){var r=this._params.accelerateEasing(n,this._scroller.speed,this._params);if(t=r-this._previous,this._previous=r,this._onAccelerateProgress){var o=Math.pow(n/this._params.accelerateDuration,this._params.accelerateFactor);this._onAccelerateProgress(o)}return t}return this._onAccelerateProgress&&(this._onAccelerateProgress(1),this._onAccelerateProgress=null),this._onComplete&&(this._onComplete(),this._onComplete=null),null},c(n,[{key:"params",get:function(){return this._params}}]),n}(et))||tt);g._RF.pop(),g._RF.push({},"909194p/01AbaKR/m6nlUq1","StopHandler",void 0);var at,lt,ht=b.ccclass,ct=(b.property,ht("StopHandler")(rt=function(e){function n(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(t=e.call.apply(e,[this].concat(i))||this)._params=void 0,t._decelerateDistance=void 0,t._decelerateDuration=void 0,t._halfDeceleration=void 0,t._isStopImmediately=void 0,t._finalPosition=void 0,t._isDelayStop=void 0,t._onDecelerateProgress=null,t._onDecelerateComplete=null,t._onReadyStop=void 0,t._onComplete=null,t}t(n,e);var i=n.prototype;return i.initParams=function(e){return this._params=y({speed:180,bounceDistance:-60,bounceDuration:.15,bounceFactor:1.84,decelerateCompleteProgress:.2,decelerateEasing:this._defaultDecelerateEasing,bounceEasing:this._defaultBounceEasing},e),this},i.onReadyStop=function(e){return this._onReadyStop=e,this},i.onDecelerateProgress=function(e){return this._onDecelerateProgress=e,this},i.onDecelerateComplete=function(e){return this._onDecelerateComplete=e,this},i.onComplete=function(e){return this._onComplete=e,this},i.stopImmediately=function(){if(this._isDelayStop)return this._isStopImmediately=!0,void this._delayCall();this._scroller.state==pt.Stop?(this._setState(pt.None),this._onDecelerateProgress&&(this._onDecelerateProgress(0),this._onDecelerateProgress=null),this._onComplete&&(this._onComplete(this._finalPosition),this._onComplete=null),this._onDecelerateComplete&&(this._onDecelerateComplete(),this._onDecelerateComplete=null)):console.warn("不能立刻停止，因为状态不对",this._scroller.state)},i.run=function(e,t){return void 0===e&&(e=!1),void 0===t&&(t=0),this._params?this._scroller.state!=pt.Idle?console.warn("停止时状态不对！需要状态为Idle怠速状态时才可以停止"):(this._isStopImmediately=e,void(!e&&t>0?(this._isDelayStop=!0,this.scheduleOnce(this._delayCall,t)):this._delayCall())):console.error("没有初始化参数")},i.ease=function(e){var t=0,n=this._deltaTime+=e;if(n<this._decelerateDuration){var i=this._params.decelerateEasing(n,this._scroller.speed,this);t=i-this._previous;var r=1-n/this._decelerateDuration;return this._onDecelerateProgress&&this._onDecelerateProgress(r),this._onDecelerateComplete&&r<=this._params.decelerateCompleteProgress&&(this._onDecelerateComplete(),this._onDecelerateComplete=null),this._previous=i,t}if(this._onDecelerateProgress&&(this._onDecelerateProgress(0),this._onDecelerateProgress=null),(n-=this._decelerateDuration)<this._params.bounceDuration){var o=this._params.bounceEasing(n,this._scroller.speed,this);return t=o-this._previous,this._previous=o,t}return this._onComplete&&(this._onComplete(this._finalPosition),this._onComplete=null),null},i._delayCall=function(){this.unschedule(this._delayCall),this._isDelayStop=!1,this._deltaTime=0,this._previous=0;var e=this._onReadyStop(),t=e.distance,n=e.finalPosition;if(this._finalPosition=n,this._setState(pt.Stop),this._isStopImmediately)this.stopImmediately();else{var i=-Math.abs(this._params.speed),r=this._scroller.speed;this._decelerateDistance=-Math.abs(t),this._decelerateDuration=2*this._decelerateDistance/(r+i),this._halfDeceleration=(i-r)/this._decelerateDuration/2}},i._defaultBounceEasing=function(e,t,n){var i=Math.pow(2,-12*e)*Math.sin(2*Math.PI*(.1*e-.075)/.3)+1;return n.decelerateDistance-n.params.bounceDistance*i},i._defaultDecelerateEasing=function(e,t,n){return t*e+n.halfDeceleration*e*e},c(n,[{key:"decelerateDistance",get:function(){return this._decelerateDistance}},{key:"decelerateDuration",get:function(){return this._decelerateDuration}},{key:"halfDeceleration",get:function(){return this._halfDeceleration}},{key:"params",get:function(){return this._params}}]),n}(et))||rt);g._RF.pop(),g._RF.push({},"c6a91N0yzZGIYPOTq18iqR1","Scroller",void 0);var ut,_t=b.ccclass,pt=(b.property,e("l",function(e){return e[e.None=0]="None",e[e.Idle=1]="Idle",e[e.Spin=2]="Spin",e[e.Stop=3]="Stop",e}({}))),dt=_t("Scroller")(((lt=function(){function e(e){this._state=pt.None,this._speed=5040,this._idleHandler=null,this._spinHandler=null,this._stopHandler=null,this._onPosition=null,this._idleHandler=e.node.addComponent(it),this._spinHandler=e.node.addComponent(st),this._stopHandler=e.node.addComponent(ct),this._idleHandler.init(this,this._setState.bind(this)),this._spinHandler.init(this,this._setState.bind(this)),this._stopHandler.init(this,this._setState.bind(this))}var t=e.prototype;return t._setState=function(e){this._state=e},t.setSpeed=function(e){this._speed=-Math.abs(e)},t.onPosition=function(e){this._onPosition=e},t.update=function(e){if(this._state===pt.Idle){var t=this.idle.ease(e);this._onPosition(t)}else if(this._state===pt.Spin){var n=this.spin.ease(e);null!=n?this._onPosition(n):this._setState(pt.Idle)}else if(this._state===pt.Stop){var i=this.stop.ease(e);null!=i?this._onPosition(i):this._setState(pt.None)}},c(e,[{key:"state",get:function(){return this._state}},{key:"speed",get:function(){return this._speed}},{key:"spin",get:function(){return this._spinHandler}},{key:"stop",get:function(){return this._stopHandler}},{key:"idle",get:function(){return this._idleHandler}}]),e}()).State=pt,at=lt))||at;g._RF.pop(),g._RF.push({},"5e5b729N0ZGVZcVzBhoyMkM","SlotReel",void 0);var mt,ft,yt,gt,bt,vt,St=b.ccclass,Ct=(b.property,new w),Tt=new w,wt=new w,Pt=St("SlotReel")(ut=function(e){function n(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(t=e.call.apply(e,[this].concat(i))||this)._index=0,t._symbolPool=[],t._symbolList=[],t._symbolWeights=[],t._stopSymbols=null,t._symbolTable=null,t._transform=null,t._isChangeSpeed=!1,t._scroller=null,t._decelerateProgress=void 0,t._accelerateProgress=void 0,t._container=null,t._params=null,t._vecKey=null,t._sizeKey=null,t._spinDirection=1,t}t(n,e);var i=n.prototype;return i._initDirection=function(){this.container.layoutType===He.HORIZONTAL?(this._vecKey="y",this._sizeKey="height",this._spinDirection=this.params.spinType===We.CLOCKWISE?-1:1):(this._vecKey="x",this._sizeKey="width",this._spinDirection=this.params.spinType===We.CLOCKWISE?1:-1)},i._initBaseSize=function(){var e;this.params.symbolBaseSize||(this.params.symbolPrefab instanceof R?e=this.params.symbolPrefab.getComponent(P):this.params.symbolPrefab instanceof D&&(e=this.params.symbolPrefab.data.getComponent(P)),this.params.symbolBaseSize=new L(e.width,e.height))},i._init=function(e,t,n){var i=this;this._container=e,this._params=t,this._index=n,this._initBaseSize(),this._initDirection(),this.transform.setContentSize(0,0),this._scroller=new dt(this);var r=new w;this._scroller.onPosition((function(e){i.node.getPosition(r),r[i._vecKey]-=e*i._spinDirection,i.node.setPosition(r)}))},i.onEnable=function(){this.node.on(R.EventType.TRANSFORM_CHANGED,this._onTransformChanged,this)},i.onDisable=function(){this.node.off(R.EventType.TRANSFORM_CHANGED,this._onTransformChanged,this)},i.setSymbolTable=function(e){return this._symbolTable=e,this},i.findSymbolByIndex=function(e){return this._symbolList?this._symbolList.find((function(t){return t.index==e})):null},i.getSymbol=function(e){return this._symbolList[e]},i.getSymbols=function(){return this._symbolList},i.setSymbolWeights=function(e){return this._symbolWeights=e,this},i.initVisible=function(e){for(var t=0,n=this.container.layoutType===He.HORIZONTAL?"width":"height",i=0;i<e.length;i++){var r=e[i],o=this._getSymbolByPool();this._initSymbolObject(o,r),t=Math.max(t,o.transform[n]),this._symbolList.push(o)}this.transform[n]=t,this._layout()},i.spin=function(e,t,n){var i=this;return new Promise((function(r){i._symbolList.length>30&&console.error("滚动的symbol数量超过30个，可能会导致性能问题，请检查是否有问题"),i._accelerateProgress=0,i._decelerateProgress=0,i._scroller.setSpeed(e),i._scroller.spin.onAccelerateProgress(i._onAccelerate.bind(i)).initParams(n).onComplete((function(){r()})).run(t)}))},i.stop=function(e,t,n,i,r,o){var s=this;return void 0===n&&(n=!1),void 0===i&&(i=0),new Promise((function(a){s._stopSymbols=[],s._accelerateProgress=1,s._decelerateProgress=1,s._scroller.stop.initParams(t).onDecelerateProgress((function(e){r&&r(e),s._onDecelerate(e)})).onDecelerateComplete((function(){o&&o(),s._onDecelerateComplete()})).onReadyStop((function(){var t=s._getStopDistance(e);return s._stopSymbols=e,{distance:t,finalPosition:s.node.position[s._vecKey]+t}})).onComplete((function(e){s.node.getPosition(Ct),Ct[s._vecKey]=e,s.node.setPosition(Ct),a()})).run(n,i)}))},i.idleSpeed=function(e){var t=this;return new Promise((function(n){t._scroller.idle.onComplete((function(){t._isChangeSpeed=!1,t.node.emit(ze.Reel_changeSpeedComplete,t),n()})).initParams(e),t._isChangeSpeed=!0,t.node.emit(ze.Reel_ChangeSpeedStart,t)}))},i.stopImmediately=function(){this._scroller.stop.stopImmediately()},i.recycleSymbol=function(e){this._recycle(e)},i.calcSymbolVirtualPosition=function(){for(var e=null,t=0;t<this._symbolList.length;t++){var n=this._symbolList[t];Ct.set(0,0,0),null==e?Ze.calcEdgePositionInNode(n,Ct):Ze.calcPositionRelativeToPrev(e,n,Ct),n._setVirtualPosition(Ct),e=n}return this},i.execSymbolVirtualPosition=function(){var e=p(d().mark((function e(t){var n,i,r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n=[],i=0;i<this._symbolList.length;i++)r=this._symbolList[i],n.push(r._execVirtualPosition(t));return e.next=4,Promise.all(n);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),i.recycleFakeSymbols=function(){for(var e=0;e<this._symbolList.length;e++){var t=this._symbolList[e];null!=t.index&&null!=t.index||this._recycle(t)}},i.resetSymbolIndex=function(){for(var e=0;e<this._symbolList.length;e++)this._symbolList[e].symbol.index=e},i.addSymbols=function(e){for(var t=this._symbolList[this._symbolList.length-1],n=null,i=0;i<e.length;i++){var r=this._getSymbolByPool();this._initSymbolObject(r,e[i]),Ct.set(0,0,0),n?Ze.calcPositionRelativeToPrev(n,r,Ct):(Ze.calcEdgePositionOutNode(r,Tt),t&&(Ze.calcPositionRelativeToPrev(t,r,wt),Ct.set(Ze.compareMaxDimension(this,Tt,wt)))),Ze.adjustPositionByLayout(r,Ct),r.setPosition(Ct),this._symbolList.push(r),n=r}},i._onAccelerate=function(e){this._accelerateProgress=e,this.node.emit(ze.Reel_Accelerate,this,e)},i._onDecelerate=function(e){this._decelerateProgress=e,this.node.emit(ze.Reel_Decelerate,this,e)},i._onDecelerateComplete=function(){this.node.emit(ze.Reel_DecelerateComplete,this)},i._getStopDistance=function(e){var t=this._symbolList[this._symbolList.length-1],n=e[0],i=0*new L(n.w*this.params.symbolBaseSize.width,n.h*this.params.symbolBaseSize.height)[this._sizeKey];return Ze.calcToContainerEndDistance(t,i)},i._layout=function(){for(var e=null,t=0;t<this._symbolList.length;t++){var n=this._symbolList[t];Ct.set(0,0,0),null==e?Ze.calcEdgePositionInNode(n,Ct):Ze.calcPositionRelativeToPrev(e,n,Ct),n.setPosition(Ct),e=n}},i._onTransformChanged=function(e){if(e===O.POSITION&&null!=this._symbolTable){for(;;){var t=this._symbolList[this._symbolList.length-1];if(!t)break;if(!Ze.isArrivedFillPosition(t))break;var n=this._getSymbolByPool(),i=this._getSymbolData();this._initSymbolObject(n,i),Ct.set(0,0,0),Ze.calcPositionRelativeToPrev(t,n,Ct),n.setPosition(Ct),this._symbolList.push(n)}for(;;){var r=this._symbolList[0];if(!r)break;if(!Ze.isArrivedRecyclePosition(r))break;this._recycle(r)}}},i._getSymbolData=function(){var e=this;if(this._stopSymbols&&this._stopSymbols.length>0)return this._stopSymbols.shift();for(var t=0,n=this._symbolWeights,i=function(){var i=e._symbolTable[r],o=n.find((function(e){return e.data===i.data}));t+=o?o.weight:1},r=0;r<this._symbolTable.length;r++)i();for(var o,s=Math.random()*t,a=function(){var t=e._symbolTable[l],i=n.find((function(e){return e.data===t.data})),r=i?i.weight:1;if(s<r)return{v:t};s-=r},l=0;l<this._symbolTable.length;l++)if(o=a())return o.v;throw new Error("Failed to select a Symbol")},i._getSymbolByPool=function(){var e=this._symbolPool.pop();if(!e){var t=M(this._params.symbolPrefab);e=t.getComponent("SlotSymbol")||t.addComponent("SlotSymbol")}return e},i._setParent=function(e){this.params.layerReverse?this.node.insertChild(e.node,0):this.node.addChild(e.node)},i._initSymbolObject=function(e,t){e._init(t,this),this._setParent(e),e._show()},i._recycle=function(e){var t=this._symbolList.findIndex((function(t){return t==e}));-1!=t&&(this._symbolList.splice(t,1),this._symbolPool.push(e),e._hide())},i._update=function(e){var t;null==(t=this._scroller)||t.update(e)},c(n,[{key:"index",get:function(){return this._index}},{key:"accelerateProgress",get:function(){return this._accelerateProgress}},{key:"decelerateProgress",get:function(){return this._decelerateProgress}},{key:"scroller",get:function(){return this._scroller}},{key:"isRunning",get:function(){return this._scroller.state!=dt.State.None}},{key:"isChangeSpeed",get:function(){return this._isChangeSpeed}},{key:"transform",get:function(){return this._transform||(this._transform=this.node.addComponent(P)),this._transform}},{key:"container",get:function(){return this._container}},{key:"params",get:function(){return this._params}},{key:"symbolLength",get:function(){return this._symbolList.length}}]),n}(x))||ut;g._RF.pop(),g._RF.push({},"915f2C1WmRBxoFfiIsiuTSE","SlotSymbol",void 0);var Rt,Et=b.ccclass,xt=b.property,kt=b.menu,Dt=e("m",(mt=Et("SlotSymbol"),ft=kt("老虎机/SlotSymbol"),yt=xt(R),mt(gt=ft((vt=i((bt=function(e){function n(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return t=e.call.apply(e,[this].concat(i))||this,o(t,"layerContent",vt,s(t)),t._symbol=null,t._reel=null,t._isClone=!1,t._virtualPosition=new w,t}t(n,e);var i=n.prototype;return i.onVisibled=function(){},i.onDisabled=function(){},i._init=function(e,t){this._symbol=e,this._reel=t},i._show=function(){var e;this.node.active=!0;var t=this.reel.params.symbolBaseSize;this.transform.width=t.width*this._symbol.w,this.transform.height=t.height*this._symbol.h,null==(e=this.onVisibled)||e.apply(this),this.node.emit(ze.Symbol_Visible,this)},i._hide=function(){var e;this.node.active=!1,null==(e=this.onDisabled)||e.apply(this),this.node.emit(ze.Symbol_Disable,this)},i._setClone=function(e){this._isClone=e,this.node.emit(ze.Symbol_Clone,this)},i.setPosition=function(e){this._setVirtualPosition(e),this._applyVirtualPosition()},i.execVirtualPosition=function(e,t){var n=t,i=Math.sqrt(2*-n/1e4),r=30-0*n,o=.5*(.15+0*i),s=this.node.getComponent(G)||this.node.addComponent(G);s.clear(),s.position.delay(e).by(i,{y:n},Z.easeIn(2.5)).by(o,{y:r},Z.easeOut(1.7)).by(o,{y:-r},Z.easeIn(1.7)).start()},i.initShiftParams=function(){return{bounceDistance:30,acceleration:1e4,bounceDistanceFactor:0,bounceDuraion:.15,accelerationFactor:2.5,bounceFactor:1.7,isTurbo:!1}},i._setVirtualPosition=function(e){this._virtualPosition.set(e)},i._applyVirtualPosition=function(){this.node.setPosition(this._virtualPosition)},i._execVirtualPosition=function(e){var t,n,i=this,r=0,o="";if(this.reel.container.layoutType==He.HORIZONTAL?(r=this._virtualPosition.y-this.node.position.y,o="y"):(r=this._virtualPosition.x-this.node.position.x,o="x"),!(Math.abs(r)<=2)){var s=this.initShiftParams(),a=s.isTurbo?5*s.acceleration:s.acceleration,l=Math.sqrt(2*-r/a),h=s.bounceDistance-r*s.bounceDistanceFactor,c=.5*(s.bounceDuraion+l*s.bounceDistanceFactor),u=this.node.getComponent(G)||this.node.addComponent(G);return u.clear(),u.position.delay(e).by(l,{y:r},Z.easeIn(s.accelerationFactor)).by(c,(t={},t[o]=h,t),Z.easeOut(s.bounceFactor)).by(c,(n={},n[o]=-h,n),Z.easeIn(s.bounceFactor)).call((function(){i._virtualPosition.set(i.node.position)})).start()}},c(n,[{key:"virtualPosition",get:function(){return this._virtualPosition}},{key:"symbol",get:function(){return this._symbol}},{key:"isClone",get:function(){return this._isClone}},{key:"index",get:function(){var e;return null==(e=this._symbol)?void 0:e.index}},{key:"data",get:function(){var e;return null==(e=this._symbol)?void 0:e.data}},{key:"reel",get:function(){return this._reel}}]),n}(K)).prototype,"layerContent",[yt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),gt=bt))||gt)||gt));g._RF.pop(),g._RF.push({},"4d5b4U4JqJF6Jm0zwRTz8HE","SlotExtend",void 0);var Lt,Ot=b.ccclass,Mt=(b.property,Ot("SlotExtend")(Rt=function(e){function n(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(t=e.call.apply(e,[this].concat(i))||this)._transform=void 0,t._container=null,t._params=null,t}t(n,e);var i=n.prototype;return i.setOrder=function(e){this._params.order=e,this.node[Ne]=this._params.order,Ze.sortChildren(this.node.parent.children,Ne)},i.init=function(e){return this._params=this.mergeParams(e),this.setOrder(this._params.order),this},i._init=function(e){this._container=e,this._params=this.getDefaultParams()},i.mergeParams=function(e){return y({},this.getDefaultParams(),e)},c(n,[{key:"transform",get:function(){return this._transform||(this._transform=this.node.getComponent(P)||this.node.addComponent(P)),this._transform}},{key:"container",get:function(){return this._container}},{key:"params",get:function(){return this._params}}]),n}(x))||Rt);g._RF.pop(),g._RF.push({},"d4cdetwWfpIsYL+6EpgFEuO","SlotExtendFixed",void 0);var It,At=b.ccclass,Bt=(b.property,At("SlotExtendFixed")(Lt=function(e){function n(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(t=e.call.apply(e,[this].concat(i))||this)._cloneMap=new Map,t}t(n,e);var i=n.prototype;return i.getDefaultParams=function(){return{}},i.init=function(t){return e.prototype.init.call(this,t),this},i.set=function(e){if(!isNaN(e.index))if(this.find(e))console.log("已存在");else{var t=this._cloneMap.get(e.reel.index);t||(t=new Ft(this.node,e.reel.index),this._cloneMap.set(e.reel.index,t),Ze.sortChildren(this.node.children,Be)),t.add(e)}},i.has=function(e){return null!=this.find(e)},i.remove=function(e){var t=this._cloneMap.get(e.reel.index);t&&t.has(e.index)&&t.remove(e.index)},i.find=function(e){if(isNaN(e.index))return null;var t=this._cloneMap.get(e.reel.index);return t?t.has(e.index)?t.get(e.index):void 0:null},i.clear=function(){this._cloneMap.forEach((function(e){e.clear()})),this._cloneMap.clear()},n}(Mt))||Lt),Ft=function(){function e(e,t){this._symbolMap=new Map,this._content=void 0,this._content=new R("reel_"+t),this._content.parent=e,this._content.layer=e.layer,this._content[Be]=t}var t=e.prototype;return t.has=function(e){return this._symbolMap.has(e)},t.get=function(e){return this._symbolMap.get(e)},t.remove=function(e){this._symbolMap.has(e)&&(this._symbolMap.get(e).node.destroy(),this._symbolMap.delete(e))},t.add=function(e){var t=e.node.getWorldPosition(),n=M(e.node);n.parent=this._content;var i=n.getComponent(Dt);i._setClone(!0),n.setWorldPosition(t),this._symbolMap.set(e.index,i),n.__SLOT_RAW_INDEX__SYMBOL__=e.node.getSiblingIndex(),Ze.sortChildren(this._content.children,Fe)},t.clear=function(){this._symbolMap.forEach((function(e){e.node.destroy()})),this._symbolMap.clear()},e}();g._RF.pop(),g._RF.push({},"c8220z5n9VPZ4gVLCZ2CG2P","SlotExtendLine",void 0);var Nt,Ht=b.ccclass,Wt=(b.property,function(e){return e[e.Draw=0]="Draw",e[e.Scale=1]="Scale",e[e.Size=2]="Size",e}({})),zt=new w,Vt=new w,Kt=new w,Gt=Ht("SlotExtendLine")(It=function(e){function n(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(t=e.call.apply(e,[this].concat(i))||this)._lineQueue=[],t._graphics=null,t}t(n,e);var i=n.prototype;return i.getDefaultParams=function(){return{order:0,mode:Wt.Draw,lineColor:I.BLACK,lineWidth:10,lineCap:A.LineCap.ROUND}},i.path=function(e,t){return this._lineQueue.push({from:this.convertToWorldSpaceWithOffset(e),to:this.convertToWorldSpaceWithOffset(t)}),this},i.start=function(){0!=this._lineQueue.length&&this.params.mode!=Wt.Draw&&this._drawNode()},i.clear=function(){this.enabled&&(this._lineQueue=[],this.params.mode==Wt.Draw?this.graphics.clear():this.node.destroyAllChildren())},i.update=function(e){if(this.params.mode==Wt.Draw&&0!=this._lineQueue.length){this.graphics.clear();for(var t=0;t<this._lineQueue.length;t++){var n=this._lineQueue[t],i=n.from,r=n.to;this.graphics.moveTo(i.x,i.y),this.graphics.lineTo(r.x,r.y)}this.graphics.stroke()}},i._drawNode=function(){this.node.destroyAllChildren();for(var e=this._lineQueue,t=0;t<e.length;t++){var n=e[t],i=n.from,r=n.to,o=w.subtract(zt,i,r).length();w.subtract(Vt,r,i);var s=-Math.atan2(-Vt.y,Vt.x)*(180/Math.PI);w.lerp(Kt,i,r,.5);var a=this._createLine();if(a.angle=s,a.setPosition(Kt),this.params.mode==Wt.Scale){var l=o/a.getComponent(P).width;a.setScale(l,1,1)}else a.getComponent(P).width=o}},i.convertToWorldSpaceWithOffset=function(e){var t=e instanceof R,n=t?e:e.node,i=t?{x:.5,y:.5}:e.anchor||{x:.5,y:.5},r=t?n.getComponent(P).contentSize:e.size||n.getComponent(P).contentSize,o=new w;return this.transform.convertToNodeSpaceAR(n.worldPosition,o),o.x+=(i.x-.5)*r.width,o.y+=(i.y-.5)*r.height,o},i._createLine=function(){var e=this.params,t=M(e.node);return t.layer=this.node.layer,t.parent=this.node,t.active=!0,t},c(n,[{key:"graphics",get:function(){if(!this._graphics){var e=this.params;this._graphics=this.node.addComponent(A),this._graphics.lineWidth=e.lineWidth,this._graphics.strokeColor.set(e.lineColor),this._graphics.lineCap=e.lineCap}return this._graphics}}]),n}(Mt))||It;g._RF.pop(),g._RF.push({},"4535b95YyVBoqAmSrAsK2t3","SlotExtendMask",void 0);var Zt,Jt=b.ccclass,jt=(b.property,.5522847493),Ut=new w,Yt=new I,qt=function(){function e(e){this._graphics=null,this._holder=null,this._runtime=null,this._tween=null,this._holder=e;var t=new R("extendMask");t.parent=e.node,t.layer=e.node.layer,this._graphics=t.addComponent(A),this._graphics.fillColor.set(e.params.color)}var t=e.prototype;return t.show=function(e,t,n,i){var r=this;return new Promise((function(o){var s=r._holder.params;if(s.autoFill?0==e?r._calcHeader(e):e==r._holder.container.reelLength-1?r._calcFooter(e):r._calcBody(e):r._calcBody(e),i||!r._tween){i&&r._tween&&(r._tween.stop(),r._tween=null);var a=isNaN(n)?s.color.a:n;null==r._tween&&(Yt.set(s.color),Yt.a=0,r._graphics.fillColor.set(Yt),r._tween=B(r._graphics.fillColor).to(t,{a:a}).call((function(){o()})).start())}else o()}))},t.hide=function(e){var t=this;return new Promise((function(n){t._tween&&(t._tween.stop(),t._tween=null),null!=t._runtime?t._tween=B(t._graphics.fillColor).to(e,{a:0}).call((function(){n(),t._tween=null})).start():n()}))},t._calcHeader=function(e){var t=this._holder.params,n=this._holder.container,i=n.getReel(e);if(i){var r=n.spacing;n.transform.convertToNodeSpaceAR(i.node.worldPosition,Ut),n.layoutType===He.HORIZONTAL?(this._runtime={x:-n.transform.width/2,y:-n.transform.height/2,width:n.transform.width/2+Ut.x+r/2,height:n.transform.height,radius:[t.radius,t.radius,0,0]},this._runtime.width+=i.transform.width/2):(this._runtime={x:-n.transform.width/2,y:Ut.y-i.transform.height/2-r/2,width:n.transform.width,height:i.transform.height/2+r/2,radius:[0,t.radius,t.radius,0]},this._runtime.height+=n.transform.height/2-Ut.y)}},t._calcFooter=function(e){var t=this._holder.params,n=this._holder.container,i=n.getReel(e),r=n.spacing;n.transform.convertToNodeSpaceAR(i.node.worldPosition,Ut),n.layoutType===He.HORIZONTAL?(this._runtime={x:Ut.x-i.transform.width/2-r/2,y:-n.transform.height/2,width:i.transform.width/2+r/2,height:n.transform.height,radius:[0,0,t.radius,t.radius]},this._runtime.width+=n.transform.width/2-Ut.x):(this._runtime={x:-n.transform.width/2,y:-n.transform.height/2,width:n.transform.width,height:n.transform.height/2+Ut.y+r/2,radius:[t.radius,0,0,t.radius]},this._runtime.height+=i.transform.height/2)},t._calcBody=function(e){var t=this._holder.params,n=this._holder.container,i=n.getReel(e),r=t.autoFill?n.spacing:0;n.transform.convertToNodeSpaceAR(i.node.worldPosition,Ut),n.layoutType===He.HORIZONTAL?this._runtime={x:Ut.x-i.transform.width/2-r/2,y:-n.transform.height/2,width:i.transform.width+r,height:n.transform.height,radius:[t.radius,t.radius,t.radius,t.radius]}:this._runtime={x:-n.transform.width/2,y:Ut.y-i.transform.height/2-r/2,width:n.transform.width,height:i.transform.height+r,radius:[t.radius,t.radius,t.radius,t.radius]},t.autoFill&&(this._runtime.radius=[0,0,0,0])},t.update=function(e){this._runtime&&(this._graphics.clear(),this._roundRect(this._runtime.x,this._runtime.y,this._runtime.width,this._runtime.height,this._runtime.radius),this._graphics.fill())},t._roundRect=function(e,t,n,i,r){var o=this._graphics,s=[Math.min(r[0],.5*Math.abs(n))*Math.sign(n),Math.min(r[1],.5*Math.abs(n))*Math.sign(n),Math.min(r[2],.5*Math.abs(n))*Math.sign(n),Math.min(r[3],.5*Math.abs(n))*Math.sign(n)],a=[Math.min(r[0],.5*Math.abs(i))*Math.sign(i),Math.min(r[1],.5*Math.abs(i))*Math.sign(i),Math.min(r[2],.5*Math.abs(i))*Math.sign(i),Math.min(r[3],.5*Math.abs(i))*Math.sign(i)];o.moveTo(e,t+a[0]),o.lineTo(e,t+i-a[1]),o.bezierCurveTo(e,t+i-a[1]*(1-jt),e+s[1]*(1-jt),t+i,e+s[1],t+i),o.lineTo(e+n-s[2],t+i),o.bezierCurveTo(e+n-s[2]*(1-jt),t+i,e+n,t+i-a[2]*(1-jt),e+n,t+i-a[2]),o.lineTo(e+n,t+a[3]),o.bezierCurveTo(e+n,t+a[3]*(1-jt),e+n-s[3]*(1-jt),t,e+n-s[3],t),o.lineTo(e+s[0],t),o.bezierCurveTo(e+s[0]*(1-jt),t,e,t+a[0]*(1-jt),e,t+a[0]),o.close()},e}(),Xt=Jt("SlotExtendMask")(Nt=function(e){function n(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(t=e.call.apply(e,[this].concat(i))||this)._reelMask=new Map,t}t(n,e);var i=n.prototype;return i.getDefaultParams=function(){return{order:0,radius:0,color:new I(0,0,0,200),autoFill:!0}},i.showIndex=function(e,t,n,i){if(void 0===t&&(t=0),void 0===i&&(i=!1),!(e<0||e>=this.container.reelLength)){if(!this._reelMask.has(e)){var r=new qt(this);this._reelMask.set(e,r)}return this._reelMask.get(e).show(e,t,n,i)}},i.hideIndex=function(e,t){if(void 0===t&&(t=0),this._reelMask.has(e))return this._reelMask.get(e).hide(t)},i.show=function(){var e=p(d().mark((function e(t,n,i){var r,o;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(void 0===t&&(t=0),void 0===i&&(i=!1),r=[],o=0;o<this.container.reelLength;o++)t>0?r.push(this.showIndex(o,t,n,i)):this.showIndex(o,t,n,i);if(!(r.length>0)){e.next=7;break}return e.next=7,Promise.all(r);case 7:case"end":return e.stop()}}),e,this)})));return function(t,n,i){return e.apply(this,arguments)}}(),i.hide=function(){var e=p(d().mark((function e(t){var n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t&&(t=0),n=[],this._reelMask.forEach((function(e){t>0?n.push(e.hide(t)):e.hide(t)})),!(n.length>0)){e.next=6;break}return e.next=6,Promise.all(n);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),i.get=function(e){return this._reelMask.get(e)},i.update=function(e){this._reelMask.forEach((function(t){t.update(e)}))},n}(Mt))||Nt;g._RF.pop(),g._RF.push({},"ff5b2xhkoZJJaXarPvAwfun","SlotContainer",void 0);var Qt=b.ccclass,$t=(b.property,b.menu),en=new w;e("g",Qt("SlotContainer")(Zt=$t("老虎机/SlotContainer")(Zt=function(e){function n(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(t=e.call.apply(e,[this].concat(i))||this)._layerExtend=null,t._maskExtend=null,t._lineExtend=null,t._fixedExtend=null,t._transform=null,t._reelList=[],t._reelParent=null,t._layoutType=He.HORIZONTAL,t._spacing=0,t._isLayerReverse=!1,t._symbolPrefab=null,t}t(n,e);var i=n.prototype;return i.initMaskExtend=function(e){if(!this._maskExtend){var t=new R("maskExtend");t.parent=this.layerExtend.getLayer(e),t.layer=this.node.layer,this._maskExtend=t.addComponent(Xt),this._maskExtend._init(this)}return this._maskExtend},i.setLayerReverse=function(e){return this._isLayerReverse=e,this},i.setSpacing=function(e){return this._spacing=e,this},i.setLayoutType=function(e){return this._layoutType=e,this},i.setSymbolPrefab=function(e){return this._symbolPrefab=e,this},i.addReel=function(e){if(null!=(e=this._mergeParams(e)).symbolPrefab){var t=new R("reel_"+this._reelList.length);this.isLayerReverse?this.reelParent.insertChild(t,0):this.reelParent.addChild(t);var n=t.addComponent(Pt);return this._reelList.push(n),n._init(this,e,this._reelList.length-1),n}console.error("SlotContainer.addReel: symbolPrefab is null")},i.getReel=function(e){return this._reelList[e]},i.layout=function(){this.layoutType==He.HORIZONTAL?this._layoutHorizontal():this._layoutVertical()},i.recycleFakeSymbols=function(){this._reelList.forEach((function(e){e.recycleFakeSymbols()}))},i.resetSymbolIndex=function(){this._reelList.forEach((function(e){e.resetSymbolIndex()}))},i._layoutVertical=function(){for(var e=this._reelList,t=this.spacing||0,n=0,i=0;i<e.length;i++){n+=e[i].transform.contentSize.height}for(var r=(n+=t*(e.length-1))/2,o=0;o<e.length;o++){var s=e[o];en.set(s.node.getPosition()),en.y=r-s.transform.contentSize.height/2,s.node.setPosition(en),r-=s.transform.contentSize.height+t}},i._layoutHorizontal=function(){for(var e=0,t=this._reelList,n=0;n<t.length;n++){e+=t[n].transform.contentSize.width}for(var i=this.spacing||0,r=-(e+=i*(t.length-1))/2,o=0;o<t.length;o++){var s=t[o];en.set(s.node.getPosition()),en.x=r+s.transform.contentSize.width/2,s.node.setPosition(en),r+=s.transform.contentSize.width+i}},i._mergeParams=function(e){return y({},this._getDefaultReelParams(),e)},i._getDefaultReelParams=function(){return{symbolPrefab:this._symbolPrefab,spinType:We.CLOCKWISE,layerReverse:!1,spacing:0}},i.update=function(e){this._reelList.forEach((function(t){t._update(e)}))},c(n,[{key:"layerExtend",get:function(){if(!this._layerExtend){var e=new R("layerExtend");e.parent=this.node,e.layer=this.node.layer,e.addComponent(P),this._layerExtend=e.addComponent(Ye),this._layerExtend._init(this)}return this._layerExtend}},{key:"maskExtend",get:function(){return this._maskExtend?this._maskExtend:this.initMaskExtend(Ue.LOWER)}},{key:"lineExtend",get:function(){if(!this._lineExtend){var e=new R("lineExtend");e.parent=this.layerExtend.getLayer(Ye.Layer.MEDIUM),e.layer=this.node.layer,this._lineExtend=e.addComponent(Gt),this._lineExtend._init(this)}return this._lineExtend}},{key:"fixedExtend",get:function(){if(!this._fixedExtend){var e=new R("fixedExtend");e.parent=this.layerExtend.getLayer(Ye.Layer.MEDIUM),e.layer=this.node.layer,this._fixedExtend=e.addComponent(Bt),this._fixedExtend._init(this)}return this._fixedExtend}},{key:"transform",get:function(){return this._transform||(this._transform=this.node.getComponent(P)),this._transform}},{key:"reelLength",get:function(){return this._reelList.length}},{key:"reelParent",get:function(){if(!this._reelParent){this._reelParent=new R("reelParent"),this._reelParent.addComponent(F);var e=this._reelParent.addComponent(E);e.top=e.bottom=e.left=e.right=0,e.isAlignTop=e.isAlignBottom=e.isAlignLeft=e.isAlignRight=!0,this._reelParent.layer=this.node.layer,this.node.insertChild(this._reelParent,0)}return this._reelParent}},{key:"layoutType",get:function(){return this._layoutType}},{key:"spacing",get:function(){return this._spacing}},{key:"isLayerReverse",get:function(){return this._isLayerReverse}}]),n}(x))||Zt)||Zt);g._RF.pop()}}}));

System.register("chunks:///VueProxy-cfe14689.js",["./BaseModule-8a96da91.js","cc"],(function(e){var n,t,i,o,a;return{setters:[function(e){n=e.N,t=e.g},function(e){i=e.cclegacy,o=e.Size,a=e.screen}],execute:function(){i._RF.push({},"6f463FIybhM3renwnjFkx6r","VueProxy",void 0);var c=function(){};c.C2V_LoginResult="c2v:login_result",c.C2V_AppReady="c2v:app:ready",c.C2V_GameReady="c2v:game:ready",c.C2V_OpenWallet="c2v:open_wallet",c.C2V_OpenHistory="c2v:open_history",c.C2V_OpenBetOption="c2v:open_bet_option",c.C2V_OpenAutoBet="c2v:open_auto_bet",c.C2V_OpenGameRule="c2v:open_game_rule",c.C2V_OpenPayTable="c2v:open_pay_table",c.V2C_Token="v2c:token",c.V2C_LoadGame="v2c:load_game",c.V2C_Start="v2c:start",c.V2C_Login="v2c:login",c.V2C_SelectBetOption="v2c:select_bet_option",c.V2C_SelectAutoBet="v2c:select_auto_bet";var s=e("V",function(){var e=i.prototype;function i(){n.instance.on(c.C2V_LoginResult,this.c2v_onLoginResult,this),n.instance.on(c.C2V_AppReady,this.c2v_onAppReady,this),n.instance.on(c.C2V_GameReady,this.c2v_onGameReady,this),n.instance.on(c.C2V_OpenWallet,this.c2v_openWallet,this),n.instance.on(c.C2V_OpenBetOption,this.c2v_openBetOption,this),n.instance.on(c.C2V_OpenAutoBet,this.c2v_openAutoBet,this),n.instance.on(c.C2V_OpenGameRule,this.c2v_openGameRule,this),n.instance.on(c.C2V_OpenPayTable,this.c2v_openPayTable,this),n.instance.on(c.C2V_OpenHistory,this.c2v_openHistory,this),window.addEventListener(c.V2C_Login,this.v2c_onLogin.bind(this)),window.addEventListener(c.V2C_LoadGame,this.v2c_onLoadGame.bind(this)),window.addEventListener(c.V2C_Start,this.v2c_onStart.bind(this)),window.addEventListener(c.V2C_SelectBetOption,this.v2c_onSelectBetOption.bind(this)),window.addEventListener(c.V2C_SelectAutoBet,this.v2c_onSelectAutoBet.bind(this))}return e.init=function(){},e.c2v_onLoginResult=function(e){window.dispatchEvent(new CustomEvent(c.C2V_LoginResult,{detail:e}))},e.c2v_onAppReady=function(){window.dispatchEvent(new CustomEvent(c.C2V_AppReady))},e.c2v_onGameReady=function(){window.dispatchEvent(new CustomEvent(c.C2V_GameReady))},e.c2v_openWallet=function(){window.dispatchEvent(new CustomEvent(c.C2V_OpenWallet))},e.c2v_openBetOption=function(e,n){window.dispatchEvent(new CustomEvent(c.C2V_OpenBetOption,{detail:{result:e,current:n}}))},e.c2v_openAutoBet=function(){window.dispatchEvent(new CustomEvent(c.C2V_OpenAutoBet))},e.c2v_openGameRule=function(e){window.dispatchEvent(new CustomEvent(c.C2V_OpenGameRule,{detail:{game:e}}))},e.c2v_openPayTable=function(e){window.dispatchEvent(new CustomEvent(c.C2V_OpenPayTable,{detail:{game:e}}))},e.c2v_openHistory=function(e){window.dispatchEvent(new CustomEvent(c.C2V_OpenHistory,{detail:{game:e}}))},e.v2c_onLogin=function(){n.instance.emit(c.V2C_Login)},e.v2c_onLoadGame=function(){n.instance.emit(c.V2C_LoadGame)},e.v2c_onStart=function(){n.instance.emit(c.V2C_Start)},e.v2c_onSelectBetOption=function(){n.instance.emit(c.V2C_SelectBetOption)},e.v2c_onSelectAutoBet=function(){n.instance.emit(c.V2C_SelectAutoBet)},t(i,null,[{key:"instance",get:function(){return this._instance||(this._instance=new i)}}]),i}());s.Event=c,s._instance=null;var _=new o(0,0),v=!1,p=new o(0,0),d=function(e,n){var t=a.devicePixelRatio;p.set(e*t,n*t),a.windowSize=p};window.addEventListener("UPDATE_CANVAS_SIZE",(function(e){v=!0,_.set(e.detail.width,e.detail.height)})),function e(){v&&(v=!1,d(_.width,_.height)),requestAnimationFrame(e)}(),s.instance.init(),i._RF.pop()}}}));

} }; });