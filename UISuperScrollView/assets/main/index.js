window.__require=function t(e,o,i){function r(s,h){if(!o[s]){if(!e[s]){var a=s.split("/");if(a=a[a.length-1],!e[a]){var c="function"==typeof __require&&__require;if(!h&&c)return c(a,!0);if(n)return n(a,!0);throw new Error("Cannot find module '"+s+"'")}s=a}var l=o[s]={exports:{}};e[s][0].call(l.exports,function(t){return r(e[s][1][t]||t)},l,l.exports,t,e,o,i)}return o[s].exports}for(var n="function"==typeof __require&&__require,s=0;s<i.length;s++)r(i[s]);return r}({UISuperItem:[function(t,e,o){"use strict";cc._RF.push(e,"05ad9vH0ANAc6m/Oc1rzygv","UISuperItem");var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),n=this&&this.__decorate||function(t,e,o,i){var r,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,i);else for(var h=t.length-1;h>=0;h--)(r=t[h])&&(s=(n<3?r(s):n>3?r(e,o,s):r(e,o))||s);return n>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("./UISuperLayout"),h=cc._decorator,a=h.ccclass,c=(h.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),Object.defineProperty(e.prototype,"width",{get:function(){return this.layout.vertical?(this.layout.accommodWidth-this.layout.spacingWidth)/this.layout.column:this.node.width*this.layout.getUsedScaleValue(this.node.scaleX)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.layout.horizontal?(this.layout.accommodHeight-this.layout.spacingWidth)/this.layout.column:this.node.height*this.layout.getUsedScaleValue(this.node.scaleY)},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){this.node.watchSelf=this.watchSelf.bind(this);var t=this.node.getComponent(cc.Widget);t&&(cc.warn("UISuperItem: item\u4e0d\u5141\u8bb8\u6302cc.Widget\u7ec4\u4ef6 \u8bf7\u624b\u52a8\u79fb\u9664"),this.node.removeComponent(t))},e.prototype.init=function(t){this.layout=t,this.layout.node.on(s.UIChangeBrotherEvnet,this.onChangeBrother,this),this.originSize=cc.size(this.width,this.height),this.node.setContentSize(this.originSize),this.originScale=cc.v2(this.node.scaleX,this.node.scaleY),this.node.on(cc.Node.EventType.SIZE_CHANGED,this.watchSize,this),this.node.on(cc.Node.EventType.SCALE_CHANGED,this.watchSize,this),this.onChangeBrother()},e.prototype.onDisable=function(){this.layout.node.off(s.UIChangeBrotherEvnet,this.onChangeBrother,this),this.node.off(cc.Node.EventType.SIZE_CHANGED,this.watchSize,this),this.node.off(cc.Node.EventType.SCALE_CHANGED,this.watchSize,this),this.unlisten()},e.prototype.onChangeBrother=function(){var t,e=this.layout.getBrotherNode(this.node);(null==e?void 0:e.uuid)!=(null===(t=this.brother)||void 0===t?void 0:t.uuid)&&(this.unlisten(),this.brother=e,this.listen(),this.watchBrother())},e.prototype.listen=function(){var t,e;null===(t=this.brother)||void 0===t||t.on("leave",this.unlisten,this),null===(e=this.brother)||void 0===e||e.on(cc.Node.EventType.POSITION_CHANGED,this.watchBrother,this)},e.prototype.unlisten=function(){var t,e;null===(t=this.brother)||void 0===t||t.off("leave",this.unlisten,this),null===(e=this.brother)||void 0===e||e.off(cc.Node.EventType.POSITION_CHANGED,this.watchBrother,this),this.brother=null},e.prototype.watchSize=function(){this.layout.column>1?(this.node.setContentSize(this.originSize),this.node.setScale(this.originScale)):(this.brother?this.watchBrother():this.node.emit(cc.Node.EventType.POSITION_CHANGED),this.layout.resetScrollView())},e.prototype.watchBrother=function(){this.brother&&(this.layout.headerToFooter?this.headerToFooterRelativeToFooter(this.brother):this.footerToHeaderRelativeToFooter(this.brother))},e.prototype.isOutOfBoundary=function(t){return!(!this.layout.vertical||0!=t.y)||!(!this.layout.horizontal||0!=t.x)},e.prototype.footerToHeaderWatchHeader=function(){if(!(this.layout.getSiblingIndex(this.node)>=this.layout.column)){var t=this.layout.footer.index+1;if(t>=this.layout.maxItemTotal){if(!this.layout.footerLoop||this.layout.scrollToHeaderOrFooter)return;t=0}var e=this.layout.isOutOfBoundaryFooter(this.node);this.isOutOfBoundary(e)&&(this.node.index=t,this.layout.notifyRefreshItem(this.node),this.node.emit("leave"),this.layout.setSiblingIndex(this.node,this.layout.children.length-1))}},e.prototype.footerToHeaderWatchFooter=function(){if(!(this.layout.getSiblingIndex(this.node)<this.layout.children.length-this.layout.column)){var t=this.layout.header.index-1;if(t<0){if(!this.layout.headerLoop||this.layout.scrollToHeaderOrFooter)return;t=this.node.index}var e=this.layout.isOutOfBoundaryHeader(this.node);this.isOutOfBoundary(e)&&(this.node.index=t,this.layout.notifyRefreshItem(this.node),this.node.emit("leave"),this.unlisten(),this.footerToHeaderRelativeToHeader(this.layout.header),this.layout.setSiblingIndex(this.node,0))}},e.prototype.headerToFooterWatchHeader=function(){if(!(this.layout.getSiblingIndex(this.node)>=this.layout.column)){var t=this.layout.footer.index+1;if(t>this.layout.maxItemTotal-1){if(!this.layout.footerLoop||this.layout.scrollToHeaderOrFooter)return;t=0}var e=this.layout.isOutOfBoundaryHeader(this.node);this.isOutOfBoundary(e)&&(this.node.index=t,this.layout.notifyRefreshItem(this.node),this.node.emit("leave"),this.layout.setSiblingIndex(this.node,this.layout.children.length-1))}},e.prototype.headerToFooterWatchFooter=function(){if(!(this.layout.getSiblingIndex(this.node)<this.layout.children.length-this.layout.column)){var t=this.layout.header.index-1;if(t<0){if(!this.layout.headerLoop||this.layout.scrollToHeaderOrFooter)return;t=this.node.index}var e=this.layout.isOutOfBoundaryFooter(this.node);this.isOutOfBoundary(e)&&(this.node.index=t,this.layout.notifyRefreshItem(this.node),this.node.emit("leave"),this.unlisten(),this.headerToFooterRelativeToHeader(this.layout.header),this.layout.setSiblingIndex(this.node,0))}},e.prototype.watchSelf=function(t){t?this.layout.headerToFooter?this.headerToFooterWatchFooter():this.footerToHeaderWatchHeader():this.layout.headerToFooter?this.headerToFooterWatchHeader():this.footerToHeaderWatchFooter()},e.prototype.footerToHeaderRelativeToHeader=function(t){var e=this.node.getPosition();this.layout.vertical?(this.layout.isGroupHeader(t)?(e.x=this.layout.getGroupFooter(this.node).x,e.y=this.layout.getGroupBottomY(this.node,t)):(e.x=this.layout.getGroupLeftX(this.node,t),e.y=t.y),0==this.node.index&&(e.x=this.layout.getGroupHeader(this.node).x)):(this.layout.isGroupHeader(t)?(e.x=this.layout.getGroupRightX(this.node,t),e.y=this.layout.getGroupFooter(this.node).y):(e.x=t.x,e.y=this.layout.getGroupTopY(this.node,t)),0==this.node.index&&(e.y=this.layout.getGroupHeader(this.node).y)),this.node.setPosition(e)},e.prototype.footerToHeaderRelativeToFooter=function(t){var e=this.node.getPosition();this.layout.vertical?this.layout.isGroupFooter(t)?(e.x=this.layout.getGroupHeader(this.node).x,e.y=this.layout.getGroupTopY(this.node,t)):(e.x=this.layout.getGroupRightX(this.node,t),e.y=t.y):this.layout.isGroupFooter(t)?(e.x=this.layout.getGroupLeftX(this.node,t),e.y=this.layout.getGroupHeader(this.node).y):(e.x=t.x,e.y=this.layout.getGroupBottomY(this.node,t)),this.node.setPosition(e)},e.prototype.headerToFooterRelativeToHeader=function(t){var e=this.node.getPosition();this.layout.vertical?(this.layout.isGroupHeader(t)?(e.x=this.layout.getGroupFooter(this.node).x,e.y=this.layout.getGroupTopY(this.node,t)):(e.x=this.layout.getGroupLeftX(this.node,t),e.y=t.y),0==this.node.index&&(e.x=this.layout.getGroupHeader(this.node).x)):(this.layout.isGroupHeader(t)?(e.x=this.layout.getGroupLeftX(this.node,t),e.y=this.layout.getGroupFooter(this.node).y):(e.x=t.x,e.y=this.layout.getGroupTopY(this.node,t)),0==this.node.index&&(e.y=this.layout.getGroupHeader(this.node).y)),this.node.setPosition(e)},e.prototype.headerToFooterRelativeToFooter=function(t){var e=this.node.getPosition();this.layout.vertical?this.layout.isGroupFooter(t)?(e.x=this.layout.getGroupHeader(this.node).x,e.y=this.layout.getGroupBottomY(this.node,t)):(e.x=this.layout.getGroupRightX(this.node,t),e.y=t.y):this.layout.isGroupFooter(t)?(e.x=this.layout.getGroupRightX(this.node,t),e.y=this.layout.getGroupHeader(this.node).y):(e.x=t.x,e.y=this.layout.getGroupBottomY(this.node,t)),this.node.setPosition(e)},n([a],e)}(cc.Component));o.default=c,cc._RF.pop()},{"./UISuperLayout":"UISuperLayout"}],UISuperLayout:[function(t,e,o){"use strict";cc._RF.push(e,"699eb1xVINCcZBBHwAgwDBT","UISuperLayout");var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),n=this&&this.__decorate||function(t,e,o,i){var r,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,i);else for(var h=t.length-1;h>=0;h--)(r=t[h])&&(s=(n<3?r(s):n>3?r(e,o,s):r(e,o))||s);return n>3&&s&&Object.defineProperty(e,o,s),s},s=this&&this.__awaiter||function(t,e,o,i){return new(o||(o=Promise))(function(r,n){function s(t){try{a(i.next(t))}catch(e){n(e)}}function h(t){try{a(i.throw(t))}catch(e){n(e)}}function a(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(s,h)}a((i=i.apply(t,e||[])).next())})},h=this&&this.__generator||function(t,e){var o,i,r,n,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return n={next:h(0),throw:h(1),return:h(2)},"function"==typeof Symbol&&(n[Symbol.iterator]=function(){return this}),n;function h(t){return function(e){return a([t,e])}}function a(n){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,i&&(r=2&n[0]?i.return:n[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,n[1])).done)return r;switch(i=0,r&&(n=[2&n[0],r.value]),n[0]){case 0:case 1:r=n;break;case 4:return s.label++,{value:n[1],done:!1};case 5:s.label++,i=n[1],n=[0];continue;case 7:n=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===n[0]||2===n[0])){s=0;continue}if(3===n[0]&&(!r||n[1]>r[0]&&n[1]<r[3])){s.label=n[1];break}if(6===n[0]&&s.label<r[1]){s.label=r[1],r=n;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(n);break}r[2]&&s.ops.pop(),s.trys.pop();continue}n=e.call(t,s)}catch(h){n=[6,h],i=0}finally{o=r=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}},a=this&&this.__spreadArrays||function(){for(var t=0,e=0,o=arguments.length;e<o;e++)t+=arguments[e].length;var i=Array(t),r=0;for(e=0;e<o;e++)for(var n=arguments[e],s=0,h=n.length;s<h;s++,r++)i[r]=n[s];return i};Object.defineProperty(o,"__esModule",{value:!0}),o.UISuperDirection=o.UISuperAxis=o.UIChangeBrotherEvnet=void 0;var c,l,u=t("./UISuperScrollView"),d=t("./UISuperItem"),p=cc._decorator,f=p.ccclass,y=p.property,g=p.menu;o.UIChangeBrotherEvnet="UIChangeBrotherEvnet",function(t){t[t.HORIZONTAL=0]="HORIZONTAL",t[t.VERTICAL=1]="VERTICAL"}(c=o.UISuperAxis||(o.UISuperAxis={})),function(t){t[t.HEADER_TO_FOOTER=0]="HEADER_TO_FOOTER",t[t.FOOTER_TO_HEADER=1]="FOOTER_TO_HEADER"}(l=o.UISuperDirection||(o.UISuperDirection={}));var v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.startAxis=c.VERTICAL,e.direction=l.HEADER_TO_FOOTER,e.paddingTop=0,e.paddingBottom=0,e.paddingLeft=0,e.paddingRight=0,e.spacing=cc.Vec2.ZERO,e.column=2,e.multiple=2,e.prefab=null,e.headerLoop=!1,e.footerLoop=!1,e.affectedByScale=!0,e.refreshItemEvents=[],e._isinited=!1,e._maxPrefabTotal=0,e._children=[],e._scrollView=null,e._maxItemTotal=0,e._prevLayoutPosition=cc.Vec2.ZERO,e.scrollToHeaderOrFooter=!1,e}return r(e,t),Object.defineProperty(e.prototype,"layoutDirection",{get:function(){var t=cc.Vec2.ZERO;return this.vertical?t.y=this.node.y-this._prevLayoutPosition.y:t.x=this.node.x-this._prevLayoutPosition.x,this._prevLayoutPosition=this.node.getPosition(),t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isScrollToFooter",{get:function(){return this.vertical?this.layoutDirection.y<0:this.layoutDirection.x>0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"children",{get:function(){return this._children},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxItemTotal",{get:function(){return this._maxItemTotal},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxPrefabTotal",{get:function(){return this._maxPrefabTotal},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"viewSize",{get:function(){return this._viewSize||(this._viewSize=this.scrollView.view.getContentSize()),this._viewSize},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"vertical",{get:function(){return this.startAxis==c.VERTICAL},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"horizontal",{get:function(){return this.startAxis==c.HORIZONTAL},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"headerToFooter",{get:function(){return this.direction==l.HEADER_TO_FOOTER},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"footerToHeader",{get:function(){return this.direction==l.FOOTER_TO_HEADER},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"spacingWidth",{get:function(){return this.spacing.x*(this.column-1)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"spacingHeight",{get:function(){return this.spacing.y*(this.column-1)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"accommodWidth",{get:function(){return this.viewSize.width-this.paddingLeft-this.paddingRight},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"accommodHeight",{get:function(){return this.viewSize.height-this.paddingTop-this.paddingBottom},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scrollView",{get:function(){return this._scrollView||(this._scrollView=this.node.parent.parent.getComponent(u.default)),this._scrollView},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"header",{get:function(){return this._children[0]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"footer",{get:function(){return this._children[this._children.length-1]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"topBoundary",{get:function(){return this.headerToFooter?this.headerBoundaryY+this.paddingTop:this.footerBoundaryY+this.paddingTop},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bottomBoundary",{get:function(){return this.headerToFooter?this.footerBoundaryY-this.paddingBottom:this.headerBoundaryY-this.paddingBottom},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"leftBoundary",{get:function(){return this.headerToFooter?this.headerBoundaryX-this.paddingLeft:this.footerBoundaryX-this.paddingLeft},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rightBoundary",{get:function(){return this.headerToFooter?this.footerBoundaryX+this.paddingRight:this.headerBoundaryX+this.paddingRight},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"headerBoundaryX",{get:function(){return this.headerToFooter?this.node.x+this.header.x-this.header.anchorX*this.getScaleWidth(this.header):this.node.x+this.header.x+(1-this.header.anchorX)*this.getScaleWidth(this.header)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"headerBoundaryY",{get:function(){return this.headerToFooter?this.node.y+this.header.y+(1-this.header.anchorY)*this.getScaleHeight(this.header):this.node.y+this.header.y-this.header.anchorY*this.getScaleHeight(this.header)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"footerBoundaryX",{get:function(){return this.headerToFooter?this.node.x+this.footer.x+(1-this.footer.anchorX)*this.getScaleWidth(this.footer):this.node.x+this.footer.x-this.footer.anchorX*this.getScaleWidth(this.footer)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"footerBoundaryY",{get:function(){return this.headerToFooter?this.node.y+this.footer.y-this.footer.anchorY*this.getScaleHeight(this.footer):this.node.y+this.footer.y+(1-this.footer.anchorY)*this.getScaleHeight(this.footer)},enumerable:!1,configurable:!0}),e.prototype.getContentSize=function(){var t=this.getReallySize(),e=this.scrollView.view.getContentSize();return t.height<e.height&&(t.height=e.height),t.width<e.width&&(t.width=e.width),t},e.prototype.getReallySize=function(){if(0==this.node.childrenCount)return this.viewSize;var t=cc.Size.ZERO;return this.headerToFooter?(t.width=this.footerBoundaryX+-this.headerBoundaryX+this.paddingLeft+this.paddingRight,t.height=this.headerBoundaryY+-this.footerBoundaryY+this.paddingTop+this.paddingBottom):(t.width=this.headerBoundaryX+-this.footerBoundaryX+this.paddingLeft+this.paddingRight,t.height=this.footerBoundaryY+-this.headerBoundaryY+this.paddingTop+this.paddingBottom),t},e.prototype.resetScrollView=function(){this.scrollView.reset()},e.prototype.getUsedScaleValue=function(t){return this.affectedByScale?Math.abs(t):1},e.prototype.total=function(t){return s(this,void 0,void 0,function(){var e,o;return h(this,function(i){switch(i.label){case 0:return this.scrollView.stopAutoScroll(),this.scrollView.release(),this.initlized(),[4,this.asyncCreateItem(t)];case 1:return i.sent(),e=this.getDataOffset(t),o=this.getReallyOffset(e),this.refreshItems(t,o),this._maxItemTotal=t,[2]}})})},e.prototype.getBrotherNode=function(t){var e=this.getSiblingIndex(t)-1;return this._children[e]},e.prototype.isGroupHeader=function(t){var e=this.getGroupHeader(t),o=this.vertical?cc.v2(e.x,0):cc.v2(0,e.y);return(this.vertical?cc.v2(t.x,0):cc.v2(0,t.y)).fuzzyEquals(o,1e-4)},e.prototype.isGroupFooter=function(t){var e=this.getGroupFooter(t),o=this.vertical?cc.v2(e.x,0):cc.v2(0,e.y);return(this.vertical?cc.v2(t.x,0):cc.v2(0,t.y)).fuzzyEquals(o,1e-4)},e.prototype.getGroupHeader=function(t){var e=cc.Vec2.ZERO;return t&&(this.vertical?this.headerToFooter?(e.x=t.anchorX*this.getScaleWidth(t)+this.paddingLeft*t.scaleX-this.node.anchorX*this.viewSize.width*t.scaleX,e.y=(1-t.anchorY)*-this.getScaleHeight(t)-this.paddingTop+(1-this.node.anchorY)*this.viewSize.height):(e.x=t.anchorX*this.getScaleWidth(t)+this.paddingLeft-this.node.anchorX*this.viewSize.width,e.y=t.anchorY*this.getScaleHeight(t)+this.paddingBottom-this.node.anchorY*this.viewSize.height):this.headerToFooter?(e.x=t.anchorX*this.getScaleWidth(t)+this.paddingLeft-this.node.anchorX*this.viewSize.width,e.y=(1-t.anchorY)*-t.height-this.paddingTop+(1-this.node.anchorY)*this.viewSize.height):(e.x=this.accommodWidth*this.node.anchorX-this.getScaleWidth(t)*(1-t.anchorX),e.y=(1-t.anchorY)*-t.height-this.paddingTop+(1-this.node.anchorY)*this.viewSize.height)),e},e.prototype.getGroupFooter=function(t){var e=cc.Vec2.ZERO;return t&&(this.vertical?(e.x=(this.accommodWidth+this.paddingLeft)*this.node.anchorX-(this.getScaleWidth(t)*(1-t.anchorX)+this.node.anchorX*this.paddingRight),e.y=t.y):(e.x=t.x,e.y=-((this.accommodHeight+this.paddingTop)*this.node.anchorY-this.getScaleHeight(t)*t.anchorY)+(1-t.anchorY)*this.paddingBottom)),e},e.prototype.getGroupRightX=function(t,e){return t&&e?e.x+this.getScaleWidth(e)*(1-e.anchorX)+this.getScaleWidth(t)*t.anchorX+this.spacing.x:this.getGroupHeader(t).x},e.prototype.getGroupLeftX=function(t,e){return t&&e?e.x-this.getScaleWidth(e)*e.anchorX-this.getScaleWidth(t)*(1-t.anchorX)-this.spacing.x:this.getGroupFooter(t).x},e.prototype.getGroupBottomY=function(t,e){return e.y-this.getScaleHeight(e)*e.anchorY-this.getScaleHeight(t)*(1-t.anchorY)-this.spacing.y},e.prototype.getGroupTopY=function(t,e){return e.y+this.getScaleHeight(e)*(1-e.anchorY)+this.getScaleHeight(t)*t.anchorY+this.spacing.y},e.prototype.isOutOfBoundaryHeader=function(t,e){void 0===e&&(e=1.5);var o=t.width*this.getUsedScaleValue(t.scaleX)*e,i=-t.height*this.getUsedScaleValue(t.scaleY)*e;return this.scrollView.getHowMuchOutOfBoundary(cc.v2(o,i))},e.prototype.isOutOfBoundaryFooter=function(t,e){void 0===e&&(e=1.5);var o=-t.width*this.getUsedScaleValue(t.scaleX)*e,i=t.height*this.getUsedScaleValue(t.scaleY)*e;return this.scrollView.getHowMuchOutOfBoundary(cc.v2(o,i))},e.prototype.scrollToHeader=function(t,e){this.scrollToHeaderOrFooter=t>0,this.scrollView.stopAutoScroll(),this.resetToHeader(),this.headerToFooter?this.vertical?this.scrollView.scrollToTop(t,e):this.scrollView.scrollToLeft(t,e):this.vertical?this.scrollView.scrollToBottom(t,e):this.scrollView.scrollToRight(t,e)},e.prototype.scrollToFooter=function(t,e){this.scrollToHeaderOrFooter=t>0,this.scrollView.stopAutoScroll(),this.resetToFooter(),this.headerToFooter?this.vertical?this.scrollView.scrollToBottom(t,e):this.scrollView.scrollToRight(t,e):this.vertical?this.scrollView.scrollToTop(t,e):this.scrollView.scrollToLeft(t,e)},e.prototype.notifyRefreshItem=function(t){cc.Component.EventHandler.emitEvents(this.refreshItemEvents,t,t.index)},e.prototype.getSiblingIndex=function(t){return this._children.indexOf(t)},e.prototype.setSiblingIndex=function(t,e){e=-1!==e?e:this._children.length-1;var i=this._children.indexOf(t);e!==i&&(this._children.splice(i,1),e<this._children.length?this._children.splice(e,0,t):this._children.push(t),this.node.emit(o.UIChangeBrotherEvnet))},e.prototype.onLoad=function(){this.initlized()},e.prototype.initlized=function(){var t=this;this._isinited||(this.node.anchorX=.5,this.node.anchorY=.5,this.node.setContentSize(this.viewSize),this.node.getContentSize=this.getContentSize.bind(this),this.node.setPosition(cc.Vec2.ZERO),this.column=this.column<1?1:this.column,this.node.on(cc.Node.EventType.POSITION_CHANGED,function(){var e=t.isScrollToFooter;t.headerToFooter?e?t.footerToHeaderWatchChilds(e):t.headerToFooterWatchChilds(e):e?t.headerToFooterWatchChilds(e):t.footerToHeaderWatchChilds(e),(t.vertical&&0==t.node.y||t.horizontal&&0==t.node.x)&&t.header.setPosition(t.getGroupHeader(t.header))},this),this._isinited=!0)},e.prototype.getScaleWidth=function(t){return t.width*this.getUsedScaleValue(t.scaleX)},e.prototype.getScaleHeight=function(t){return t.height*this.getUsedScaleValue(t.scaleY)},e.prototype.getTempChildren=function(){for(var t=[],e=0;e<this._children.length;e++){var o=this._children[e];t.push(o)}return t},e.prototype.headerToFooterWatchChilds=function(t){for(var e=this.getTempChildren(),o=0;o<e.length;o++)e[o].watchSelf(t)},e.prototype.footerToHeaderWatchChilds=function(t){for(var e=this.getTempChildren(),o=e.length-1;o>=0;o--)e[o].watchSelf(t)},e.prototype.getDataOffset=function(t){if(this.footer&&this.footer.index+1>=t){var e=this.footer.index+1-t;return 0==e?0:-e}return 0==this._maxItemTotal||t<this._maxItemTotal||this._maxItemTotal<this._maxPrefabTotal?0:this.isGroupFooter(this.footer)?0:t-this._maxItemTotal},e.prototype.getReallyOffset=function(t){if(!this.header)return 0;if(t>0){for(var e=0;e<t;e++){if(this.isGroupFooter(this.footer))return e;var o=this.header.getPosition();this.vertical?this.isGroupFooter(this.header)?(this.headerToFooter?o.y=this.getGroupBottomY(this.header,this.header):o.y=this.getGroupTopY(this.header,this.header),o.x=this.getGroupHeader(this.header).x):o.x=this.getGroupRightX(this.header,this.header):this.isGroupFooter(this.header)?(this.headerToFooter?o.x=this.getGroupRightX(this.header,this.header):o.x=this.getGroupLeftX(this.header,this.header),o.y=this.getGroupHeader(this.header).y):o.y=this.getGroupBottomY(this.header,this.header),this.header.setPosition(o)}return t}for(e=0;e<Math.abs(t);e++)o=cc.Vec2.ZERO,this.vertical?this.isGroupHeader(this.header)?(o.x=this.getGroupFooter(this.header).x,this.headerToFooter?o.y=this.getGroupTopY(this.header,this.header):o.y=this.getGroupBottomY(this.header,this.header)):(o.x=this.getGroupLeftX(this.header,this.header),o.y=this.header.y):this.isGroupHeader(this.header)?(o.y=this.getGroupFooter(this.header).y,this.headerToFooter?o.x=this.getGroupLeftX(this.header,this.header):o.x=this.getGroupRightX(this.header,this.header)):(o.y=this.getGroupTopY(this.header,this.header),o.x=this.header.x),this.header.setPosition(o);return this.scrollView.calculateBoundary(),t},e.prototype.refreshItems=function(t,e){if(void 0===e&&(e=0),this.header)for(var o=this.header.index-1+e,i=0;i<this._children.length;i++){var r=this._children[i];++o>t-1?o=0:o<0&&(o=t-1),r.index=o,this.notifyRefreshItem(r)}},e.prototype.resetToHeader=function(){for(var t,e,o=0;o<this._children.length;o++){var i=this._children[o];i.index=o,this.notifyRefreshItem(i)}this.headerLoop||this.footerLoop?this.scrollToHeaderOrFooter||null===(e=this.header)||void 0===e||e.setPosition(this.getGroupHeader(this.header)):null===(t=this.header)||void 0===t||t.setPosition(this.getGroupHeader(this.header))},e.prototype.resetToFooter=function(){for(var t=this._maxItemTotal,e=this._children.length-1;e>=0;e--){var o=this._children[e];o.index=--t,this.notifyRefreshItem(o)}},e.prototype.asyncCreateItem=function(t){var e;return s(this,void 0,void 0,function(){var o,i,r,n,s,a=this;return h(this,function(h){switch(h.label){case 0:if(null===(e=this._gener)||void 0===e||e.return(""),this.node.childrenCount>t){for(o=this.node.childrenCount-t,i=0;i<o;i++)r=this.footer,this.remChild(r),r.destroy(),this.node.removeChild(r);return this.header&&(n=this.getGroupHeader(this.header),this.vertical?this.header.x=n.x:this.header.y=n.y),[2]}return this._maxPrefabTotal>0&&this._maxPrefabTotal==this.node.childrenCount?[2]:(s=t-this.node.childrenCount,this._gener=this.getGeneratorLength(s,function(){var t=cc.instantiate(a.prefab);t.index=a.node.childrenCount,a.addChild(t);var e,o,i=t.getComponent(d.default)||t.addComponent(d.default);if(a.node.addChild(t),i.init(a),1==a.node.childrenCount){var r=a.getGroupHeader(a.header);a.header.setPosition(r),a.scrollView.calculateBoundary()}return a.vertical?(e=a.getReallySize().height,o=a.viewSize.height):(e=a.getReallySize().width,o=a.viewSize.width),!(e>=o*a.multiple&&a.isGroupFooter(a.footer)&&(a._maxPrefabTotal=a.node.childrenCount,1))}),[4,this.exeGenerator(this._gener,10)]);case 1:return h.sent(),[2]}})})},e.prototype.addChild=function(t){this._children.push(t),this.node.emit(o.UIChangeBrotherEvnet)},e.prototype.remChild=function(t){var e=this._children.indexOf(t);-1!=e&&this._children.splice(e,1),this.node.emit(o.UIChangeBrotherEvnet)},e.prototype.getGeneratorLength=function(t,e){var o,i,r=[];for(o=2;o<arguments.length;o++)r[o-2]=arguments[o];return h(this,function(o){switch(o.label){case 0:i=0,o.label=1;case 1:return i<t?e.apply(void 0,a([i],r))?[4]:[3,3]:[3,5];case 2:return o.sent(),[3,4];case 3:return[2];case 4:return i++,[3,1];case 5:return[2]}})},e.prototype.exeGenerator=function(t,e){return new Promise(function(o){var i=t,r=function(){for(var t=(new Date).getTime(),n=i.next();;n=i.next()){if(null==n||n.done)return void o();if((new Date).getTime()-t>e)return void setTimeout(function(){return r()},1e3*cc.director.getDeltaTime())}};r()})},n([y({type:cc.Enum(c),displayName:"\u6392\u5217\u65b9\u5411"})],e.prototype,"startAxis",void 0),n([y({type:cc.Enum(l),displayName:"\u6392\u5217\u5b50\u8282\u70b9\u7684\u65b9\u5411"})],e.prototype,"direction",void 0),n([y({displayName:"\u4e0a\u8fb9\u8ddd"})],e.prototype,"paddingTop",void 0),n([y({displayName:"\u4e0b\u8fb9\u8ddd"})],e.prototype,"paddingBottom",void 0),n([y({displayName:"\u5de6\u8fb9\u8ddd"})],e.prototype,"paddingLeft",void 0),n([y({displayName:"\u53f3\u8fb9\u8ddd"})],e.prototype,"paddingRight",void 0),n([y({displayName:"\u95f4\u9694"})],e.prototype,"spacing",void 0),n([y({displayName:"\u6bcf\u7ec4item\u4e2a\u6570",tooltip:"\u5355\u884c\u7684\u5217\u6570 \u6216 \u5355\u5217\u7684\u884c\u6570"})],e.prototype,"column",void 0),n([y({displayName:"item\u521b\u5efa\u500d\u7387",tooltip:"\u76f8\u5bf9\u4e8eview\u7684\u5c3a\u5bf8 \u9ed8\u8ba42\u500d"})],e.prototype,"multiple",void 0),n([y({type:cc.Prefab,displayName:"item Prefab"})],e.prototype,"prefab",void 0),n([y({displayName:"\u5934\u90e8\u6ed1\u52a8\u5faa\u73af"})],e.prototype,"headerLoop",void 0),n([y({displayName:"\u5c3e\u90e8\u6ed1\u52a8\u5faa\u73af"})],e.prototype,"footerLoop",void 0),n([y],e.prototype,"affectedByScale",void 0),n([y(cc.Component.EventHandler)],e.prototype,"refreshItemEvents",void 0),n([f,g("UISuperLayout")],e)}(cc.Component);o.default=v,cc._RF.pop()},{"./UISuperItem":"UISuperItem","./UISuperScrollView":"UISuperScrollView"}],UISuperScrollView:[function(t,e,o){"use strict";cc._RF.push(e,"cf9af4O7wZKvocAG07bRvtr","UISuperScrollView");var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),n=this&&this.__decorate||function(t,e,o,i){var r,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,i);else for(var h=t.length-1;h>=0;h--)(r=t[h])&&(s=(n<3?r(s):n>3?r(e,o,s):r(e,o))||s);return n>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("./UISuperLayout"),h=cc._decorator,a=h.ccclass,c=h.property,l=h.menu,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.headerOutOffset=200,e.headerMultiple=2,e.footerOutOffset=200,e.footerMultiple=2,e.pullDownEvents=[],e.pullUpEvents=[],e.isMoveHeader=!1,e.isMoveFooter=!1,e.isLockHeader=!1,e.isLockFooter=!1,e.headerProgress=0,e.footerProgress=0,e._layout=null,e}return r(e,t),Object.defineProperty(e.prototype,"view",{get:function(){return this._view},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"autoScrolling",{get:function(){return this._autoScrolling},set:function(t){this._autoScrolling=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"layout",{get:function(){return null==this._layout&&(this._layout=this.content.getComponent(s.default)),this._layout},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isHeader",{get:function(){var t,e,o,i;if(this.layout.headerToFooter){if(null===(t=this.layout)||void 0===t?void 0:t.header)return 0==(null===(e=this.layout)||void 0===e?void 0:e.header.index)}else if(null===(o=this.layout)||void 0===o?void 0:o.footer)return(null===(i=this.layout)||void 0===i?void 0:i.footer.index)==this.layout.maxItemTotal-1;return!0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isFooter",{get:function(){var t,e,o;if(this.layout.headerToFooter){if(null===(t=this.layout)||void 0===t?void 0:t.footer)return this.layout.footer.index==this.layout.maxItemTotal-1}else if(null===(e=this.layout)||void 0===e?void 0:e.header)return 0==(null===(o=this.layout)||void 0===o?void 0:o.header.index);return!0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isCalculPull",{get:function(){return this.pullDownEvents.length>0||this.pullUpEvents.length>0},enumerable:!1,configurable:!0}),e.prototype.calculateBoundary=function(){this._calculateBoundary()},e.prototype.getHowMuchOutOfBoundary=function(t){return this._getHowMuchOutOfBoundary(t)},e.prototype.release=function(){if(this.isMoveHeader=!1,this.isMoveFooter=!1,this.isLockHeader||this.isLockFooter){var t=this.getHowMuchOutOfBoundary(),e=this.vertical?t.y:-t.x,o=!0;(0==e||this.isLockHeader&&e<0||this.isLockFooter&&e>0)&&(this.clearProgress(),o=!1),this.isLockHeader=!1,this.isLockFooter=!1,o&&(this._outOfBoundaryAmountDirty=!0,this._processInertiaScroll())}else this.clearProgress()},e.prototype.reset=function(){this._outOfBoundaryAmountDirty=!0,this.getHowMuchOutOfBoundary().fuzzyEquals(cc.v2(0,0),1e-4)||this._processInertiaScroll()},e.prototype._onTouchMoved=function(e,o){if(t.prototype._onTouchMoved.call(this,e,o),this.isCalculPull){var i=this.getHowMuchOutOfBoundary(),r=this.vertical?i.y:-i.x;r>0&&this.isHeader&&!this.isLockHeader&&!this.isLockFooter?(this.headerProgress=r<1e-4?0:r/this.headerOutOffset,this.headerProgress=r<1e-4?0:r/this.headerOutOffset,this.isMoveHeader=this.headerProgress>=this.headerMultiple,this.emitPullDownEvent({action:!1,progress:this.headerProgress,progressStage:this.isMoveHeader?"wait":"touch"}),this.emitPullUpEvent({action:!1,progress:0,progressStage:"release"})):r<0&&this.isFooter&&!this.isLockFooter&&!this.isLockHeader&&(this.footerProgress=-r<1e-4?0:-r/this.footerOutOffset,this.isMoveFooter=this.footerProgress>=this.footerMultiple,this.emitPullUpEvent({action:!1,progress:this.footerProgress,progressStage:this.isMoveFooter?"wait":"touch"}),this.emitPullDownEvent({action:!1,progress:0,progressStage:"release"}))}},e.prototype._dispatchEvent=function(e){t.prototype._dispatchEvent.call(this,e),"scroll-ended"==e&&(this.layout.scrollToHeaderOrFooter=!1)},e.prototype._getContentTopBoundary=function(){var t,e=this.view.getContentSize(),o=0;return o=(null===(t=this.layout)||void 0===t?void 0:t.header)&&this.layout.getReallySize().height>e.height?this.layout.topBoundary:this._getContentBottomBoundary()+e.height,this.isHeader&&this.isLockHeader&&(o+=this.headerOutOffset),o},e.prototype._getContentBottomBoundary=function(){var t,e=this.view.getContentSize(),o=0;return o=(null===(t=this.layout)||void 0===t?void 0:t.footer)&&this.layout.getReallySize().height>e.height?this.layout.bottomBoundary:this.layout.node.y-this.layout.node.getAnchorPoint().y*e.height,this.isFooter&&this.isLockFooter&&(o-=this.footerOutOffset),o},e.prototype._getContentLeftBoundary=function(){var t,e=this.view.getContentSize(),o=0;return o=(null===(t=this.layout)||void 0===t?void 0:t.header)&&this.layout.getReallySize().width>e.width?this.layout.leftBoundary:this.layout.node.x-this.layout.node.getAnchorPoint().x*e.width,this.isHeader&&this.isLockHeader&&(o-=this.headerOutOffset),o},e.prototype._getContentRightBoundary=function(){var t,e=this.view.getContentSize(),o=0;return o=(null===(t=this.layout)||void 0===t?void 0:t.footer)&&this.layout.getReallySize().width>e.width?this.layout.rightBoundary:this._getContentLeftBoundary()+e.width,this.isFooter&&this.isLockFooter&&(o+=this.footerOutOffset),o},e.prototype._startAutoScroll=function(e,o,i){this.isCalculPull&&(this.isMoveHeader&&!this.isLockHeader?(this.isLockHeader=!0,this.vertical&&(e.y-=this.headerOutOffset),this.horizontal&&(e.x+=this.headerOutOffset),this.emitPullDownEvent({action:!0,progress:this.headerProgress,progressStage:"lock"})):this.isMoveFooter&&!this.isLockFooter&&(this.isLockFooter=!0,this.vertical&&(e.y+=this.footerOutOffset),this.horizontal&&(e.x-=this.footerOutOffset),this.emitPullUpEvent({action:!0,progress:this.footerProgress,progressStage:"lock"}))),t.prototype._startAutoScroll.call(this,e,o,i)},e.prototype._updateScrollBar=function(e){if(t.prototype._updateScrollBar.call(this,e),this.isCalculPull&&!this._autoScrollBraking&&this.autoScrolling){var o=this.vertical?e.y:-e.x;if(o>0){var i=o<1e-4?0:o/this.headerOutOffset,r=void 0;this.isLockHeader?(this.headerProgress=1==this.headerProgress?this.headerProgress:Math.max(i,1),r="lock"):(this.headerProgress=i<this.headerProgress?i:this.headerProgress,r="release"),this.emitPullDownEvent({action:!1,progress:this.headerProgress,progressStage:r})}else o<0?(i=-o<1e-4?0:-o/this.footerOutOffset,r=void 0,this.isLockFooter?(this.footerProgress=1==this.footerProgress?this.footerProgress:Math.max(i,1),r="lock"):(this.footerProgress=i<this.footerProgress?i:this.footerProgress,r="release"),this.emitPullUpEvent({action:!1,progress:this.footerProgress,progressStage:r})):0==o&&(this.isLockHeader||this.isLockFooter||this.clearProgress())}},e.prototype.clearProgress=function(){this.headerProgress=0,this.footerProgress=0,this.emitPullDownEvent({action:!1,progress:0,progressStage:"release"}),this.emitPullUpEvent({action:!1,progress:0,progressStage:"release"})},e.prototype.emitPullDownEvent=function(t){cc.Component.EventHandler.emitEvents(this.pullDownEvents,this,t)},e.prototype.emitPullUpEvent=function(t){cc.Component.EventHandler.emitEvents(this.pullUpEvents,this,t)},n([c({displayName:"\u9876\u90e8\u504f\u79fb\u91cf",tooltip:"\u4e0b\u62c9\u65f6\u8d85\u8fc7\u6b64\u504f\u79fb\u4f1a\u53d1\u9001\u4e0b\u62c9\u4e8b\u4ef6"})],e.prototype,"headerOutOffset",void 0),n([c({displayName:"\u6ee1\u8db3\u89e6\u53d1Header\u7684\u500d\u6570"})],e.prototype,"headerMultiple",void 0),n([c({displayName:"\u5e95\u90e8\u504f\u79fb\u91cf",tooltip:"\u4e0a\u62c9\u65f6\u8d85\u8fc7\u6b64\u504f\u79fb\u4f1a\u53d1\u9001\u4e0a\u62c9\u4e8b\u4ef6"})],e.prototype,"footerOutOffset",void 0),n([c({displayName:"\u6ee1\u8db3\u89e6\u53d1Footer\u7684\u500d\u6570"})],e.prototype,"footerMultiple",void 0),n([c({type:cc.Component.EventHandler,displayName:"\u4e0b\u62c9\u4e8b\u4ef6"})],e.prototype,"pullDownEvents",void 0),n([c({type:cc.Component.EventHandler,displayName:"\u4e0a\u62c9\u4e8b\u4ef6"})],e.prototype,"pullUpEvents",void 0),n([a,l("UISpuerScrollView")],e)}(cc.ScrollView);o.default=u,cc._RF.pop()},{"./UISuperLayout":"UISuperLayout"}],chatItem:[function(t,e,o){"use strict";cc._RF.push(e,"99b10hZnWRCrIEdhwALstgg","chatItem");var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),n=this&&this.__decorate||function(t,e,o,i){var r,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,i);else for(var h=t.length-1;h>=0;h--)(r=t[h])&&(s=(n<3?r(s):n>3?r(e,o,s):r(e,o))||s);return n>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,h=s.ccclass,a=s.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.other=null,e.self=null,e}return r(e,t),e.prototype.show=function(t){var e;this.other.active="other"==t.type,this.self.active="self"==t.type;var o="self"==t.type?this.self:this.other;null===(e=this.label)||void 0===e||e.node.off(cc.Node.EventType.SIZE_CHANGED,this.onChangeSize,this),this.background=o.getChildByName("background").getComponent(cc.Layout),this.label=this.background.node.getChildByName("label").getComponent(cc.Label),this.label.node.on(cc.Node.EventType.SIZE_CHANGED,this.onChangeSize,this),this.label.overflow=cc.Label.Overflow.NONE,this.label.string=t.message,this.label._forceUpdateRenderData(),this.background.updateLayout(),this.background.node.width=this.label.node.width+20,this.node.height=this.background.node.height},e.prototype.onChangeSize=function(){this.label.node.width>600&&(this.label.overflow=cc.Label.Overflow.RESIZE_HEIGHT,this.label.node.width=600,this.label._forceUpdateRenderData(),this.background.updateLayout(),this.background.node.width=this.label.node.width+20,this.node.height=this.background.node.height)},n([a(cc.Node)],e.prototype,"other",void 0),n([a(cc.Node)],e.prototype,"self",void 0),n([h],e)}(cc.Component);o.default=c,cc._RF.pop()},{}],chatPanel:[function(t,e,o){"use strict";cc._RF.push(e,"9b675lsfsFJlbnH7YOQRVQo","chatPanel");var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),n=this&&this.__decorate||function(t,e,o,i){var r,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,i);else for(var h=t.length-1;h>=0;h--)(r=t[h])&&(s=(n<3?r(s):n>3?r(e,o,s):r(e,o))||s);return n>3&&s&&Object.defineProperty(e,o,s),s},s=this&&this.__awaiter||function(t,e,o,i){return new(o||(o=Promise))(function(r,n){function s(t){try{a(i.next(t))}catch(e){n(e)}}function h(t){try{a(i.throw(t))}catch(e){n(e)}}function a(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(s,h)}a((i=i.apply(t,e||[])).next())})},h=this&&this.__generator||function(t,e){var o,i,r,n,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return n={next:h(0),throw:h(1),return:h(2)},"function"==typeof Symbol&&(n[Symbol.iterator]=function(){return this}),n;function h(t){return function(e){return a([t,e])}}function a(n){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,i&&(r=2&n[0]?i.return:n[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,n[1])).done)return r;switch(i=0,r&&(n=[2&n[0],r.value]),n[0]){case 0:case 1:r=n;break;case 4:return s.label++,{value:n[1],done:!1};case 5:s.label++,i=n[1],n=[0];continue;case 7:n=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===n[0]||2===n[0])){s=0;continue}if(3===n[0]&&(!r||n[1]>r[0]&&n[1]<r[3])){s.label=n[1];break}if(6===n[0]&&s.label<r[1]){s.label=r[1],r=n;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(n);break}r[2]&&s.ops.pop(),s.trys.pop();continue}n=e.call(t,s)}catch(h){n=[6,h],i=0}finally{o=r=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../cores/UISuperLayout"),c=t("./chatItem"),l=cc._decorator,u=l.ccclass,d=l.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.layout=null,e.input=null,e.aiMessages=["\u4f60\u8bf4\u5565?","\u8bf7\u8bf4\u4eba\u8bdd\uff0c\u8c22\u8c22!","\u554a?","\u5565\u5440?","\u548b\u5730\u4e86?","\u4ec0\u4e48\u60c5\u51b5?","\u4f60\u4e0d\u8981\u641e\u4e8b\u60c5\u54e6"],e.messages=[],e.index=0,e}return r(e,t),e.prototype.emit=function(){return s(this,void 0,void 0,function(){var t=this;return h(this,function(){return this.messages.push({type:"self",message:this.input.string||"?"}),this.input.string="",this.layout.total(this.messages.length),this.scheduleOnce(function(){return s(t,void 0,void 0,function(){return h(this,function(t){switch(t.label){case 0:return this.messages.push({type:"other",message:""+this.aiMessages[this.index++]}),[4,this.layout.total(this.messages.length)];case 1:return t.sent(),this.layout.scrollToHeader(),this.index==this.aiMessages.length&&(this.index=0),[2]}})})},1),[2]})})},e.prototype.refresh=function(t,e){var o=this.messages[this.messages.length-1-e];t.getComponent(c.default).show(o)},e.prototype.goMain=function(){cc.director.loadScene("main")},n([d(a.default)],e.prototype,"layout",void 0),n([d(cc.EditBox)],e.prototype,"input",void 0),n([u],e)}(cc.Component);o.default=p,cc._RF.pop()},{"../../cores/UISuperLayout":"UISuperLayout","./chatItem":"chatItem"}],main:[function(t,e,o){"use strict";cc._RF.push(e,"0746fbblyhFY4dsGbqYC+cs","main");var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),n=this&&this.__decorate||function(t,e,o,i){var r,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,i);else for(var h=t.length-1;h>=0;h--)(r=t[h])&&(s=(n<3?r(s):n>3?r(e,o,s):r(e,o))||s);return n>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,h=s.ccclass,a=(s.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.goto=function(t,e){cc.director.loadScene(e)},n([h],e)}(cc.Component));o.default=a,cc._RF.pop()},{}],verticalItem:[function(t,e,o){"use strict";cc._RF.push(e,"34da2XkCIpPIp4Pkg7X+5GV","verticalItem");var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),n=this&&this.__decorate||function(t,e,o,i){var r,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,i);else for(var h=t.length-1;h>=0;h--)(r=t[h])&&(s=(n<3?r(s):n>3?r(e,o,s):r(e,o))||s);return n>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=cc._decorator,h=s.ccclass,a=s.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.label=null,e}return r(e,t),e.prototype.show=function(t,e,o){this.index=e,this.remove=o,this.label.string=t.message},e.prototype.onRemove=function(){this.remove(this.index)},e.prototype.onClick=function(){},n([a(cc.Label)],e.prototype,"label",void 0),n([h],e)}(cc.Component);o.default=c,cc._RF.pop()},{}],verticalLoadAndRefresh:[function(t,e,o){"use strict";cc._RF.push(e,"ee163WdQsJDXI9MrARu99Qg","verticalLoadAndRefresh");var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),n=this&&this.__decorate||function(t,e,o,i){var r,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,i);else for(var h=t.length-1;h>=0;h--)(r=t[h])&&(s=(n<3?r(s):n>3?r(e,o,s):r(e,o))||s);return n>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../../cores/UISuperLayout"),h=t("./verticalItem"),a=cc._decorator,c=a.ccclass,l=a.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.header=null,e.footer=null,e.layout=null,e.refreshTotal=1,e.total=10,e.datas=[],e}return r(e,t),e.prototype.onLoad=function(){this.header.scaleY=0,this.footer.scaleY=0},e.prototype.onRefreshEvent=function(t,e){var o=this.datas[e];t.getComponent(h.default).show(o,e,this.onRemove.bind(this))},e.prototype.onRemove=function(t){this.datas.splice(t,1),this.layout.total(this.datas.length)},e.prototype.gotoHeader=function(){this.layout.scrollToHeader(.618)},e.prototype.gotoFooter=function(){this.layout.scrollToFooter(.618)},e.prototype.gotoMain=function(){cc.director.loadScene("main")},e.prototype.onHeaderEvent=function(t,e){var o=this;this.header.opacity=255*e.progress;var i=this.header.getComponentInChildren(cc.Label);if("touch"==e.progressStage&&(i.string="\u2193 \u4e0b\u62c9\u5237\u65b0"),"wait"==e.progressStage&&(i.string="\u2191 \u677e\u5f00\u5237\u65b0"),"lock"==e.progressStage&&(i.string=0==this.datas.length?"\u6ca1\u6709\u6570\u636e":"\u5237\u65b0\u4e2d..."),"release"==e.progressStage&&(i.string=""),e.progress>2?this.header.playing||(this.header.runAction(cc.scaleTo(.618,1,1).easing(cc.easeElasticOut(.236))),this.header.playing=!0):(this.header.stopAllActions(),this.header.playing=!1,this.header.scaleY=e.progress),e.action){for(var r=0;r<this.datas.length;r++)this.datas[r].message=r+" - (\u5237\u65b0\u6b21\u6570"+this.refreshTotal+")";this.scheduleOnce(function(){return o.layout.total(o.datas.length)},.5),this.refreshTotal++}},e.prototype.onFooterEvent=function(t,e){var o=this;this.footer.opacity=255*e.progress;var i=this.footer.getComponentInChildren(cc.Label);if("touch"==e.progressStage&&(i.string="\u2191 \u4e0a\u62c9\u52a0\u8f7d"),"wait"==e.progressStage&&(i.string="\u2193 \u677e\u5f00\u52a0\u8f7d"),"lock"==e.progressStage&&(i.string="\u52a0\u8f7d\u4e2d..."),"release"==e.progressStage&&(i.string=""),e.progress>2?this.footer.playing||(this.footer.runAction(cc.scaleTo(.618,1,1).easing(cc.easeElasticOut(.236))),this.footer.playing=!0):(this.footer.stopAllActions(),this.footer.playing=!1,this.footer.scaleY=e.progress),e.action){for(var r=0;r<this.total;r++)this.datas.push({message:""+this.datas.length});this.scheduleOnce(function(){return o.layout.total(o.datas.length)},.5)}},n([l(cc.Node)],e.prototype,"header",void 0),n([l(cc.Node)],e.prototype,"footer",void 0),n([l(s.default)],e.prototype,"layout",void 0),n([c],e)}(cc.Component);o.default=u,cc._RF.pop()},{"../../cores/UISuperLayout":"UISuperLayout","./verticalItem":"verticalItem"}],verticalSimple:[function(t,e,o){"use strict";cc._RF.push(e,"2c53978e9hHxrD0f/3bH9LP","verticalSimple");var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),n=this&&this.__decorate||function(t,e,o,i){var r,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,i);else for(var h=t.length-1;h>=0;h--)(r=t[h])&&(s=(n<3?r(s):n>3?r(e,o,s):r(e,o))||s);return n>3&&s&&Object.defineProperty(e,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var s=t("../../cores/UISuperLayout"),h=t("./verticalItem"),a=cc._decorator,c=a.ccclass,l=a.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.layout=null,e.total=500,e.init=!1,e.datas=[],e}return r(e,t),e.prototype.onLoad=function(){if(this.init){for(var t=0;t<this.total;t++)this.datas.push({message:""+this.datas.length});this.layout.total(this.datas.length)}},e.prototype.onRefreshEvent=function(t,e){var o=this.datas[e];t.getComponent(h.default).show(o,e,this.onRemove.bind(this))},e.prototype.onRemove=function(t){this.datas.splice(t,1),this.layout.total(this.datas.length)},e.prototype.addItem=function(t,e){for(var o=0;o<e;o++)this.datas.push({message:""+this.datas.length});this.layout.total(this.datas.length)},e.prototype.gotoHeader=function(){this.layout.scrollToHeader(.618)},e.prototype.gotoFooter=function(){this.layout.scrollToFooter(.618)},e.prototype.gotoMain=function(){cc.director.loadScene("main")},n([l(s.default)],e.prototype,"layout",void 0),n([l],e.prototype,"total",void 0),n([l],e.prototype,"init",void 0),n([c],e)}(cc.Component);o.default=u,cc._RF.pop()},{"../../cores/UISuperLayout":"UISuperLayout","./verticalItem":"verticalItem"}]},{},["UISuperItem","UISuperLayout","UISuperScrollView","chatItem","chatPanel","main","verticalItem","verticalLoadAndRefresh","verticalSimple"]);